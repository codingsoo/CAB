{
  "number": 8869,
  "title": "Move out Storybook into it's own workspace",
  "created_at": "2022-01-11T15:57:27Z",
  "closed_at": "2022-01-27T10:20:02Z",
  "labels": [
    "enhancement",
    "good first issue",
    "help wanted"
  ],
  "url": "https://github.com/backstage/backstage/issues/8869",
  "body": "We've got a real issue with upgrading certain dependencies, looking at you webpack \ud83d\udc40 , because we have two different versions of webpack v4, and v5 running side by side, and the types are all over the place for the webpack plugins and libraries.\r\n\r\nWe have a stable build right now, but trying to upgrade dependencies #8793 #8548 are proving to be a massive time sink as we need to get the correct modules installed in the correct places for our typescript build to pass with `skipLibCheck: false`.\r\n\r\nNot hoisting the packages from the `storybook` workspace has worked for now, but it would be really nice if we just had one version of webpack and all the dev-server dependencies in the project.\r\n\r\nUntil storybook starts to use v5 out of the box, there's little we can do, as you can use v5 with storybook, but it will also try and bring in v5 which makes the whole thing even worse.\r\n\r\nLet's move out Storybook into it's own yarn workspaces, that requires a seperate yarn install to get up and running and would install things in `storybook/node_modules` seperate with it's own yarn.lock.\r\n\r\nMaybe there's also a possibility to skip the build tooling of storybook entirely and just get it to generate something that we can hook into our own build system instead.",
  "comments_url": "https://api.github.com/repos/backstage/backstage/issues/8869/comments",
  "author": "benjdlambert",
  "comments": [
    {
      "user": "snehaljos",
      "created_at": "2022-01-12T12:34:59Z",
      "body": "hi am interested to work on it but I need some help can I work  on it?"
    },
    {
      "user": "benjdlambert",
      "created_at": "2022-01-27T10:20:18Z",
      "body": "So I think it should be a case of removing `storybook` from `packages` and placing it at the root level under `storybook/` and then making sure that all the stories still work, and that any workflows that run storybook need to do a `yarn install` in the `storybook` directory as well as a normal `yarn install`. Feel free to go ahead and see if you can get this working, maybe there could also be other dragons which make this a little tricky and not a `good first issue`. \ud83d\ude05 \n\n---\n\nFixed! Thanks @snehaljos!"
    }
  ],
  "satisfaction_conditions": [
    "Complete isolation of Storybook dependencies from core project dependencies",
    "Maintained Storybook functionality with working stories",
    "Independent dependency management for Storybook workspace",
    "Preservation of existing build system integration",
    "Clear documentation for workspace setup requirements"
  ],
  "_classification": {
    "category": "Can be dockerized without any issue",
    "timestamp": "2025-04-04 23:47:53"
  },
  "git_commit_info": {
    "sha": "6f1c910a20052741ed6cc173e2e408c15fc6aefe",
    "date": "2020-04-17T18:15:04Z",
    "message": "Put backstage cli back in dev dependencies",
    "author": "Ruair\u00ed O'Brien"
  },
  "repository_info": {
    "structure_summary": ".\n./.git\n./.git/branches\n./.git/description\n./.git/hooks\n./.git/hooks/applypatch-msg.sample\n./.git/hooks/commit-msg.sample\n./.git/hooks/post-update.sample\n./.git/hooks/pre-applypatch.sample\n./.git/hooks/pre-commit.sample\n./.git/hooks/pre-merge-commit.sample\n./.git/hooks/pre-push.sample\n./.git/hooks/pre-receive.sample\n./.git/hooks/push-to-checkout.sample\n./.git/hooks/update.sample\n./.git/hooks/fsmonitor-watchman.sample\n./.git/hooks/pre-rebase.sample\n./.git/hooks/prepare-commit-msg.sample\n./.git/hooks/sendemail-validate.sample\n./.git/info\n./.git/info/exclude\n./.git/config\n./.git/objects\n./.git/objects/pack\n./.git/objects/pack/pack-ba50c4eb398ffe328c2e0997b5c7f1d78438df71.pack\n./.git/objects/pack/pack-ba50c4eb398ffe328c2e0997b5c7f1d78438df71.rev\n./.git/objects/pack/pack-ba50c4eb398ffe328c2e0997b5c7f1d78438df71.idx\n./.git/objects/info\n./.git/HEAD\n./.git/refs\n./.git/refs/heads\n./.git/refs/heads/master\n./.git/refs/tags\n./.git/refs/remotes\n./.git/refs/remotes/origin\n./.git/refs/remotes/origin/HEAD\n./.git/packed-refs\n./.git/logs\n./.git/logs/refs\n./.git/logs/refs/remotes\n./.git/logs/refs/remotes/origin\n./.git/logs/refs/remotes/origin/HEAD\n./.git/logs/refs/heads\n./.git/logs/refs/heads/master\n./.git/logs/HEAD\n./.git/index\n./.editorconfig\n./.github\n./.github/CODEOWNERS\n./.github/ISSUE_TEMPLATE\n./.github/ISSUE_TEMPLATE/bug_template.md\n./.github/ISSUE_TEMPLATE/feature_template.md\n./.github/ISSUE_TEMPLATE/ux-component_template.md\n./.github/PULL_REQUEST_TEMPLATE.md\n./.github/workflows\n./.github/workflows/cli.yml\n./.github/workflows/frontend.yml\n./.github/workflows/master.yml\n./.github/workflows/storybook-deploy.yml\n./.npmrc\n./docs\n./docs/DLS.png\n./docs/FAQ.md\n./docs/README.md\n./docs/architecture-terminology.md\n./docs/create-an-app.md\n./docs/create-app_output.png\n./docs/design.md\n./docs/designheader.png\n./docs/getting-started\n./docs/getting-started/Plugin development.md\n./docs/getting-started/README.md\n./docs/getting-started/contributing-to-storybook.md\n./docs/getting-started/create-a-plugin.md\n./docs/getting-started/create-plugin_output.png\n./docs/getting-started/development-environment.md\n./docs/getting-started/my-plugin_screenshot.png\n./docs/getting-started/running-storybook.png\n./docs/getting-started/storybook-page.png\n./docs/getting-started/structure-of-a-plugin.md\n./docs/headline.png\n./docs/publishing.md\n./docs/reference\n./docs/reference/README.md\n./docs/reference/createPlugin-feature-flags.md\n./docs/reference/createPlugin-router.md\n./docs/reference/createPlugin.md\n./packages\n./packages/app\n./packages/app/README.md\n./packages/app/public\n./packages/app/public/manifest.json\n./packages/app/public/robots.txt\n./packages/app/public/android-chrome-192x192.png\n./packages/app/public/apple-touch-icon.png\n./packages/app/public/favicon-16x16.png\n./packages/app/public/favicon-32x32.png\n./packages/app/public/favicon.ico\n./packages/app/public/index.html\n./packages/app/public/safari-pinned-tab.svg\n./packages/app/src\n./packages/app/src/components\n./packages/app/src/components/Root\n./packages/app/src/components/Root/Root.tsx\n./packages/app/src/components/Root/ToggleThemeSidebarItem.tsx\n./packages/app/src/components/Root/index.ts\n./packages/app/src/components/ErrorDisplay\n./packages/app/src/components/ErrorDisplay/ErrorDisplay.tsx\n./packages/app/src/components/ErrorDisplay/index.ts\n./packages/app/src/App.test.tsx\n./packages/app/src/App.tsx\n./packages/app/src/ThemeContext.tsx\n./packages/app/src/apis.ts\n./packages/app/src/index.tsx\n./packages/app/src/plugins.ts\n./packages/app/src/react-app-env.d.ts\n./packages/app/src/setupTests.ts\n./packages/app/.eslintrc.js\n./packages/app/.gitignore\n./packages/app/cypress.json\n./packages/app/cypress\n./packages/app/cypress/.eslintrc.json\n./packages/app/cypress/integration\n./packages/app/cypress/integration/app.js\n./packages/app/cypress/support\n./packages/app/cypress/support/index.js\n./packages/app/package.json\n./packages/app/tsconfig.json\n./packages/cli\n./packages/cli/bin\n./packages/cli/bin/backstage-cli\n./packages/cli/config\n./packages/cli/config/eslint.js\n./packages/cli/config/jest.js\n./packages/cli/config/tsconfig.json\n./packages/cli/src\n./packages/cli/src/commands\n./packages/cli/src/commands/app\n./packages/cli/src/commands/app/build.ts\n./packages/cli/src/commands/app/serve.ts\n./packages/cli/src/commands/build-cache\n./packages/cli/src/commands/build-cache/archive.ts\n./packages/cli/src/commands/build-cache/cache.ts\n./packages/cli/src/commands/build-cache/index.ts\n./packages/cli/src/commands/build-cache/options.ts\n./packages/cli/src/commands/clean\n./packages/cli/src/commands/clean/clean.ts\n./packages/cli/src/commands/create-app\n./packages/cli/src/commands/create-app/createApp.ts\n./packages/cli/src/commands/create-plugin\n./packages/cli/src/commands/create-plugin/createPlugin.test.ts\n./packages/cli/src/commands/create-plugin/createPlugin.ts\n./packages/cli/src/commands/create-plugin/lib\n./packages/cli/src/commands/create-plugin/lib/codeowners.test.ts\n./packages/cli/src/commands/create-plugin/lib/codeowners.ts\n./packages/cli/src/commands/lint.ts\n./packages/cli/src/commands/plugin\n./packages/cli/src/commands/plugin/assets.d.ts\n./packages/cli/src/commands/plugin/build.ts\n./packages/cli/src/commands/plugin/rollup.config.ts\n./packages/cli/src/commands/plugin/serve\n./packages/cli/src/commands/plugin/serve/config.ts\n./packages/cli/src/commands/plugin/serve/index.ts\n./packages/cli/src/commands/plugin/serve/paths.ts\n./packages/cli/src/commands/plugin/serve/server.ts\n./packages/cli/src/commands/plugin/testCommand.ts\n./packages/cli/src/commands/remove-plugin\n./packages/cli/src/commands/remove-plugin/removePlugin.test.ts\n./packages/cli/src/commands/remove-plugin/removePlugin.ts\n./packages/cli/src/commands/testCommand.ts\n./packages/cli/src/commands/watch-deps\n./packages/cli/src/commands/watch-deps/child.ts\n./packages/cli/src/commands/watch-deps/compiler.ts\n./packages/cli/src/commands/watch-deps/index.ts\n./packages/cli/src/commands/watch-deps/logger.ts\n./packages/cli/src/commands/watch-deps/packages.ts\n./packages/cli/src/commands/watch-deps/watcher.ts\n./packages/cli/src/helpers\n./packages/cli/src/helpers/errors.ts\n./packages/cli/src/helpers/paths.ts\n./packages/cli/src/helpers/run.ts\n./packages/cli/src/helpers/tasks.test.ts\n./packages/cli/src/helpers/tasks.ts\n./packages/cli/src/helpers/version.ts\n./packages/cli/src/index.test.ts\n./packages/cli/src/index.ts\n./packages/cli/templates\n./packages/cli/templates/default-app\n./packages/cli/templates/default-app/.eslintrc.js\n./packages/cli/templates/default-app/README.md\n./packages/cli/templates/default-app/lerna.json\n./packages/cli/templates/default-app/package.json.hbs\n./packages/cli/templates/default-app/packages\n./packages/cli/templates/default-app/packages/app\n./packages/cli/templates/default-app/packages/app/package.json.hbs\n./packages/cli/templates/default-app/packages/app/public\n./packages/cli/templates/default-app/packages/app/public/android-chrome-192x192.png\n./packages/cli/templates/default-app/packages/app/public/apple-touch-icon.png\n./packages/cli/templates/default-app/packages/app/public/favicon-16x16.png\n./packages/cli/templates/default-app/packages/app/public/favicon-32x32.png\n./packages/cli/templates/default-app/packages/app/public/favicon.ico\n./packages/cli/templates/default-app/packages/app/public/index.html\n./packages/cli/templates/default-app/packages/app/public/manifest.json\n./packages/cli/templates/default-app/packages/app/public/robots.txt\n./packages/cli/templates/default-app/packages/app/public/safari-pinned-tab.svg\n./packages/cli/templates/default-app/packages/app/src\n./packages/cli/templates/default-app/packages/app/src/App.test.tsx\n./packages/cli/templates/default-app/packages/app/src/App.tsx\n./packages/cli/templates/default-app/packages/app/src/index.tsx\n./packages/cli/templates/default-app/packages/app/src/plugins.ts\n./packages/cli/templates/default-app/packages/app/src/setupTests.ts\n./packages/cli/templates/default-app/packages/app/tsconfig.json\n./packages/cli/templates/default-app/plugins\n./packages/cli/templates/default-app/plugins/welcome\n./packages/cli/templates/default-app/plugins/welcome/README.md\n./packages/cli/templates/default-app/plugins/welcome/package.json.hbs\n./packages/cli/templates/default-app/plugins/welcome/src\n./packages/cli/templates/default-app/plugins/welcome/src/components\n./packages/cli/templates/default-app/plugins/welcome/src/components/Timer\n./packages/cli/templates/default-app/plugins/welcome/src/components/Timer/Timer.tsx\n./packages/cli/templates/default-app/plugins/welcome/src/components/Timer/index.ts\n./packages/cli/templates/default-app/plugins/welcome/src/components/WelcomePage\n./packages/cli/templates/default-app/plugins/welcome/src/components/WelcomePage/WelcomePage.test.tsx\n./packages/cli/templates/default-app/plugins/welcome/src/components/WelcomePage/WelcomePage.tsx\n./packages/cli/templates/default-app/plugins/welcome/src/components/WelcomePage/index.ts\n./packages/cli/templates/default-app/plugins/welcome/src/index.ts\n./packages/cli/templates/default-app/plugins/welcome/src/plugin.test.ts\n./packages/cli/templates/default-app/plugins/welcome/src/plugin.ts\n./packages/cli/templates/default-app/plugins/welcome/src/setupTests.ts\n./packages/cli/templates/default-app/plugins/welcome/tsconfig.json\n./packages/cli/templates/default-app/prettier.config.js\n./packages/cli/templates/default-app/tsconfig.json\n./packages/cli/templates/default-plugin\n./packages/cli/templates/default-plugin/.eslintrc.js\n./packages/cli/templates/default-plugin/README.md.hbs\n./packages/cli/templates/default-plugin/package.json.hbs\n./packages/cli/templates/default-plugin/src\n./packages/cli/templates/default-plugin/src/components\n./packages/cli/templates/default-plugin/src/components/ExampleComponent\n./packages/cli/templates/default-plugin/src/components/ExampleComponent/ExampleComponent.test.tsx.hbs\n./packages/cli/templates/default-plugin/src/components/ExampleComponent/ExampleComponent.tsx.hbs\n./packages/cli/templates/default-plugin/src/components/ExampleComponent/index.ts\n./packages/cli/templates/default-plugin/src/components/ExampleFetchComponent\n./packages/cli/templates/default-plugin/src/components/ExampleFetchComponent/ExampleFetchComponent.test.tsx.hbs\n./packages/cli/templates/default-plugin/src/components/ExampleFetchComponent/ExampleFetchComponent.tsx.hbs\n./packages/cli/templates/default-plugin/src/components/ExampleFetchComponent/index.ts\n./packages/cli/templates/default-plugin/src/index.ts\n./packages/cli/templates/default-plugin/src/plugin.test.ts.hbs\n./packages/cli/templates/default-plugin/src/plugin.ts.hbs\n./packages/cli/templates/default-plugin/src/setupTests.ts\n./packages/cli/templates/default-plugin/tsconfig.json\n./packages/cli/templates/serve_index.html\n./packages/cli/.eslintrc.js\n./packages/cli/@types\n./packages/cli/@types/rollup-plugin-image-files.d.ts\n./packages/cli/README.md\n./packages/cli/e2e-test\n./packages/cli/e2e-test/.eslintrc.js\n./packages/cli/e2e-test/cli-e2e-test.js\n./packages/cli/e2e-test/createTestApp.js\n./packages/cli/e2e-test/createTestPlugin.js\n./packages/cli/e2e-test/helpers.js\n./packages/cli/package.json\n./packages/cli/tsconfig.json\n./packages/test-utils\n./packages/test-utils/.npmrc\n./packages/test-utils/src\n./packages/test-utils/src/testUtils\n./packages/test-utils/src/testUtils/appWrappers.test.tsx\n./packages/test-utils/src/testUtils/appWrappers.tsx\n./packages/test-utils/src/testUtils/index.tsx\n./packages/test-utils/src/testUtils/mockBreakpoint.ts\n./packages/test-utils/src/index.ts\n./packages/test-utils/src/setupTests.ts\n./packages/test-utils/README.md\n./packages/test-utils/package.json\n./packages/test-utils/tsconfig.json\n./packages/theme\n./packages/theme/.npmrc\n./packages/theme/src\n./packages/theme/src/baseTheme.ts\n./packages/theme/src/index.ts\n./packages/theme/src/themes.ts\n./packages/theme/src/types.ts\n./packages/theme/README.md\n./packages/theme/package.json\n./packages/theme/tsconfig.json\n./packages/core\n./packages/core/.eslintrc.js\n./packages/core/.npmrc\n./packages/core/README.md\n./packages/core/package.json\n./packages/core/src\n./packages/core/src/api\n./packages/core/src/api/api.ts\n./packages/core/src/api/apis\n./packages/core/src/api/apis/ApiProvider.test.tsx\n./packages/core/src/api/apis/ApiProvider.tsx\n./packages/core/src/api/apis/ApiRef.test.ts\n./packages/core/src/api/apis/ApiRef.ts\n./packages/core/src/api/apis/ApiRegistry.test.ts\n./packages/core/src/api/apis/ApiRegistry.ts\n./packages/core/src/api/apis/ApiTestRegistry.test.ts\n./packages/core/src/api/apis/ApiTestRegistry.ts\n./packages/core/src/api/apis/definitions\n./packages/core/src/api/apis/definitions/error.ts\n./packages/core/src/api/apis/definitions/featureFlags.ts\n./packages/core/src/api/apis/definitions/index.ts\n./packages/core/src/api/apis/index.ts\n./packages/core/src/api/apis/types.ts\n./packages/core/src/api/app\n./packages/core/src/api/app/AppBuilder.tsx\n./packages/core/src/api/app/AppContext.tsx\n./packages/core/src/api/app/FeatureFlags.test.tsx\n./packages/core/src/api/app/FeatureFlags.tsx\n./packages/core/src/api/app/LoginPage\n./packages/core/src/api/app/LoginPage/LoginPage.tsx\n./packages/core/src/api/app/LoginPage/index.ts\n./packages/core/src/api/app/types.ts\n./packages/core/src/api/index.ts\n./packages/core/src/api/plugin\n./packages/core/src/api/plugin/Plugin.tsx\n./packages/core/src/api/plugin/types.ts\n./packages/core/src/api/widgetView\n./packages/core/src/api/widgetView/WidgetViewBuilder.tsx\n./packages/core/src/api/widgetView/types.ts\n./packages/core/src/components\n./packages/core/src/components/CircleProgress.test.js\n./packages/core/src/components/CircleProgress.tsx\n./packages/core/src/components/DefaultWidgetView\n./packages/core/src/components/DefaultWidgetView/DefaultWidgetView.tsx\n./packages/core/src/components/DefaultWidgetView/index.ts\n./packages/core/src/components/FeatureDiscovery\n./packages/core/src/components/FeatureDiscovery/FeatureCalloutCircular.tsx\n./packages/core/src/components/FeatureDiscovery/lib\n./packages/core/src/components/FeatureDiscovery/lib/usePortal.ts\n./packages/core/src/components/FeatureDiscovery/lib/useShowCallout.ts\n./packages/core/src/components/HorizontalScrollGrid.stories.tsx\n./packages/core/src/components/HorizontalScrollGrid.test.js\n./packages/core/src/components/HorizontalScrollGrid.tsx\n./packages/core/src/components/Lifecycle\n./packages/core/src/components/Lifecycle/Lifecycle.tsx\n./packages/core/src/components/Lifecycle/LifecycleAlpha.stories.tsx\n./packages/core/src/components/Lifecycle/LifecycleBeta.stories.tsx\n./packages/core/src/components/Lifecycle/index.ts\n./packages/core/src/components/Progress\n./packages/core/src/components/Progress/Progress.stories.tsx\n./packages/core/src/components/Progress/Progress.tsx\n./packages/core/src/components/Progress/index.ts\n./packages/core/src/components/ProgressCard.stories.tsx\n./packages/core/src/components/ProgressCard.test.js\n./packages/core/src/components/ProgressCard.tsx\n./packages/core/src/components/SortableTable.js\n./packages/core/src/components/SortableTable.stories.tsx\n./packages/core/src/components/Status\n./packages/core/src/components/Status/Status.stories.tsx\n./packages/core/src/components/Status/Status.tsx\n./packages/core/src/components/Status/index.ts\n./packages/core/src/components/SupportButton\n./packages/core/src/components/SupportButton/SupportButton.tsx\n./packages/core/src/components/SupportButton/index.ts\n./packages/core/src/components/TrendLine\n./packages/core/src/components/TrendLine/TrendLine.stories.tsx\n./packages/core/src/components/TrendLine/TrendLine.test.tsx\n./packages/core/src/components/TrendLine/TrendLine.tsx\n./packages/core/src/components/TrendLine/index.ts\n./packages/core/src/components/WarningPanel\n./packages/core/src/components/WarningPanel/WarningPanel.stories.tsx\n./packages/core/src/components/WarningPanel/WarningPanel.test.tsx\n./packages/core/src/components/WarningPanel/WarningPanel.tsx\n./packages/core/src/components/WarningPanel/index.ts\n./packages/core/src/icons\n./packages/core/src/icons/icons.tsx\n./packages/core/src/icons/index.ts\n./packages/core/src/icons/types.ts\n./packages/core/src/index.ts\n./packages/core/src/layout\n./packages/core/src/layout/BottomLink\n./packages/core/src/layout/BottomLink/BottomLink.test.tsx\n./packages/core/src/layout/BottomLink/BottomLink.tsx\n./packages/core/src/layout/BottomLink/index.ts\n./packages/core/src/layout/Content\n./packages/core/src/layout/Content/Content.tsx\n./packages/core/src/layout/ContentHeader\n./packages/core/src/layout/ContentHeader/ContentHeader.test.tsx\n./packages/core/src/layout/ContentHeader/ContentHeader.tsx\n./packages/core/src/layout/ErrorBoundary\n./packages/core/src/layout/ErrorBoundary/ErrorBoundary.tsx\n./packages/core/src/layout/ErrorBoundary/index.ts\n./packages/core/src/layout/Header\n./packages/core/src/layout/Header/Header.test.tsx\n./packages/core/src/layout/Header/Header.tsx\n./packages/core/src/layout/Header/Waves.test.tsx\n./packages/core/src/layout/Header/Waves.tsx\n./packages/core/src/layout/Header/index.ts\n./packages/core/src/layout/HeaderActionMenu\n./packages/core/src/layout/HeaderActionMenu/HeaderActionMenu.test.tsx\n./packages/core/src/layout/HeaderActionMenu/HeaderActionMenu.tsx\n./packages/core/src/layout/HeaderActionMenu/MenuVertical.tsx\n./packages/core/src/layout/HeaderLabel\n./packages/core/src/layout/HeaderLabel/HeaderLabel.test.tsx\n./packages/core/src/layout/HeaderLabel/HeaderLabel.tsx\n./packages/core/src/layout/HeaderLabel/index.ts\n./packages/core/src/layout/InfoCard\n./packages/core/src/layout/InfoCard/InfoCard.stories.tsx\n./packages/core/src/layout/InfoCard/InfoCard.test.tsx\n./packages/core/src/layout/InfoCard/InfoCard.tsx\n./packages/core/src/layout/InfoCard/index.ts\n./packages/core/src/layout/Page\n./packages/core/src/layout/Page/Page.tsx\n./packages/core/src/layout/Page/PageThemeProvider.ts\n./packages/core/src/layout/Page/index.ts\n./packages/core/src/layout/Sidebar\n./packages/core/src/layout/Sidebar/Bar.tsx\n./packages/core/src/layout/Sidebar/Items.tsx\n./packages/core/src/layout/Sidebar/Page.tsx\n./packages/core/src/layout/Sidebar/config.ts\n./packages/core/src/layout/Sidebar/index.ts\n./packages/core/src/layout/TabbedCard\n./packages/core/src/layout/TabbedCard/TabbedCard.stories.tsx\n./packages/core/src/layout/TabbedCard/TabbedCard.test.tsx\n./packages/core/src/layout/TabbedCard/TabbedCard.tsx\n./packages/core/src/layout/TabbedCard/index.ts\n./packages/core/src/setupTests.ts\n./packages/core/tsconfig.json\n./packages/storybook\n./packages/storybook/.storybook\n./packages/storybook/.storybook/config.js\n./packages/storybook/.storybook/main.js\n./packages/storybook/.storybook/preview-head.html\n./packages/storybook/README.md\n./packages/storybook/package.json\n./packages/test-utils-core\n./packages/test-utils-core/.npmrc\n./packages/test-utils-core/README.md\n./packages/test-utils-core/package.json\n./packages/test-utils-core/src\n./packages/test-utils-core/src/index.ts\n./packages/test-utils-core/src/setupTests.ts\n./packages/test-utils-core/src/testUtils\n./packages/test-utils-core/src/testUtils/Keyboard.js\n./packages/test-utils-core/src/testUtils/Keyboard.test.js\n./packages/test-utils-core/src/testUtils/index.tsx\n./packages/test-utils-core/src/testUtils/logCollector.test.ts\n./packages/test-utils-core/src/testUtils/logCollector.ts\n./packages/test-utils-core/src/testUtils/testingLibrary.ts\n./packages/test-utils-core/tsconfig.json\n./.dockerignore\n./.eslintignore\n./.eslintrc.js\n./.gitignore\n./.yarn\n./.yarn/releases\n./.yarn/releases/yarn-1.22.1.js\n./.yarnrc\n./CODE_OF_CONDUCT.md\n./CONTRIBUTING.md\n./DEPLOYMENT.md\n./Dockerfile\n./LICENSE\n./NOTICE\n./README.md\n./backstage_overview.png\n./docker\n./docker/default.conf.template\n./docker/run.sh\n./lerna.json\n./package.json\n./plugins\n./plugins/home-page\n./plugins/home-page/.eslintrc.js\n./plugins/home-page/README.md\n./plugins/home-page/package.json\n./plugins/home-page/src\n./plugins/home-page/src/components\n./plugins/home-page/src/components/HomePage\n./plugins/home-page/src/components/HomePage/HomePage.test.tsx\n./plugins/home-page/src/components/HomePage/HomePage.tsx\n./plugins/home-page/src/components/HomePage/SquadTechHealth.tsx\n./plugins/home-page/src/components/HomePage/index.ts\n./plugins/home-page/src/components/HomepageTimer\n./plugins/home-page/src/components/HomepageTimer/HomepageTimer.tsx\n./plugins/home-page/src/components/HomepageTimer/index.ts\n./plugins/home-page/src/index.ts\n./plugins/home-page/src/plugin.test.ts\n./plugins/home-page/src/plugin.ts\n./plugins/home-page/src/setupTests.ts\n./plugins/home-page/tsconfig.json\n./plugins/lighthouse\n./plugins/lighthouse/.eslintrc.js\n./plugins/lighthouse/README.md\n./plugins/lighthouse/package.json\n./plugins/lighthouse/src\n./plugins/lighthouse/src/__fixtures__\n./plugins/lighthouse/src/__fixtures__/create-audit-response.json\n./plugins/lighthouse/src/__fixtures__/website-list-response.json\n./plugins/lighthouse/src/__fixtures__/website-response.json\n./plugins/lighthouse/src/api.ts\n./plugins/lighthouse/src/components\n./plugins/lighthouse/src/components/AuditList\n./plugins/lighthouse/src/components/AuditList/AuditListTable.test.tsx\n./plugins/lighthouse/src/components/AuditList/AuditListTable.tsx\n./plugins/lighthouse/src/components/AuditList/index.test.tsx\n./plugins/lighthouse/src/components/AuditList/index.tsx\n./plugins/lighthouse/src/components/AuditStatusIcon\n./plugins/lighthouse/src/components/AuditStatusIcon/index.tsx\n./plugins/lighthouse/src/components/AuditView\n./plugins/lighthouse/src/components/AuditView/index.test.tsx\n./plugins/lighthouse/src/components/AuditView/index.tsx\n./plugins/lighthouse/src/components/CreateAudit\n./plugins/lighthouse/src/components/CreateAudit/index.test.tsx\n./plugins/lighthouse/src/components/CreateAudit/index.tsx\n./plugins/lighthouse/src/components/Intro\n./plugins/lighthouse/src/components/Intro/index.test.tsx\n./plugins/lighthouse/src/components/Intro/index.tsx\n./plugins/lighthouse/src/components/SupportButton\n./plugins/lighthouse/src/components/SupportButton/index.tsx\n./plugins/lighthouse/src/index.ts\n./plugins/lighthouse/src/plugin.test.ts\n./plugins/lighthouse/src/plugin.ts\n./plugins/lighthouse/src/setupTests.ts\n./plugins/lighthouse/src/utils.ts\n./plugins/lighthouse/tsconfig.json\n./plugins/welcome\n./plugins/welcome/.eslintrc.js\n./plugins/welcome/README.md\n./plugins/welcome/package.json\n./plugins/welcome/src\n./plugins/welcome/src/components\n./plugins/welcome/src/components/Timer\n./plugins/welcome/src/components/Timer/Timer.tsx\n./plugins/welcome/src/components/Timer/index.ts\n./plugins/welcome/src/components/WelcomePage\n./plugins/welcome/src/components/WelcomePage/ErrorButton.test.tsx\n./plugins/welcome/src/components/WelcomePage/ErrorButton.tsx\n./plugins/welcome/src/components/WelcomePage/ToggleFeatureFlagButton.test.tsx\n./plugins/welcome/src/components/WelcomePage/ToggleFeatureFlagButton.tsx\n./plugins/welcome/src/components/WelcomePage/WelcomePage.test.tsx\n./plugins/welcome/src/components/WelcomePage/WelcomePage.tsx\n./plugins/welcome/src/components/WelcomePage/index.ts\n./plugins/welcome/src/index.ts\n./plugins/welcome/src/plugin.test.ts\n./plugins/welcome/src/plugin.ts\n./plugins/welcome/src/setupTests.ts\n./plugins/welcome/tsconfig.json\n./prettier.config.js\n./tsconfig.json\n./yarn.lock\n",
    "readme": "\n--- ./docs/README.md ---\n# Documentation\n\nCheck out [https://backstage.io]() or see the table of content below.\n\n- [Architecture and terminology](architecture-terminology.md)\n- [Getting started](getting-started/README.md)\n- [References](reference/README.md)\n- [Publishing](publishing.md)\n- [Designing for Backstage](design.md)\n\n\n\n--- ./docs/getting-started/README.md ---\n# Getting started with Backstage\n\n## Creating a Plugin\n\nThe value of Backstage grows with every new plugin that gets added. Here is a collection of tutorials that will guide you through setting up and extending an instance of Backstage with your own plugins.\n\n- [Development Environment](development-environment.md)\n- [Create a Backstage plugin](create-a-plugin.md)\n- [Structure of a plugin](structure-of-a-plugin.md)\n- Using Backstage components (TODO)\n\n[Back to Docs](../README.md)\n\n\n\n--- ./docs/reference/README.md ---\n# Reference documentation\n\nAPIs and Components\n\n- [createPlugin](createPlugin.md)\n- [createPlugin - router](createPlugin-router.md)\n- [createPlugin - feature flags](createPlugin-feature-flags.md)\n\n[Back to Docs](../README.md)\n\n\n",
    "readme_filenames": [
      "./docs/README.md",
      "./docs/getting-started/README.md",
      "./docs/reference/README.md"
    ],
    "dockerfile": "\n--- ./Dockerfile ---\nFROM nginx:mainline\n\n# This dockerfile requires the app to be built on the host first, as it\n# simply copies in the build output into the image.\n\n# The safest way to build this image is to use `yarn docker-build`\n\nCOPY packages/app/build /usr/share/nginx/html\nCOPY docker/default.conf.template /etc/nginx/conf.d/default.conf.template\nCOPY docker/run.sh /usr/local/bin/run.sh\nCMD run.sh\n\nENV PORT 80\n\n\n\n--- ./docker/default.conf.template ---\nserver {\n    listen       $PORT;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n        try_files $uri /index.html;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n\n\n\n--- ./docker/run.sh ---\n#!/usr/bin/env bash\n\n# Run nginx as root\nsed -i 's/user  nginx.*$//' /etc/nginx/nginx.conf\n\n# Write selected env vars to nginx config\nenvsubst '$PORT' < /etc/nginx/conf.d/default.conf.template > /etc/nginx/conf.d/default.conf\n\nexec nginx -g 'daemon off;'\n\n\n",
    "dockerfile_paths": [
      "./Dockerfile",
      "./docker/default.conf.template",
      "./docker/run.sh"
    ],
    "github_workflows": {
      ".github/workflows/cli.yml": "name: CLI Test\n\non:\n  pull_request:\n    paths:\n      - '.github/workflows/cli.yml'\n      - 'packages/cli/**'\n      - 'packages/core/**'\n      - 'scripts/**'\n\njobs:\n  build:\n    runs-on: ${{ matrix.os }}\n\n    strategy:\n      matrix:\n        os: [ubuntu-latest, windows-latest]\n        node-version: [12.x]\n\n    env:\n      CI: true\n      NODE_OPTIONS: --max-old-space-size=4096\n\n    name: Node ${{ matrix.node-version }} on ${{ matrix.os }}\n    steps:\n      - uses: actions/checkout@v2\n      - name: find location of global yarn cache\n        id: yarn-cache\n        run: echo \"::set-output name=dir::$(yarn cache dir)\"\n      - name: cache global yarn cache\n        uses: actions/cache@v1\n        with:\n          path: ${{ steps.yarn-cache.outputs.dir }}\n          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-yarn-\n      - name: use node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n      - name: yarn install\n        run: yarn install --frozen-lockfile\n      - run: yarn build\n      - name: verify app and plugin creation on Windows\n        working-directory: ${{ runner.temp }}\n        if: runner.os == 'Windows'\n        run: node ${{ github.workspace }}/packages/cli/e2e-test/cli-e2e-test.js\n        env:\n          BACKSTAGE_E2E_CLI_TEST: true\n      - name: verify app and plugin creation on Linux\n        working-directory: ${{ runner.temp }}\n        if: runner.os == 'Linux'\n        run: |\n          sudo sysctl fs.inotify.max_user_watches=524288\n          node ${{ github.workspace }}/packages/cli/e2e-test/cli-e2e-test.js\n        env:\n          BACKSTAGE_E2E_CLI_TEST: true\n      - name: lint newly created app and plugin\n        run: yarn lint:all\n        working-directory: ${{ runner.temp }}/test-app\n        env:\n          BACKSTAGE_E2E_CLI_TEST: true\n      - name: test newly created app and plugin\n        run: yarn test:all\n        working-directory: ${{ runner.temp }}/test-app\n        env:\n          BACKSTAGE_E2E_CLI_TEST: true\n",
      ".github/workflows/frontend.yml": "name: Frontend CI\n\non:\n  pull_request:\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [12.x]\n\n    env:\n      CI: true\n      NODE_OPTIONS: --max-old-space-size=4096\n      BACKSTAGE_CACHE_DIR: <repoRoot>/.backstage-build-cache\n      BACKSTAGE_CACHE_MAX_ENTRIES: 2\n\n    steps:\n      - uses: actions/checkout@v2\n      - name: fetch branch master\n        run: git fetch origin master\n      - name: find location of global yarn cache\n        id: yarn-cache\n        run: echo \"::set-output name=dir::$(yarn cache dir)\"\n      - name: cache global yarn cache\n        uses: actions/cache@v1\n        with:\n          path: ${{ steps.yarn-cache.outputs.dir }}\n          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-yarn-\n      - name: cache node_modules\n        uses: actions/cache@v1\n        with:\n          path: node_modules\n          key: ${{ runner.os }}-modules-${{ hashFiles('yarn.lock') }}\n      - name: cache build cache\n        uses: actions/cache@v1\n        with:\n          path: .backstage-build-cache\n          key: build-cache-${{ github.sha }}\n          restore-keys: |\n            build-cache-\n      - name: use node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n\n      - name: yarn install\n        run: yarn install --frozen-lockfile\n\n      - name: lint\n        run: yarn lerna -- run lint --since origin/master\n\n      - name: build\n        run: yarn build\n\n      - name: test\n        run: yarn lerna -- run test --since origin/master -- --coverage\n\n      - name: yarn bundle, if app was changed\n        run: git diff --quiet origin/master HEAD -- yarn.lock packages/app packages/core || yarn bundle\n\n      - name: verify storybook\n        run: yarn workspace storybook build-storybook\n",
      ".github/workflows/master.yml": "name: Master Build\n\non:\n  push:\n    branches: [master]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [12.x]\n\n    env:\n      CI: true\n      NODE_OPTIONS: --max-old-space-size=4096\n      BACKSTAGE_CACHE_DIR: <repoRoot>/.backstage-build-cache\n      BACKSTAGE_CACHE_MAX_ENTRIES: 2\n\n    steps:\n      - uses: actions/checkout@v2\n      - name: find location of global yarn cache\n        id: yarn-cache\n        run: echo \"::set-output name=dir::$(yarn cache dir)\"\n      - name: cache global yarn cache\n        uses: actions/cache@v1\n        with:\n          path: ${{ steps.yarn-cache.outputs.dir }}\n          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-yarn-\n      - name: cache node_modules\n        uses: actions/cache@v1\n        with:\n          path: node_modules\n          key: ${{ runner.os }}-modules-${{ hashFiles('yarn.lock') }}\n      - name: cache build cache\n        uses: actions/cache@v1\n        with:\n          path: .backstage-build-cache\n          key: build-cache-${{ github.sha }}\n          restore-keys: |\n            build-cache-\n      - name: use node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n          registry-url: https://registry.npmjs.org/ # Needed for auth\n\n      - name: yarn install\n        run: yarn install --frozen-lockfile\n\n      - name: lint\n        run: yarn lerna -- run lint\n\n      - name: build\n        run: yarn build\n\n      - name: test\n        run: yarn lerna -- run test -- --coverage\n\n      # Publishes current version of packages that are not already present in the registry\n      - name: publish\n        run: yarn lerna -- publish from-package --yes\n        env:\n          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}\n\n      # Tags the commit with the version in the core package if the tag doesn't exist\n      - uses: Klemensas/action-autotag@1.2.3\n        with:\n          GITHUB_TOKEN: \"${{ secrets.GITHUB_TOKEN }}\"\n          package_root: \"packages/core\"\n          tag_prefix: \"v\"\n"
    }
  },
  "llm_calls_before_build": 0,
  "github_workflows_found": [
    ".github/workflows/cli.yml",
    ".github/workflows/frontend.yml",
    ".github/workflows/master.yml"
  ],
  "dockerfile": "FROM node:12-buster\n\nENV NODE_OPTIONS=--max-old-space-size=4096\n\nRUN apt-get update && apt-get install -y git python make g++ && rm -rf /var/lib/apt/lists/* && \\\n    mkdir -p /app && cd /app && \\\n    git init && \\\n    git remote add origin https://github.com/backstage/backstage.git && \\\n    git fetch --depth 1 origin 6f1c910a20052741ed6cc173e2e408c15fc6aefe && \\\n    git checkout FETCH_HEAD\n\nWORKDIR /app\nRUN yarn install --frozen-lockfile --network-timeout 1000000\n\nWORKDIR /app/packages/storybook\nRUN yarn install --frozen-lockfile --network-timeout 1000000\n\nWORKDIR /app\nRUN yarn lerna run build --include-dependencies --scope=\"@backstage/core\" --scope=\"@backstage/theme\"\n\nWORKDIR /app/packages/storybook\nRUN yarn build-storybook -c .storybook",
  "dockerfile_source": "Repository at Dockerfile",
  "dockerfile_attempt_1": 1,
  "dockerfile_build_success": true,
  "llm_calls_total": 25
}