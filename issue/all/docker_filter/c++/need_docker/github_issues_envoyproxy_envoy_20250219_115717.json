[
  {
    "number": 37478,
    "title": "Fine-tuning of happy eyeballs dns resolution",
    "created_at": "2024-12-03T09:22:31Z",
    "closed_at": "2024-12-18T14:33:53Z",
    "labels": [
      "question",
      "area/load balancing",
      "area/dns"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/37478",
    "body": "*Title*: *Fine-tuning of happy eyeballs dns resolution*\r\n\r\n*Description*:\r\n\r\nWith that configuration and clusterType \"LOGICAL_DNS\"\r\n\r\n```\r\n        caresDnsResolverConfig, err := anypb.New(&cares.CaresDnsResolverConfig{\r\n\t\tDnsResolverOptions: &configCoreV3.DnsResolverOptions{\r\n\t\t\tUseTcpForDnsLookups: true,\r\n\t\t},\r\n\t})\r\n\tif err != nil {\r\n\t\tlog.Println(\"error converting to Any: %v\\n\", err)\r\n\t}\r\n\tdnsResolverConfig := &configCoreV3.TypedExtensionConfig{\r\n\t\tName:        \"envoy.network.dns_resolver.cares\",\r\n\t\tTypedConfig: caresDnsResolverConfig,\r\n\t}\r\n\r\n\treturn &clusterV3.Cluster{\r\n\t\tName:                   clusterName,\r\n\t\tConnectTimeout:         durationpb.New(time.Duration(connectTimeout) * time.Second),\r\n\t\tClusterDiscoveryType:   &clusterV3.Cluster_Type{Type: clusterType},\r\n\t\tLoadAssignment:         BuildEndpoint(clusterName, host, port),\r\n\t\tDnsLookupFamily:        clusterV3.Cluster_ALL,\r\n\t\tCircuitBreakers:        circuitBreakers,\r\n\t\tTypedDnsResolverConfig: dnsResolverConfig,\r\n\t}\r\n}\r\n```\r\n\r\nWe are having issues to access a system that has both valid IPv6 and IPv4 addresses like www.google.com. We are trying to access it from a proxy that relies on Envoy and when source IP is V4 we are getting \r\n`upstream connect error or disconnect/reset before headers. reset reason: remote connection failure, transport failure reason: immediate connect error: Network is unreachable|remote address:[2404:6800:4004:818::2004]:443`\r\nand it it did not pick the IPv4 address. We have tried adding \"UseTcpForDnsLookups\" with no success. Could you help on that, how can we fine-tune happy eyeballs to pick IPv4 when source is IPv4 and to pick IPv6 when source is IPv6 in order to work for such dual-stack target systems? \r\n\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/37478/comments",
    "author": "VladislavAtanasov95",
    "comments": [
      {
        "user": "ggreenway",
        "created_at": "2024-12-03T17:15:06Z",
        "body": "cc @RyanTheOptimist"
      },
      {
        "user": "RyanTheOptimist",
        "created_at": "2024-12-05T02:43:01Z",
        "body": "Hm. I'm surprised. I would have expected that with `DnsLookupFamily` set to `ALL` that DNS would have returned both IPv4 and IPv6 addresses. Then the Happy Eyeballs code would make connection attempts for each address in the list until the a connection succeeded. Is that not what you're seeing? Do you have a log? "
      },
      {
        "user": "VladislavAtanasov95",
        "created_at": "2024-12-05T13:16:53Z",
        "body": "We sometimes receive\r\n\r\n< HTTP/1.1 503 Service Unavailable\r\n< content-length: 231\r\n< content-type: text/plain\r\n< date: Thu, 21 Nov 2024 13:43:13 GMT\r\n< upstream connect error or disconnect/reset before headers. reset reason: remote connection failure, transport failure reason: immediate connect error: Network is unreachable|remote address:[2404:6800:4004:818::2004]:443\r\n\r\nWhen the client service only has IPv4 and we are trying to reach google.com through our envoy-based proxy, sometimes it picks ipv6, sometime ipv4 of the target url.\n\n---\n\nThe Cluster type is actually \"STRICT_DNS\", not \"LOGICAL_DNS\"(my mistake) when we sporadically receive the error. I ran an example with static envoy locally \r\n```\r\nstatic_resources:\r\n  listeners:\r\n  - address:\r\n      socket_address:\r\n        address: 0.0.0.0\r\n        port_value: 2000\r\n    filter_chains:\r\n    - filters:\r\n      - name: envoy.http_connection_manager \r\n        typed_config:\r\n          \"@type\": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\r\n          codec_type: auto\r\n          stat_prefix: http\r\n          route_config:\r\n            name: search_route\r\n            virtual_hosts:\r\n            - name: backend\r\n              domains:\r\n              - \"*\"\r\n              routes:\r\n              - match:\r\n                  prefix: \"/abv\"\r\n                route:\r\n                  cluster: abv\r\n                  host_rewrite_literal: www.abv.bg\r\n              - match:\r\n                  prefix: \"/\"\r\n                route:\r\n                  cluster: google\r\n                  host_rewrite_literal: www.google.com\r\n          http_filters:\r\n          - name: envoy.filters.http.router\r\n            typed_config:\r\n              \"@type\": type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\r\n  clusters:\r\n  - name: google\r\n    connect_timeout: 10s\r\n    type: strict_dns\r\n    dns_lookup_family: ALL\r\n    load_assignment:\r\n      cluster_name: google\r\n      endpoints:\r\n      - lb_endpoints:\r\n        - endpoint:\r\n            address:\r\n              socket_address:\r\n                address: www.google.com\r\n                port_value: 443\r\n    transport_socket:\r\n      name: envoy.transport_sockets.tls\r\n      typed_config:\r\n        \"@type\": type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext\r\n        sni: www.google.com\r\n  - name: abv\r\n    connect_timeout: 10s\r\n    type: logical_dns\r\n    dns_lookup_family: V4_ONLY\r\n    lb_policy: round_robin\r\n    load_assignment:\r\n      cluster_name: google\r\n      endpoints:\r\n      - lb_endpoints:\r\n        - endpoint:\r\n            address:\r\n              socket_address:\r\n                address: www.abv.bg\r\n                port_value: 443\r\n    transport_socket:\r\n      name: envoy.transport_sockets.tls\r\n      typed_config:\r\n        \"@type\": type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext\r\n        sni: www.abv.bg\r\nadmin:\r\n  access_log_path: \"/dev/stdout\"\r\n  address:\r\n    socket_address:\r\n      address: 0.0.0.0\r\n      port_value: 15000\r\n```\r\n\r\nWhen I change it from STRICT_DNS to LOGICAL_DNS, requests to google are working stable every time, but when it is STRICT_DNS sometimes I receive \r\n`upstream connect error or disconnect/reset before headers. reset reason: remote connection failure, transport failure reason: delayed connect error: 61`\r\n Does that make sense?\r\n"
      },
      {
        "user": "akhilsingh-git",
        "created_at": "2024-12-18T14:08:19Z",
        "body": "When Envoy is configured with dns_lookup_family: ALL and receives both IPv4 and IPv6 addresses for a host, it uses a \u201chappy eyeballs\u201d approach to try establishing a connection. This approach attempts to connect to IPv6 first, and if that doesn\u2019t succeed within a certain timeframe, it will try IPv4. However, depending on network conditions, default settings might lead to occasional failures if IPv6 is not truly reachable or if there\u2019s an immediate IPv6 route issue.\r\n\r\nKey Points to Consider:\r\n\t1.\tHappy Eyeballs Mechanism:\r\nBy default, Envoy implements a Happy Eyeballs algorithm (RFC 6555-like behavior) when dns_lookup_family: ALL is set. Envoy will attempt a connection to an IPv6 address first and then, after a delay (happy_eyeballs_connection_delay), attempt IPv4 if IPv6 hasn\u2019t connected. If IPv6 is immediately unreachable, you might see intermittent failures before Envoy attempts IPv4.\r\n\t2.\tStrict DNS vs. Logical DNS:\r\n\t\u2022\tSTRICT_DNS: Envoy continuously re-resolves DNS at runtime and uses all returned IPs (both v4 and v6) as load-balancing endpoints. This can lead to Envoy attempting IPv6 endpoints that aren\u2019t actually reachable, causing occasional errors.\r\n\t\u2022\tLOGICAL_DNS: Envoy resolves DNS once at startup and treats the resulting IP addresses as a logical group, typically sticking to a single address family more consistently. This often appears more stable for dual-stack hosts because Envoy is less aggressive in rotating through all endpoints, but it may not provide the same dynamic behavior as STRICT_DNS.\r\n\t3.\tFine-Tuning Happy Eyeballs Behavior:\r\nEnvoy\u2019s cluster configuration allows you to adjust the Happy Eyeballs timing. By default, the IPv4 connection attempt is delayed by a certain amount of time if IPv6 is available. If IPv6 repeatedly fails immediately, reducing this delay can help Envoy fall back to IPv4 faster, preventing those intermittent \u201cnetwork unreachable\u201d errors.\r\nIn the cluster configuration for your STRICT_DNS cluster, try setting:\r\n\r\nhappy_eyeballs_connection_delay: 50ms\r\n\r\nor another suitably small value. The default is 300ms, so lowering it can speed up IPv4 fallback.\r\nExample:\r\n\r\nclusters:\r\n- name: google\r\n  connect_timeout: 10s\r\n  type: STRICT_DNS\r\n  dns_lookup_family: ALL\r\n  happy_eyeballs_connection_delay: 50ms\r\n  load_assignment:\r\n    cluster_name: google\r\n    endpoints:\r\n      - lb_endpoints:\r\n          - endpoint:\r\n              address:\r\n                socket_address:\r\n                  address: www.google.com\r\n                  port_value: 443\r\n  transport_socket:\r\n    name: envoy.transport_sockets.tls\r\n    typed_config:\r\n      \"@type\": type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext\r\n      sni: www.google.com\r\n\r\nWith this change, if IPv6 is unreachable, Envoy should fall back to IPv4 more quickly, reducing the frequency of those \u201cnetwork unreachable\u201d errors.\r\n\r\n\t4.\tIf You Don\u2019t Need IPv6:\r\nIf IPv6 connectivity is not required or not guaranteed from your environment, consider simplifying by using:\r\n\r\ndns_lookup_family: V4_ONLY\r\n\r\nThis will ensure Envoy only attempts IPv4 addresses, eliminating IPv6-related connect errors altogether.\r\n\r\n\t5.\tEnvironment Considerations:\r\nIf your source network is IPv4-only, and the destination returns both IPv6 and IPv4 addresses, Envoy will try IPv6 first (due to Happy Eyeballs). Ensuring proper IPv6 routing, or just disabling it if not needed, is often the simplest solution. If dual-stack support is truly required, fine-tuning happy_eyeballs_connection_delay is your best bet.\r\n\r\nSummary:\r\n\t\u2022\tUse dns_lookup_family: ALL for dual-stack, but tune happy_eyeballs_connection_delay to shorten the fallback time to IPv4.\r\n\t\u2022\tConsider switching from STRICT_DNS to LOGICAL_DNS if that yields more stable behavior in your environment.\r\n\t\u2022\tIf IPv6 isn\u2019t actually needed, use V4_ONLY to avoid complexity.\r\n\t\u2022\tAdjusting the cluster configuration, particularly happy_eyeballs_connection_delay, should help Envoy more reliably fall back to IPv4 when IPv6 fails, reducing the intermittent \u201cnetwork unreachable\u201d errors."
      },
      {
        "user": "VladislavAtanasov95",
        "created_at": "2024-12-18T14:33:53Z",
        "body": "Thank you for the detailed explanation, appreciate it, closing"
      }
    ],
    "satisfaction_conditions": [
      "Explanation of how Envoy's Happy Eyeballs implementation prioritizes IPv4/IPv6 addresses based on source IP capabilities",
      "Configuration guidance for adjusting connection attempt timing between address families",
      "Clarification of STRICT_DNS vs LOGICAL_DNS behavior in dual-stack environments",
      "Recommendations for handling immediate network unreachable errors during connection attempts",
      "Guidance on when to use V4_ONLY vs ALL DNS lookup families"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:24:16"
    }
  },
  {
    "number": 26885,
    "title": "invalid value Invalid type URL, unknown type",
    "created_at": "2023-04-24T03:52:37Z",
    "closed_at": "2023-04-25T00:54:17Z",
    "labels": [
      "question",
      "area/golang"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/26885",
    "body": "*Title*: *Configuration file running error*\r\n\r\n*Description*:\r\nI plan to use Golang to develop an HTTP filter plugin for Envoy, but after building it locally, there was an error running the golang example in Repo\r\n\r\nCompilation and operation process\r\n>\r\n>- Building the environment\r\n>   - Apple M1\r\n>   - macos 13.3.1 (22E261)\r\n>   - envoy (v1.26.0)\r\n>\r\n>- Build Command\r\n>\r\n>   ```sh\r\n>    bazel build -c dbg --spawn_strategy=local //source/exe:envoy-static \r\n>    ```\r\n>\r\n>   ```sh\r\n>    go build -o simple.so -buildmode=c-shared .\r\n>    ```\r\n>\r\n>- Execute Command\r\n>\r\n>   ```sh\r\n>    ../../bazel-bin/source/exe/envoy-static -c ./envoy.yaml\r\n>    ```\r\n>\r\nError message output by the terminal\r\n>\r\n>- Command execution error\r\n>\r\n>  ```shell\r\n>  [2023-04-24 11:42:08.658][161426][info][main] [source/server/server.cc:408]   envoy.transport_sockets.downstream: envoy.transport_sockets.alts, envoy.transport_sockets.quic, envoy.transport_sockets.raw_buffer, envoy.transport_sockets.starttls, envoy.transport_sockets.tap, envoy.transport_sockets.tcp_stats, envoy.transport_sockets.tls, raw_buffer, starttls, tls\r\n>  [2023-04-24 11:42:08.658][161426][info][main] [source/server/server.cc:408]   envoy.path.rewrite: envoy.path.rewrite.uri_template.uri_template_rewriter\r\n>  [2023-04-24 11:42:08.658][161426][info][main] [source/server/server.cc:408]   envoy.matching.network.input: envoy.matching.inputs.application_protocol, envoy.matching.inputs.destination_ip, envoy.matching.inputs.destination_port, envoy.matching.inputs.direct_source_ip, envoy.matching.inputs.dns_san, envoy.matching.inputs.filter_state, envoy.matching.inputs.server_name, envoy.matching.inputs.source_ip, envoy.matching.inputs.source_port, envoy.matching.inputs.source_type, envoy.matching.inputs.subject, envoy.matching.inputs.transport_protocol, envoy.matching.inputs.uri_san\r\n>  [2023-04-24 11:42:08.682][161426][critical][main] [source/server/server.cc:131] error initializing configuration './envoy.yaml': Unable to parse JSON as proto (INVALID_ARGUMENT:(http_filters[0].typed_config): invalid value Invalid type URL, unknown type: envoy.extensions.filters.http.golang.v3alpha.Config for type Any): {\"static_resources\":{\"clusters\":[{\"type\":\"STRICT_DNS\",\"name\":\"helloworld_service_cluster\",\"load_assignment\":{\"cluster_name\":\"helloworld_service_cluster\",\"endpoints\":[{\"lb_endpoints\":[{\"endpoint\":{\"address\":{\"socket_address\":{\"port_value\":8080,\"address\":\"helloworld_service\"}}}}]}]},\"lb_policy\":\"ROUND_ROBIN\"}],\"listeners\":[{\"filter_chains\":[{\"filters\":[{\"name\":\"envoy.filters.network.http_connection_manager\",\"typed_config\":{\"http_filters\":[{\"name\":\"envoy.filters.http.golang\",\"typed_config\":{\"@type\":\"type.googleapis.com/envoy.extensions.filters.http.golang.v3alpha.Config\",\"library_id\":\"simple\",\"library_path\":\"/Users/mu/Downloads/attains/be/envoy/examples/golang/simple/simple.so\",\"plugin_name\":\"simple\",\"plugin_config\":{\"value\":{\"prefix_localreply_body\":\"Configured local reply from go\"},\"@type\":\"type.googleapis.com/xds.type.v3.TypedStruct\"}}},{\"name\":\"envoy.filters.http.router\",\"typed_config\":{\"@type\":\"type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\"}}],\"@type\":\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\",\"route_config\":{\"virtual_hosts\":[{\"routes\":[{\"match\":{\"prefix\":\"/\"},\"route\":{\"cluster\":\"helloworld_service_cluster\"}}],\"domains\":[\"*\"],\"name\":\"local_service\"}],\"name\":\"local_route\"},\"stat_prefix\":\"ingress_http\"}}]}],\"address\":{\"socket_address\":{\"port_value\":10000,\"address\":\"0.0.0.0\"}},\"name\":\"listener_0\"}]}}\r\n>  [2023-04-24 11:42:08.684][161426][info][main] [source/server/server.cc:980] exiting\r\n>  Unable to parse JSON as proto (INVALID_ARGUMENT:(http_filters[0].typed_config): invalid value Invalid type URL, unknown type: envoy.extensions.filters.http.golang.v3alpha.Config for type Any): {\"static_resources\":{\"clusters\":[{\"type\":\"STRICT_DNS\",\"name\":\"helloworld_service_cluster\",\"load_assignment\":{\"cluster_name\":\"helloworld_service_cluster\",\"endpoints\":[{\"lb_endpoints\":[{\"endpoint\":{\"address\":{\"socket_address\":{\"port_value\":8080,\"address\":\"helloworld_service\"}}}}]}]},\"lb_policy\":\"ROUND_ROBIN\"}],\"listeners\":[{\"filter_chains\":[{\"filters\":[{\"name\":\"envoy.filters.network.http_connection_manager\",\"typed_config\":{\"http_filters\":[{\"name\":\"envoy.filters.http.golang\",\"typed_config\":{\"@type\":\"type.googleapis.com/envoy.extensions.filters.http.golang.v3alpha.Config\",\"library_id\":\"simple\",\"library_path\":\"/Users/mu/Downloads/attains/be/envoy/examples/golang/simple/simple.so\",\"plugin_name\":\"simple\",\"plugin_config\":{\"value\":{\"prefix_localreply_body\":\"Configured local reply from go\"},\"@type\":\"type.googleapis.com/xds.type.v3.TypedStruct\"}}},{\"name\":\"envoy.filters.http.router\",\"typed_config\":{\"@type\":\"type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\"}}],\"@type\":\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\",\"route_config\":{\"virtual_hosts\":[{\"routes\":[{\"match\":{\"prefix\":\"/\"},\"route\":{\"cluster\":\"helloworld_service_cluster\"}}],\"domains\":[\"*\"],\"name\":\"local_service\"}],\"name\":\"local_route\"},\"stat_prefix\":\"ingress_http\"}}]}],\"address\":{\"socket_address\":{\"port_value\":10000,\"address\":\"0.0.0.0\"}},\"name\":\"listener_0\"}]}}\r\n>  ```\r\n>\r\n>- Error in verifying configuration command\r\n>\r\n>  ```shell\r\n>  \u279c  golang git:(v1.26.0) \u2717 ../../bazel-bin/source/exe/envoy-static --mode validate -c ./envoy.yaml\r\n>  [2023-04-24 11:42:37.440][161852][critical][main] [source/server/config_validation/server.cc:66] error initializing configuration './envoy.yaml': Unable to parse JSON as proto (INVALID_ARGUMENT:(http_filters[0].typed_config): invalid value Invalid type URL, unknown type: envoy.extensions.filters.http.golang.v3alpha.Config for type Any): {\"static_resources\":{\"clusters\":[{\"load_assignment\":{\"cluster_name\":\"helloworld_service_cluster\",\"endpoints\":[{\"lb_endpoints\":[{\"endpoint\":{\"address\":{\"socket_address\":{\"port_value\":8080,\"address\":\"helloworld_service\"}}}}]}]},\"lb_policy\":\"ROUND_ROBIN\",\"name\":\"helloworld_service_cluster\",\"type\":\"STRICT_DNS\"}],\"listeners\":[{\"filter_chains\":[{\"filters\":[{\"name\":\"envoy.filters.network.http_connection_manager\",\"typed_config\":{\"@type\":\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\",\"stat_prefix\":\"ingress_http\",\"http_filters\":[{\"typed_config\":{\"library_id\":\"simple\",\"plugin_config\":{\"value\":{\"prefix_localreply_body\":\"Configured local reply from go\"},\"@type\":\"type.googleapis.com/xds.type.v3.TypedStruct\"},\"library_path\":\"/Users/mu/Downloads/attains/be/envoy/examples/golang/simple/simple.so\",\"@type\":\"type.googleapis.com/envoy.extensions.filters.http.golang.v3alpha.Config\",\"plugin_name\":\"simple\"},\"name\":\"envoy.filters.http.golang\"},{\"typed_config\":{\"@type\":\"type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\"},\"name\":\"envoy.filters.http.router\"}],\"route_config\":{\"name\":\"local_route\",\"virtual_hosts\":[{\"domains\":[\"*\"],\"name\":\"local_service\",\"routes\":[{\"match\":{\"prefix\":\"/\"},\"route\":{\"cluster\":\"helloworld_service_cluster\"}}]}]}}}]}],\"address\":{\"socket_address\":{\"address\":\"0.0.0.0\",\"port_value\":10000}},\"name\":\"listener_0\"}]}}\r\n>  ```\r\n>\r\nconfiguration file\r\n>\r\n>```yaml\r\n># envoy demo with golang extension enabled\r\n>static_resources:\r\n>  listeners:\r\n>  - name: listener_0\r\n>    address:\r\n>      socket_address:\r\n>        address: 0.0.0.0\r\n>        port_value: 10000\r\n>    filter_chains:\r\n>    - filters:\r\n>      - name: envoy.filters.network.http_connection_manager\r\n>        typed_config:\r\n>          \"@type\": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\r\n>          stat_prefix: ingress_http\r\n>          http_filters:\r\n>          - name: envoy.filters.http.golang\r\n>            typed_config:\r\n>              \"@type\": type.googleapis.com/envoy.extensions.filters.http.golang.v3alpha.Config\r\n>              library_id: simple\r\n>              library_path: \"/Users/mu/Downloads/attains/be/envoy/examples/golang/simple/simple.so\"\r\n>              plugin_name: simple\r\n>              plugin_config:\r\n>                \"@type\": type.googleapis.com/xds.type.v3.TypedStruct\r\n>                value:\r\n>                  prefix_localreply_body: \"Configured local reply from go\"\r\n>          - name: envoy.filters.http.router\r\n>            typed_config:\r\n>              \"@type\": type.googleapis.com/envoy.extensions.filters.http.router.v3.Router\r\n>          route_config:\r\n>            name: local_route\r\n>            virtual_hosts:\r\n>            - name: local_service\r\n>              domains: [\"*\"]\r\n>              routes:\r\n>              - match:\r\n>                  prefix: \"/\"\r\n>                route:\r\n>                  cluster: helloworld_service_cluster\r\n>  clusters:\r\n>  - name: helloworld_service_cluster\r\n>    type: STRICT_DNS\r\n>    lb_policy: ROUND_ROBIN\r\n>    load_assignment:\r\n>      cluster_name: helloworld_service_cluster\r\n>      endpoints:\r\n>      - lb_endpoints:\r\n>        - endpoint:\r\n>            address:\r\n>              socket_address:\r\n>                address: helloworld_service\r\n>                port_value: 8080\r\n>```\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/26885/comments",
    "author": "lyonmu",
    "comments": [
      {
        "user": "wbpcode",
        "created_at": "2023-04-24T07:00:32Z",
        "body": "golang filter is only provided by the binary with contrib extensions. You may need to build envoy binary with target `//contrib/exe:envoy-static` ."
      },
      {
        "user": "lyonmu",
        "created_at": "2023-04-24T07:49:59Z",
        "body": "Hi @wbpcode \r\nI attempted to use the following command for the build operation, but a new error occurred.\r\n>\r\n>\r\n>```shell\r\n>\u279c  envoy git:(v1.26.0) \u2717 bazel build -c dbg --spawn_strategy=local //contrib/exe:envoy-static                                                     \r\n>ERROR: Target //contrib/exe:envoy-static is incompatible and cannot be built, but was explicitly requested.\r\n>Dependency chain:\r\n>    //contrib/exe:envoy-static (e0803d)\r\n>    //contrib/vcl/source:config_envoy_extension (e0803d)\r\n>    //contrib/vcl/source:config (e0803d)\r\n>    //contrib/vcl/source:vcl_interface_lib (e0803d)\r\n>    //contrib/vcl/source:vpp_vcl (e0803d)\r\n>    //contrib/vcl/source:external/libsvm.a (e0803d)\r\n>    //contrib/vcl/source:build (e0803d)   <-- target platform (@envoy//bazel:macos_arm64) didn't satisfy constraint @platforms//os:linux\r\n>INFO: Elapsed time: 0.128s\r\n>INFO: 0 processes.\r\n>FAILED: Build did NOT complete successfully (0 packages loaded, 0 targets configured)\r\n>```"
      },
      {
        "user": "wbpcode",
        "created_at": "2023-04-24T08:27:46Z",
        "body": "Lots of contrib extensions have constraints to the os/platform. You may need comment these extenstions in the `contrib_build_config.bzl`."
      },
      {
        "user": "lyonmu",
        "created_at": "2023-04-24T09:18:24Z",
        "body": "Thank you, I have successfully built the envoy locally."
      }
    ],
    "satisfaction_conditions": [
      "Solution must enable building Envoy with Golang HTTP filter extension support on macOS ARM architecture",
      "Build configuration must exclude Linux-only contrib extensions when targeting macOS",
      "Final Envoy binary must recognize envoy.extensions.filters.http.golang.v3alpha.Config type",
      "Solution must maintain functionality to load Golang filter plugins via .so files"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:25:10"
    }
  },
  {
    "number": 23487,
    "title": "Question about release: 1.22.3 2aca584: envoy/VERSION.txt => 1.22.3-dev",
    "created_at": "2022-10-13T19:53:54Z",
    "closed_at": "2022-10-14T12:22:56Z",
    "labels": [
      "question",
      "area/release"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/23487",
    "body": "We use git submodule like this: git submodule status\r\n2aca584b3bca81622d3b009612f0c7be93eeea34 envoy (v1.22.3)\r\n\r\nBut envoy/VERSION.txt contains:\r\n1.22.3-dev\r\n\r\nThus, the RELEASE full string looks like this:\r\n\"version\": \"b87295fae172bc56584b65fdb05a05c31acd2ffa/1.22.3-dev/Clean/RELEASE/BoringSSL\",\r\n\r\n\"xxx-dev\" can be an issue for us if running in the PRODUCTION even though it's official release.  Anyway to overwrite this version txt?\r\n\r\nWe do have c++ filters internal to us, requests us to a full envoy build.",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/23487/comments",
    "author": "newwuhan5",
    "comments": [
      {
        "user": "phlax",
        "created_at": "2022-10-14T08:49:42Z",
        "body": "this was a mistake - release 1.22.5 should have the correct versioning"
      },
      {
        "user": "newwuhan5",
        "created_at": "2022-10-14T12:23:39Z",
        "body": "We will upgrade to use release 1.22.25 then.  Thank you @phlax  for your quick response!"
      }
    ],
    "satisfaction_conditions": [
      "Provides a method to obtain an official Envoy release without '-dev' suffix in the version string",
      "Confirms availability of production-ready builds with stable version identifiers",
      "Identifies supported upgrade path for version consistency"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:25:32"
    }
  },
  {
    "number": 20607,
    "title": "generate compile_commands.json fail",
    "created_at": "2022-03-31T06:02:12Z",
    "closed_at": "2022-03-31T11:29:13Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/20607",
    "body": "[Wed Mar 30 22:59:31][#120# ] (main)$./tools/gen_compilation_database.py \r\nERROR: /mnt/cache/_bazel_stack/5a617312af51e0dbefb3398d3212136c/external/base_pip3_sphinx/BUILD.bazel:22:11: no such package '@base_pip3_importlib_metadata//': The repository '@base_pip3_importlib_metadata' could not be resolved: Repository '@base_pip3_importlib_metadata' is not defined and referenced by '@base_pip3_sphinx//:pkg'\r\nERROR: Analysis of target '//tools/docs:sphinx_runner' failed; build aborted: \r\nINFO: Elapsed time: 1.008s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (3 packages loaded, 0 targets configured)\r\n    Fetching @emscripten_bin_linux; fetching\r\n    Fetching @base_pip3_pyparsing; fetching\r\n    Fetching @base_pip3_yarl; fetching\r\n    Fetching @base_pip3_python_gnupg; fetching\r\n    Fetching @base_pip3_multidict; fetching\r\n    Fetching @rust_linux_x86_64; fetching\r\n    Fetching @base_pip3_idna; fetching\r\n    Fetching @base_pip3_cffi; fetching\r\nTraceback (most recent call last):\r\n  File \"./tools/gen_compilation_database.py\", line 124, in <module>\r\n    fix_compilation_database(args, generate_compilation_database(args))\r\n  File \"./tools/gen_compilation_database.py\", line 20, in generate_compilation_database\r\n    subprocess.check_call([\"bazel\", \"build\"] + bazel_options + [\r\n  File \"/usr/lib/python3.8/subprocess.py\", line 364, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['bazel', 'build', '--config=compdb', '--remote_download_outputs=all', '--aspects=@bazel_compdb//:aspects.bzl%compilation_database_aspect', '--output_groups=compdb_files,header_files', '//source/...', '//test/...', '//tools/...', '//contrib/...']' returned non-zero exit status 1.\r\n\r\n\r\n[Wed Mar 30 22:59:46][#121# ] (main)$pip3 install importlib_metadata\r\nDefaulting to user installation because normal site-packages is not writeable\r\nRequirement already satisfied: importlib_metadata in /usr/local/lib/python3.8/dist-packages (4.10.1)\r\nRequirement already satisfied: zipp>=0.5 in /usr/lib/python3/dist-packages (from importlib_metadata) (1.0.0)\r\n\r\nBut I have already installed the pkg.",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/20607/comments",
    "author": "zhangbo1882",
    "comments": [
      {
        "user": "zhxie",
        "created_at": "2022-03-31T06:10:10Z",
        "body": "You may require Python 3.10 to refresh compilation database."
      },
      {
        "user": "wbpcode",
        "created_at": "2022-03-31T08:06:23Z",
        "body": "cc @phlax "
      },
      {
        "user": "phlax",
        "created_at": "2022-03-31T09:10:16Z",
        "body": "> You may require Python 3.10 to refresh compilation database.\r\n\r\nyes, this is the issue - python3.10 _doesnt_ require `importlib-metadata` (and its deps) so it is not listed/pinned in the requirements file"
      },
      {
        "user": "zhangbo1882",
        "created_at": "2022-03-31T11:29:05Z",
        "body": "Thanks @zhxie.  It works now after I upgrade the python to 3.10. "
      }
    ],
    "satisfaction_conditions": [
      "Resolve Python version incompatibility causing missing dependencies",
      "Ensure environment meets Python version requirements for compilation database generation",
      "Address missing package errors caused by underlying environment configuration issues"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:26:43"
    }
  },
  {
    "number": 12665,
    "title": "Timeout sometimes gives 408 instead of 504",
    "created_at": "2020-08-15T06:56:18Z",
    "closed_at": "2020-09-01T08:15:51Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/12665",
    "body": "Description:\r\n\r\n> While testing timeout in envoy v1.12.2 most of the request gives 504 which is as expected, but once in a while it throws 408 status code which is unexpected.\r\n\r\nRepro steps:\r\n\r\n> In the testing environment 15s delay was tried for a timeout with below routing config.\r\n```\r\n\"route\": {\r\n           \"cluster\": \"test\",\r\n           \"timeout\": \"15s\",\r\n           \"idle_timeout\": \"315s\"\r\n          }\r\n```\r\nAdmin and Stats Output:\r\n\r\n<details>\r\n<summary>Stats</summary>\r\ncluster.testt1.assignment_stale: 0\r\ncluster.testt1.assignment_timeout_received: 0\r\ncluster.testt1.bind_errors: 0\r\ncluster.testt1.circuit_breakers.default.cx_open: 0\r\ncluster.testt1.circuit_breakers.default.cx_pool_open: 0\r\ncluster.testt1.circuit_breakers.default.rq_open: 0\r\ncluster.testt1.circuit_breakers.default.rq_pending_open: 0\r\ncluster.testt1.circuit_breakers.default.rq_retry_open: 0\r\ncluster.testt1.circuit_breakers.high.cx_open: 0\r\ncluster.testt1.circuit_breakers.high.cx_pool_open: 0\r\ncluster.testt1.circuit_breakers.high.rq_open: 0\r\ncluster.testt1.circuit_breakers.high.rq_pending_open: 0\r\ncluster.testt1.circuit_breakers.high.rq_retry_open: 0\r\ncluster.testt1.client_ssl_socket_factory.downstream_context_secrets_not_ready: 0\r\ncluster.testt1.client_ssl_socket_factory.ssl_context_update_by_sds: 0\r\ncluster.testt1.client_ssl_socket_factory.upstream_context_secrets_not_ready: 0\r\ncluster.testt1.default.total_match_count: 240\r\ncluster.testt1.external.upstream_rq_200: 4\r\ncluster.testt1.external.upstream_rq_2xx: 4\r\ncluster.testt1.external.upstream_rq_408: 3\r\ncluster.testt1.external.upstream_rq_4xx: 3\r\ncluster.testt1.external.upstream_rq_504: 236\r\ncluster.testt1.external.upstream_rq_5xx: 236\r\ncluster.testt1.external.upstream_rq_completed: 243\r\ncluster.testt1.http1.metadata_not_supported_error: 0\r\ncluster.testt1.lb_healthy_panic: 0\r\ncluster.testt1.lb_local_cluster_not_ok: 0\r\ncluster.testt1.lb_recalculate_zone_structures: 0\r\ncluster.testt1.lb_subsets_active: 0\r\ncluster.testt1.lb_subsets_created: 0\r\ncluster.testt1.lb_subsets_fallback: 0\r\ncluster.testt1.lb_subsets_fallback_panic: 0\r\ncluster.testt1.lb_subsets_removed: 0\r\ncluster.testt1.lb_subsets_selected: 0\r\ncluster.testt1.lb_zone_cluster_too_small: 0\r\ncluster.testt1.lb_zone_no_capacity_left: 0\r\ncluster.testt1.lb_zone_number_differs: 0\r\ncluster.testt1.lb_zone_routing_all_directly: 0\r\ncluster.testt1.lb_zone_routing_cross_zone: 0\r\ncluster.testt1.lb_zone_routing_sampled: 0\r\ncluster.testt1.max_host_weight: 1\r\ncluster.testt1.membership_change: 1\r\ncluster.testt1.membership_degraded: 0\r\ncluster.testt1.membership_excluded: 0\r\ncluster.testt1.membership_healthy: 1\r\ncluster.testt1.membership_total: 1\r\ncluster.testt1.original_dst_host_invalid: 0\r\ncluster.testt1.retry_or_shadow_abandoned: 0\r\ncluster.testt1.ssl.ciphers.ECDHE-RSA-AES128-GCM-SHA256: 222\r\ncluster.testt1.ssl.connection_error: 0\r\ncluster.testt1.ssl.curves.X25519: 222\r\ncluster.testt1.ssl.fail_verify_cert_hash: 0\r\ncluster.testt1.ssl.fail_verify_error: 0\r\ncluster.testt1.ssl.fail_verify_no_cert: 0\r\ncluster.testt1.ssl.fail_verify_san: 0\r\ncluster.testt1.ssl.handshake: 222\r\ncluster.testt1.ssl.no_certificate: 0\r\ncluster.testt1.ssl.session_reused: 221\r\ncluster.testt1.ssl.sigalgs.unknown_ssl_algorithm: 222\r\ncluster.testt1.ssl.versions.TLSv1.2: 222\r\ncluster.testt1.update_attempt: 240\r\ncluster.testt1.update_empty: 0\r\ncluster.testt1.update_failure: 0\r\ncluster.testt1.update_no_rebuild: 239\r\ncluster.testt1.update_success: 240\r\ncluster.testt1.upstream_cx_active: 1\r\ncluster.testt1.upstream_cx_close_notify: 0\r\ncluster.testt1.upstream_cx_connect_attempts_exceeded: 0\r\ncluster.testt1.upstream_cx_connect_fail: 0\r\ncluster.testt1.upstream_cx_connect_timeout: 0\r\ncluster.testt1.upstream_cx_destroy: 221\r\ncluster.testt1.upstream_cx_destroy_local: 221\r\ncluster.testt1.upstream_cx_destroy_local_with_active_rq: 221\r\ncluster.testt1.upstream_cx_destroy_remote: 0\r\ncluster.testt1.upstream_cx_destroy_remote_with_active_rq: 0\r\ncluster.testt1.upstream_cx_destroy_with_active_rq: 221\r\ncluster.testt1.upstream_cx_http1_total: 222\r\ncluster.testt1.upstream_cx_http2_total: 0\r\ncluster.testt1.upstream_cx_idle_timeout: 0\r\ncluster.testt1.upstream_cx_max_requests: 0\r\ncluster.testt1.upstream_cx_none_healthy: 0\r\ncluster.testt1.upstream_cx_overflow: 0\r\ncluster.testt1.upstream_cx_pool_overflow: 0\r\ncluster.testt1.upstream_cx_protocol_error: 0\r\ncluster.testt1.upstream_cx_rx_bytes_buffered: 154\r\ncluster.testt1.upstream_cx_rx_bytes_total: 7516\r\ncluster.testt1.upstream_cx_total: 222\r\ncluster.testt1.upstream_cx_tx_bytes_buffered: 0\r\ncluster.testt1.upstream_cx_tx_bytes_total: 108854\r\ncluster.testt1.upstream_flow_control_backed_up_total: 0\r\ncluster.testt1.upstream_flow_control_drained_total: 0\r\ncluster.testt1.upstream_flow_control_paused_reading_total: 0\r\ncluster.testt1.upstream_flow_control_resumed_reading_total: 0\r\ncluster.testt1.upstream_internal_redirect_failed_total: 0\r\ncluster.testt1.upstream_internal_redirect_succeeded_total: 0\r\ncluster.testt1.upstream_rq_200: 4\r\ncluster.testt1.upstream_rq_2xx: 4\r\ncluster.testt1.upstream_rq_408: 3\r\ncluster.testt1.upstream_rq_4xx: 3\r\ncluster.testt1.upstream_rq_504: 236\r\ncluster.testt1.upstream_rq_5xx: 236\r\ncluster.testt1.upstream_rq_active: 0\r\ncluster.testt1.upstream_rq_cancelled: 0\r\ncluster.testt1.upstream_rq_completed: 243\r\ncluster.testt1.upstream_rq_maintenance_mode: 0\r\ncluster.testt1.upstream_rq_pending_active: 0\r\ncluster.testt1.upstream_rq_pending_failure_eject: 0\r\ncluster.testt1.upstream_rq_pending_overflow: 0\r\ncluster.testt1.upstream_rq_pending_total: 222\r\ncluster.testt1.upstream_rq_per_try_timeout: 0\r\ncluster.testt1.upstream_rq_retry: 0\r\ncluster.testt1.upstream_rq_retry_overflow: 0\r\ncluster.testt1.upstream_rq_retry_success: 0\r\ncluster.testt1.upstream_rq_rx_reset: 0\r\ncluster.testt1.upstream_rq_timeout: 221\r\ncluster.testt1.upstream_rq_total: 243\r\ncluster.testt1.upstream_rq_tx_reset: 0\r\ncluster.testt1.version: 0\r\ncluster.cont-ads.assignment_stale: 0\r\ncluster.cont-ads.assignment_timeout_received: 0\r\ncluster.cont-ads.bind_errors: 0\r\ncluster.cont-ads.circuit_breakers.default.cx_open: 0\r\ncluster.cont-ads.circuit_breakers.default.cx_pool_open: 0\r\ncluster.cont-ads.circuit_breakers.default.rq_open: 0\r\ncluster.cont-ads.circuit_breakers.default.rq_pending_open: 0\r\ncluster.cont-ads.circuit_breakers.default.rq_retry_open: 0\r\ncluster.cont-ads.circuit_breakers.high.cx_open: 0\r\ncluster.cont-ads.circuit_breakers.high.cx_pool_open: 0\r\ncluster.cont-ads.circuit_breakers.high.rq_open: 0\r\ncluster.cont-ads.circuit_breakers.high.rq_pending_open: 0\r\ncluster.cont-ads.circuit_breakers.high.rq_retry_open: 0\r\ncluster.cont-ads.client_ssl_socket_factory\r\n.downstream_context_secrets_not_ready: 0\r\ncluster.cont-ads.client_ssl_socket_factory.ssl_context_update_by_sds: 0\r\ncluster.cont-ads.client_ssl_socket_factory.upstream_context_secrets_not_ready: 0\r\ncluster.cont-ads.default.total_match_count: 269\r\ncluster.cont-ads.http2.header_overflow: 0\r\ncluster.cont-ads.http2.headers_cb_no_stream: 0\r\ncluster.cont-ads.http2.inbound_empty_frames_flood: 0\r\ncluster.cont-ads.http2.inbound_priority_frames_flood: 0\r\ncluster.cont-ads.http2.inbound_window_update_frames_flood: 0\r\ncluster.cont-ads.http2.outbound_control_flood: 0\r\ncluster.cont-ads.http2.outbound_flood: 0\r\ncluster.cont-ads.http2.rx_messaging_error: 0\r\ncluster.cont-ads.http2.rx_reset: 0\r\ncluster.cont-ads.http2.too_many_header_frames: 0\r\ncluster.cont-ads.http2.trailers: 0\r\ncluster.cont-ads.http2.tx_reset: 0\r\ncluster.cont-ads.internal.upstream_rq_200: 1\r\ncluster.cont-ads.internal.upstream_rq_2xx: 1\r\ncluster.cont-ads.internal.upstream_rq_503: 2\r\ncluster.cont-ads.internal.upstream_rq_5xx: 2\r\ncluster.cont-ads.internal.upstream_rq_completed: 3\r\ncluster.cont-ads.lb_healthy_panic: 1\r\ncluster.cont-ads.lb_local_cluster_not_ok: 0\r\ncluster.cont-ads.lb_recalculate_zone_structures: 0\r\ncluster.cont-ads.lb_subsets_active: 0\r\ncluster.cont-ads.lb_subsets_created: 0\r\ncluster.cont-ads.lb_subsets_fallback: 0\r\ncluster.cont-ads.lb_subsets_fallback_panic: 0\r\ncluster.cont-ads.lb_subsets_removed: 0\r\ncluster.cont-ads.lb_subsets_selected: 0\r\ncluster.cont-ads.lb_zone_cluster_too_small: 0\r\ncluster.cont-ads.lb_zone_no_capacity_left: 0\r\ncluster.cont-ads.lb_zone_number_differs: 0\r\ncluster.cont-ads.lb_zone_routing_all_directly: 0\r\ncluster.cont-ads.lb_zone_routing_cross_zone: 0\r\ncluster.cont-ads.lb_zone_routing_sampled: 0\r\ncluster.cont-ads.max_host_weight: 1\r\ncluster.cont-ads.membership_change: 1\r\ncluster.cont-ads.membership_degraded: 0\r\ncluster.cont-ads.membership_excluded: 0\r\ncluster.cont-ads.membership_healthy: 1\r\ncluster.cont-ads.membership_total: 1\r\ncluster.cont-ads.original_dst_host_invalid: 0\r\ncluster.cont-ads.retry_or_shadow_abandoned: 0\r\ncluster.cont-ads.ssl.ciphers.ECDHE-RSA-AES128-GCM-SHA256: 1\r\ncluster.cont-ads.ssl.connection_error: 0\r\ncluster.cont-ads.ssl.curves.X25519: 1\r\ncluster.cont-ads.ssl.fail_verify_cert_hash: 0\r\ncluster.cont-ads.ssl.fail_verify_error: 0\r\ncluster.cont-ads.ssl.fail_verify_no_cert: 0\r\ncluster.cont-ads.ssl.fail_verify_san: 0\r\ncluster.cont-ads.ssl.handshake: 1\r\ncluster.cont-ads.ssl.no_certificate: 0\r\ncluster.cont-ads.ssl.session_reused: 0\r\ncluster.cont-ads.ssl.sigalgs.unknown_ssl_algorithm: 1\r\ncluster.cont-ads.ssl.versions.TLSv1.2: 1\r\ncluster.cont-ads.update_attempt: 269\r\ncluster.cont-ads.update_empty: 0\r\ncluster.cont-ads.update_failure: 0\r\ncluster.cont-ads.update_no_rebuild: 268\r\ncluster.cont-ads.update_success: 269\r\ncluster.cont-ads.upstream_cx_active: 1\r\ncluster.cont-ads.upstream_cx_close_notify: 0\r\ncluster.cont-ads.upstream_cx_connect_attempts_exceeded: 0\r\ncluster.cont-ads.upstream_cx_connect_fail: 1\r\ncluster.cont-ads.upstream_cx_connect_timeout: 1\r\ncluster.cont-ads.upstream_cx_destroy: 1\r\ncluster.cont-ads.upstream_cx_destroy_local: 1\r\ncluster.cont-ads.upstream_cx_destroy_local_with_active_rq: 0\r\ncluster.cont-ads.upstream_cx_destroy_remote: 0\r\ncluster.cont-ads.upstream_cx_destroy_remote_with_active_rq: 0\r\ncluster.cont-ads.upstream_cx_destroy_with_active_rq: 0\r\ncluster.cont-ads.upstream_cx_http1_total: 0\r\ncluster.cont-ads.upstream_cx_http2_total: 2\r\ncluster.cont-ads.upstream_cx_idle_timeout: 0\r\ncluster.cont-ads.upstream_cx_max_requests: 0\r\ncluster.cont-ads.upstream_cx_none_healthy: 1\r\ncluster.cont-ads.upstream_cx_overflow: 0\r\ncluster.cont-ads.upstream_cx_pool_overflow: 0\r\ncluster.cont-ads.upstream_cx_protocol_error: 0\r\ncluster.cont-ads.upstream_cx_rx_bytes_buffered: 30\r\ncluster.cont-ads.upstream_cx_rx_bytes_total: 10578457\r\ncluster.cont-ads.upstream_cx_total: 2\r\ncluster.cont-ads.upstream_cx_tx_bytes_buffered: 0\r\ncluster.cont-ads.upstream_cx_tx_bytes_total: 1286626\r\ncluster.cont-ads.upstream_flow_control_backed_up_total: 0\r\ncluster.cont-ads.upstream_flow_control_drained_total: 0\r\ncluster.cont-ads.upstream_flow_control_paused_reading_total: 0\r\ncluster.cont-ads.upstream_flow_control_resumed_reading_total: 0\r\ncluster.cont-ads.upstream_internal_redirect_failed_total: 0\r\ncluster.cont-ads.upstream_internal_redirect_succeeded_total: 0\r\ncluster.cont-ads.upstream_rq_200: 1\r\ncluster.cont-ads.upstream_rq_2xx: 1\r\ncluster.cont-ads.upstream_rq_503: 2\r\ncluster.cont-ads.upstream_rq_5xx: 2\r\ncluster.cont-ads.upstream_rq_active: 1\r\ncluster.cont-ads.upstream_rq_cancelled: 0\r\ncluster.cont-ads.upstream_rq_completed: 3\r\ncluster.cont-ads.upstream_rq_maintenance_mode: 0\r\ncluster.cont-ads.upstream_rq_pending_active: 0\r\ncluster.cont-ads.upstream_rq_pending_failure_eject: 1\r\ncluster.cont-ads.upstream_rq_pending_overflow: 0\r\ncluster.cont-ads.upstream_rq_pending_total: 2\r\ncluster.cont-ads.upstream_rq_per_try_timeout: 0\r\ncluster.cont-ads.upstream_rq_retry: 0\r\ncluster.cont-ads.upstream_rq_retry_overflow: 0\r\ncluster.cont-ads.upstream_rq_retry_success: 0\r\ncluster.cont-ads.upstream_rq_rx_reset: 0\r\ncluster.cont-ads.upstream_rq_timeout: 0\r\ncluster.cont-ads.upstream_rq_total: 1\r\ncluster.cont-ads.upstream_rq_tx_reset: 0\r\ncluster.cont-ads.version: 0\r\ncluster_manager.active_clusters: 2\r\ncluster_manager.cds.init_fetch_timeout: 0\r\ncluster_manager.cds.update_attempt: 1440\r\ncluster_manager.cds.update_failure: 1\r\ncluster_manager.cds.update_rejected: 0\r\ncluster_manager.cds.update_success: 1438\r\ncluster_manager.cds.version: 310770956959226155\r\ncluster_manager.cluster_added: 2\r\ncluster_manager.cluster_modified: 0\r\ncluster_manager.cluster_removed: 0\r\ncluster_manager.cluster_updated: 0\r\ncluster_manager.cluster_updated_via_merge: 0\r\ncluster_manager.update_merge_cancelled: 0\r\ncluster_manager.update_out_of_merge_window: 0\r\ncluster_manager.warming_clusters: 0\r\ncontrol_plane.connected_state: 1\r\ncontrol_plane.pending_requests: 0\r\ncontrol_plane.rate_limit_enforced: 19\r\nfilesystem.flushed_by_timer: 721\r\nfilesystem.reopen_failed: 0\r\nfilesystem.write_buffered: 107386\r\nfilesystem.write_completed: 4504\r\nfilesystem.write_failed: 0\r\nfilesystem.write_total_buffered: 122\r\nhttp.admin.downstream_cx_active: 1\r\nhttp.admin.downstream_cx_delayed_close_timeout: 0\r\nhttp.admin.downstream_cx_destroy: 2651\r\nhttp.admin.downstream_cx_destroy_active_rq: 0\r\nhttp.admin.downstream_cx_destroy_local: 2640\r\nhttp.admin.downstream_cx_destroy_local_active_rq: 0\r\nhttp.admin.downstream_cx_destroy_remote: 11\r\nhttp.admin.downstream_cx_destroy_remote_active_rq: 0\r\nhttp.admin.downstream_cx_drain_close: 0\r\nhttp.admin.downstream_cx_http1_active: 1\r\nhttp.admin.downstream_cx_http1_total: 2652\r\nhttp.admin.downstream_cx_http2_active: 0\r\nhttp.admin.downstream_cx_http2_total: 0\r\nhttp.admin.downstream_cx_http3_active: 0\r\nhttp.admin.downstream_cx_http3_total: 0\r\nhttp.admin.downstream_cx_idle_timeout: 0\r\nhttp.admin.downstream_cx_max_duration_reached: 0\r\nhttp.admin.downstream_cx_overload_disable_keepalive: 0\r\nhttp.admin.downstream_cx_protocol_error: 0\r\nhttp.admin.downstream_cx_rx_bytes_buffered: 86\r\nhttp.admin.downstream_cx_rx_bytes_total: 312741\r\nhttp.admin.downstream_cx_ssl_active: 0\r\nhttp.admin.downstream_cx_ssl_total: 0\r\nhttp.admin.downstream_cx_total: 2652\r\nhttp.admin.downstream_cx_tx_bytes_buffered: 0\r\nhttp.admin.downstream_cx_tx_bytes_total: 664935\r\nhttp.admin.downstream_cx_upgrades_active: 0\r\nhttp.admin.downstream_cx_upgrades_total: 0\r\nhttp.admin.downstream_flow_control_paused_reading_total: 0\r\nhttp.admin.downstream_flow_control_resumed_reading_total: 0\r\nhttp.admin.downstream_rq_1xx: 0\r\nhttp.admin.downstream_rq_2xx: 2640\r\nhttp.admin.downstream_rq_3xx: 0\r\nhttp.admin.downstream_rq_4xx: 8\r\nhttp.admin.downstream_rq_5xx: 4\r\nhttp.admin.downstream_rq_active: 1\r\nhttp.admin.downstream_rq_completed: 2652\r\nhttp.admin.downstream_rq_http1_total: 2653\r\nhttp.admin.downstream_rq_http2_total: 0\r\nhttp.admin.downstream_rq_http3_total: 0\r\nhttp.admin.downstream_rq_idle_timeout: 0\r\nhttp.admin.downstream_rq_non_relative_path: 0\r\nhttp.admin.downstream_rq_overload_close: 0\r\nhttp.admin.downstream_rq_response_before_rq_complete: 0\r\nhttp.admin.downstream_rq_rx_reset: 0\r\nhttp.admin.downstream_rq_timeout: 0\r\nhttp.admin.downstream_rq_too_large: 0\r\nhttp.admin.downstream_rq_total: 2653\r\nhttp.admin.downstream_rq_tx_reset: 0\r\nhttp.admin.downstream_rq_ws_on_non_ws_route: 0\r\nhttp.admin.rs_too_large: 0\r\nhttp.async-client.no_cluster: 0\r\nhttp.async-client.no_route: 0\r\nhttp.async-client.rq_direct_response: 0\r\nhttp.async-client.rq_redirect: 0\r\nhttp.async-client.rq_reset_after_downstream_response_started: 0\r\nhttp.async-client.rq_retry_skipped_request_not_complete: 0\r\nhttp.async-client.rq_total: 3\r\nhttp.ingress_http.downstream_cx_active: 0\r\nhttp.ingress_http.downstream_cx_delayed_close_timeout: 0\r\nhttp.ingress_http.downstream_cx_destroy: 10\r\nhttp.ingress_http.downstream_cx_destroy_active_rq: 0\r\nhttp.ingress_http.downstream_cx_destroy_local: 0\r\nhttp.ingress_http.downstream_cx_destroy_local_active_rq: 0\r\nhttp.ingress_http.downstream_cx_destroy_remote: 10\r\nhttp.ingress_http.downstream_cx_destroy_remote_active_rq: 0\r\nhttp.ingress_http.downstream_cx_drain_close: 0\r\nhttp.ingress_http.downstream_cx_http1_active: 0\r\nhttp.ingress_http.downstream_cx_http1_total: 10\r\nhttp.ingress_http.downstream_cx_http2_active: 0\r\nhttp.ingress_http.downstream_cx_http2_total: 0\r\nhttp.ingress_http.downstream_cx_http3_active: 0\r\nhttp.ingress_http.downstream_cx_http3_total: 0\r\nhttp.ingress_http.downstream_cx_idle_timeout: 0\r\nhttp.ingress_http.downstream_cx_max_duration_reached: 0\r\nhttp.ingress_http.downstream_cx_overload_disable_keepalive: 0\r\nhttp.ingress_http.downstream_cx_protocol_error: 0\r\nhttp.ingress_http.downstream_cx_rx_bytes_buffered: 0\r\nhttp.ingress_http.downstream_cx_rx_bytes_total: 59282\r\nhttp.ingress_http.downstream_cx_ssl_active: 0\r\nhttp.ingress_http.downstream_cx_ssl_total: 10\r\nhttp.ingress_http.downstream_cx_total: 10\r\nhttp.ingress_http.downstream_cx_tx_bytes_buffered: 0\r\nhttp.ingress_http.downstream_cx_tx_bytes_total: 42234\r\nhttp.ingress_http.downstream_cx_upgrades_active: 0\r\nhttp.ingress_http.downstream_cx_upgrades_total: 0\r\nhttp.ingress_http.downstream_flow_control_paused_reading_total: 0\r\nhttp.ingress_http.downstream_flow_control_resumed_reading_total: 0\r\nhttp.ingress_http.downstream_rq_1xx: 0\r\nhttp.ingress_http.downstream_rq_2xx: 4\r\nhttp.ingress_http.downstream_rq_3xx: 0\r\nhttp.ingress_http.downstream_rq_4xx: 3\r\nhttp.ingress_http.downstream_rq_5xx: 236\r\nhttp.ingress_http.downstream_rq_active: 0\r\nhttp.ingress_http.downstream_rq_completed: 243\r\nhttp.ingress_http.downstream_rq_http1_total: 243\r\nhttp.ingress_http.downstream_rq_http2_total: 0\r\nhttp.ingress_http.downstream_rq_http3_total: 0\r\nhttp.ingress_http.downstream_rq_idle_timeout: 0\r\nhttp.ingress_http.downstream_rq_non_relative_path: 0\r\nhttp.ingress_http.downstream_rq_overload_close: 0\r\nhttp.ingress_http.downstream_rq_response_before_rq_complete: 0\r\nhttp.ingress_http.downstream_rq_rx_reset: 0\r\nhttp.ingress_http.downstream_rq_timeout: 0\r\nhttp.ingress_http.downstream_rq_too_large: 0\r\nhttp.ingress_http.downstream_rq_total: 243\r\nhttp.ingress_http.downstream_rq_tx_reset: 0\r\nhttp.ingress_http.downstream_rq_ws_on_non_ws_route: 0\r\nhttp.ingress_http.no_cluster: 0\r\nhttp.ingress_http.no_route: 0\r\nhttp.ingress_http.rds.ingress-http-route-config.config_reload: 1\r\nhttp.ingress_http.rds.ingress-http-route-config.init_fetch_timeout: 0\r\nhttp.ingress_http.rds.ingress-http-route-config.update_attempt: 1439\r\nhttp.ingress_http.rds.ingress-http-route-config.update_empty: 0\r\nhttp.ingress_http.rds.ingress-http-route-config.update_failure: 0\r\nhttp.ingress_http.rds.ingress-http-route-config.update_rejected: 0\r\nhttp.ingress_http.rds.ingress-http-route-config.update_success: 1438\r\nhttp.ingress_http.rds.ingress-http-route-config.version: 310770956959226155\r\nhttp.ingress_http.rds.route-t1-t1-vh1.config_reload: 1\r\nhttp.ingress_http.rds.route-t1-t1-vh1.init_fetch_timeout: 0\r\nhttp.ingress_http.rds.route-t1-t1-vh1.update_attempt: 1439\r\nhttp.ingress_http.rds.route-t1-t1-vh1.update_empty: 0\r\nhttp.ingress_http.rds.route-t1-t1-vh1.update_failure: 0\r\nhttp.ingress_http.rds.route-t1-t1-vh1.update_rejected: 0\r\nhttp.ingress_http.rds.route-t1-t1-vh1.update_success: 1438\r\nhttp.ingress_http.rds.route-t1-t1-vh1.version: 310770956959226155\r\nhttp.ingress_http.rq_direct_response: 0\r\nhttp.ingress_http.rq_redirect: 0\r\nhttp.ingress_http.rq_reset_after_downstream_response_started: 0\r\nhttp.ingress_http.rq_retry_skipped_request_not_complete: 0\r\nhttp.ingress_http.rq_total: 243\r\nhttp.ingress_http.rs_too_large: 0\r\nhttp.ingress_http.tracing.client_enabled: 0\r\nhttp.ingress_http.tracing.health_check: 0\r\nhttp.ingress_http.tracing.not_traceable: 0\r\nhttp.ingress_http.tracing.random_sampling: 0\r\nhttp.ingress_http.tracing.service_forced: 0\r\nhttp1.metadata_not_supported_error: 0\r\ninit_fetch_timeout: 0\r\nlistener.0.0.0.0_10000.downstream_cx_active: 0\r\nlistener.0.0.0.0_10000.downstream_cx_destroy: 0\r\nlistener.0.0.0.0_10000.downstream_cx_total: 0\r\nlistener.0.0.0.0_10000.downstream_pre_cx_active: 0\r\nlistener.0.0.0.0_10000.downstream_pre_cx_timeout: 0\r\nlistener.0.0.0.0_10000.http.ingress_http.downstream_rq_1xx: 0\r\nlistener.0.0.0.0_10000.http.ingress_http.downstream_rq_2xx: 0\r\nlistener.0.0.0.0_10000.http.ingress_http.downstream_rq_3xx: 0\r\nlistener.0.0.0.0_10000.http.ingress_http.downstream_rq_4xx: 0\r\nlistener.0.0.0.0_10000.http.ingress_http.downstream_rq_5xx: 0\r\nlistener.0.0.0.0_10000.http.ingress_http.downstream_rq_completed: 0\r\nlistener.0.0.0.0_10000.no_filter_chain_match: 0\r\nlistener.0.0.0.0_10000.worker_0.downstream_cx_active: 0\r\nlistener.0.0.0.0_10000.worker_0.downstream_cx_total: 0\r\nlistener.0.0.0.0_10000.worker_1.downstream_cx_active: 0\r\nlistener.0.0.0.0_10000.worker_1.downstream_cx_total: 0\r\nlistener.0.0.0.0_10443.downstream_cx_active: 0\r\nlistener.0.0.0.0_10443.downstream_cx_destroy: 10\r\nlistener.0.0.0.0_10443.downstream_cx_total: 10\r\nlistener.0.0.0.0_10443.downstream_pre_cx_active: 0\r\nlistener.0.0.0.0_10443.downstream_pre_cx_timeout: 0\r\nlistener.0.0.0.0_10443.http.ingress_http.downstream_rq_1xx: 0\r\nlistener.0.0.0.0_10443.http.ingress_http.downstream_rq_2xx: 4\r\nlistener.0.0.0.0_10443.http.ingress_http.downstream_rq_3xx: 0\r\nlistener.0.0.0.0_10443.http.ingress_http.downstream_rq_4xx: 3\r\nlistener.0.0.0.0_10443.http.ingress_http.downstream_rq_5xx: 236\r\nlistener.0.0.0.0_10443.http.ingress_http.downstream_rq_completed: 243\r\nlistener.0.0.0.0_10443.no_filter_chain_match: 100\r\nlistener.0.0.0.0_10443.server_ssl_socket_factory.downstream_context_secrets_not_ready: 0\r\nlistener.0.0.0.0_10443.server_ssl_socket_factory.ssl_context_update_by_sds: 2\r\nlistener.0.0.0.0_10443.server_ssl_socket_factory.upstream_context_secrets_not_ready: 0\r\nlistener.0.0.0.0_10443.ssl.ciphers.ECDHE-RSA-AES128-GCM-SHA256: 3\r\nlistener.0.0.0.0_10443.ssl.ciphers.TLS_AES_128_GCM_SHA256: 7\r\nlistener.0.0.0.0_10443.ssl.connection_error: 0\r\nlistener.0.0.0.0_10443.ssl.curves.X25519: 10\r\nlistener.0.0.0.0_10443.ssl.fail_verify_cert_hash: 0\r\nlistener.0.0.0.0_10443.ssl.fail_verify_error: 0\r\nlistener.0.0.0.0_10443.ssl.fail_verify_no_cert: 0\r\nlistener.0.0.0.0_10443.ssl.fail_verify_san: 0\r\nlistener.0.0.0.0_10443.ssl.handshake: 10\r\nlistener.0.0.0.0_10443.ssl.no_certificate: 10\r\nlistener.0.0.0.0_10443.ssl.session_reused: 7\r\nlistener.0.0.0.0_10443.ssl.versions.TLSv1.2: 3\r\nlistener.0.0.0.0_10443.ssl.versions.TLSv1.3: 7\r\nlistener.0.0.0.0_10443.worker_0.downstream_cx_active: 0\r\nlistener.0.0.0.0_10443.worker_0.downstream_cx_total: 2\r\nlistener.0.0.0.0_10443.worker_1.downstream_cx_active: 0\r\nlistener.0.0.0.0_10443.worker_1.downstream_cx_total: 8\r\nlistener.admin.downstream_cx_active: 1\r\nlistener.admin.downstream_cx_destroy: 2651\r\nlistener.admin.downstream_cx_total: 2652\r\nlistener.admin.downstream_pre_cx_active: 0\r\nlistener.admin.downstream_pre_cx_timeout: 0\r\nlistener.admin.http.admin.downstream_rq_1xx: 0\r\nlistener.admin.http.admin.downstream_rq_2xx: 2640\r\nlistener.admin.http.admin.downstream_rq_3xx: 0\r\nlistener.admin.http.admin.downstream_rq_4xx: 8\r\nlistener.admin.http.admin.downstream_rq_5xx: 4\r\nlistener.admin.http.admin.downstream_rq_completed: 2652\r\nlistener.admin.main_thread.downstream_cx_active: 1\r\nlistener.admin.main_thread.downstream_cx_total: 2652\r\nlistener.admin.no_filter_chain_match: 0\r\nlistener_manager.lds.init_fetch_timeout: 0\r\nlistener_manager.lds.update_attempt: 1440\r\nlistener_manager.lds.update_failure: 1\r\nlistener_manager.lds.update_rejected: 0\r\nlistener_manager.lds.update_success: 1438\r\nlistener_manager.lds.version: 310770956959226155\r\nlistener_manager.listener_added: 2\r\nlistener_manager.listener_create_failure: 0\r\nlistener_manager.listener_create_success: 4\r\nlistener_manager.listener_modified: 0\r\nlistener_manager.listener_removed: 0\r\nlistener_manager.listener_stopped: 0\r\nlistener_manager.total_listeners_active: 2\r\nlistener_manager.total_listeners_draining: 0\r\nlistener_manager.total_listeners_warming: 0\r\nruntime.admin_overrides_active: 0\r\nruntime.deprecated_feature_use: 0\r\nruntime.load_error: 0\r\nruntime.load_success: 1\r\nruntime.num_keys: 0\r\nruntime.num_layers: 2\r\nruntime.override_dir_exists: 0\r\nruntime.override_dir_not_exists: 1\r\nserver.concurrency: 2\r\nserver.days_until_first_cert_expiring: 0\r\nserver.debug_assertion_failures: 0\r\nserver.dynamic_unknown_fields: 0\r\nserver.hot_restart_epoch: 0\r\nserver.live: 1\r\nserver.main_thread.watchdog_mega_miss: 0\r\nserver.main_thread.watchdog_miss: 0\r\nserver.memory_allocated: 4368128\r\nserver.memory_heap_size: 6291456\r\nserver.parent_connections: 0\r\nserver.state: 0\r\nserver.static_unknown_fields: 0\r\nserver.stats_recent_lookups: 0\r\nserver.total_connections: 0\r\nserver.uptime: 7211\r\nserver.version: 9381141\r\nserver.watchdog_mega_miss: 0\r\nserver.watchdog_miss: 0\r\nserver.worker_0.watchdog_mega_miss: 0\r\nserver.worker_0.watchdog_miss: 0\r\nserver.worker_1.watchdog_mega_miss: 0\r\nserver.worker_1.watchdog_miss: 0\r\ntls_inspector.alpn_found: 90\r\ntls_inspector.alpn_not_found: 20\r\ntls_inspector.client_hello_too_large: 0\r\ntls_inspector.connection_closed: 2841\r\ntls_inspector.read_error: 0\r\ntls_inspector.sni_found: 109\r\ntls_inspector.sni_not_found: 1\r\ntls_inspector.tls_found: 110\r\ntls_inspector.tls_not_found: 0\r\nupdate_attempt: 2878\r\nupdate_failure: 0\r\nupdate_rejected: 0\r\nupdate_success: 2876\r\nversion: 310770956959226155\r\n</details>\r\n\r\nConfig:\r\n\r\n<details><summary>config</summary>\r\n<p>\r\n```json\r\n{\r\n \"configs\": [\r\n  {\r\n   \"@type\": \"type.googleapis.com/envoy.admin.v2alpha.BootstrapConfigDump\",\r\n   \"bootstrap\": {\r\n    \"node\": {\r\n     \"id\": \"ingressnode\",\r\n     \"cluster\": \"cluster1\",\r\n     \"build_version\": \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n    },\r\n    \"static_resources\": {\r\n     \"clusters\": [\r\n      {\r\n       \"name\": \"rtcontroller-ads\",\r\n       \"type\": \"STRICT_DNS\",\r\n       \"connect_timeout\": \"25s\",\r\n       \"tls_context\": {\r\n        \"common_tls_context\": {\r\n         \"tls_certificates\": [\r\n          {\r\n           \"certificate_chain\": {\r\n            \"filename\": \"/home/cert/tls.crt\"\r\n           },\r\n           \"private_key\": {\r\n            \"filename\": \"/home/cert/tls.key\"\r\n           }\r\n          }\r\n         ],\r\n         \"validation_context\": {\r\n          \"trusted_ca\": {\r\n           \"filename\": \"home/rootca/tls.crt\"\r\n          }\r\n         }\r\n        }\r\n       },\r\n       \"http2_protocol_options\": {},\r\n       \"upstream_connection_options\": {\r\n        \"tcp_keepalive\": {\r\n         \"keepalive_probes\": 3,\r\n         \"keepalive_time\": 30,\r\n         \"keepalive_interval\": 5\r\n        }\r\n       },\r\n       \"load_assignment\": {\r\n        \"cluster_name\": \"---ads\",\r\n        \"endpoints\": [\r\n         {\r\n          \"lb_endpoints\": [\r\n           {\r\n            \"endpoint\": {\r\n             \"address\": {\r\n              \"socket_address\": {\r\n               \"address\": \"...svc.cluster.local\",\r\n               \"port_value\": 443\r\n              }\r\n             }\r\n            }\r\n           }\r\n          ]\r\n         }\r\n        ]\r\n       },\r\n       \"respect_dns_ttl\": true\r\n      }\r\n     ]\r\n    },\r\n    \"dynamic_resources\": {\r\n     \"lds_config\": {\r\n      \"ads\": {}\r\n     },\r\n     \"cds_config\": {\r\n      \"ads\": {}\r\n     },\r\n     \"ads_config\": {\r\n      \"api_type\": \"GRPC\",\r\n      \"grpc_services\": [\r\n       {\r\n        \"envoy_grpc\": {\r\n         \"cluster_name\": \"..-ads\"\r\n        }\r\n       }\r\n      ],\r\n      \"rate_limit_settings\": {\r\n       \"max_tokens\": 10,\r\n       \"fill_rate\": 1\r\n      }\r\n     }\r\n    },\r\n    \"admin\": {\r\n     \"access_log_path\": \"/dev/stdout\",\r\n     \"address\": {\r\n      \"socket_address\": {\r\n       \"address\": \"0.0.0.0\",\r\n       \"port_value\": 9901\r\n      }\r\n     }\r\n    }\r\n   },\r\n   \"last_updated\": \"2020-08-14T09:13:04.710Z\"\r\n  },\r\n  {\r\n   \"@type\": \"type.googleapis.com/envoy.admin.v2alpha.ClustersConfigDump\",\r\n   \"version_info\": \"---\",\r\n   \"static_clusters\": [\r\n    {\r\n     \"cluster\": {\r\n      \"name\": \"rtcontroller-ads\",\r\n      \"type\": \"STRICT_DNS\",\r\n      \"connect_timeout\": \"25s\",\r\n      \"tls_context\": {\r\n       \"common_tls_context\": {\r\n        \"tls_certificates\": [\r\n         {\r\n          \"certificate_chain\": {\r\n           \"filename\": \"/home/cert/tls.crt\"\r\n          },\r\n          \"private_key\": {\r\n           \"filename\": \"/home/cert/tls.key\"\r\n          }\r\n         }\r\n        ],\r\n        \"validation_context\": {\r\n         \"trusted_ca\": {\r\n          \"filename\": \"home/rootca/tls.crt\"\r\n         }\r\n        }\r\n       }\r\n      },\r\n      \"http2_protocol_options\": {},\r\n      \"upstream_connection_options\": {\r\n       \"tcp_keepalive\": {\r\n        \"keepalive_probes\": 3,\r\n        \"keepalive_time\": 30,\r\n        \"keepalive_interval\": 5\r\n       }\r\n      },\r\n      \"load_assignment\": {\r\n       \"cluster_name\": \"..-ads\",\r\n       \"endpoints\": [\r\n        {\r\n         \"lb_endpoints\": [\r\n          {\r\n           \"endpoint\": {\r\n            \"address\": {\r\n             \"socket_address\": {\r\n              \"address\": \"..svc.cluster.local\",\r\n              \"port_value\": 443\r\n             }\r\n            }\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       ]\r\n      },\r\n      \"respect_dns_ttl\": true\r\n     },\r\n     \"last_updated\": \"2020-08-14T09:13:04.715Z\"\r\n    }\r\n   ],\r\n   \"dynamic_active_clusters\": [\r\n    {\r\n     \"version_info\": \"----\",\r\n     \"cluster\": {\r\n      \"name\": \"----\",\r\n      \"type\": \"STRICT_DNS\",\r\n      \"connect_timeout\": \"5s\",\r\n      \"circuit_breakers\": {\r\n       \"thresholds\": [\r\n        {\r\n         \"max_connections\": 8000\r\n        },\r\n        {\r\n         \"priority\": \"HIGH\",\r\n         \"max_connections\": 10000\r\n        }\r\n       ]\r\n      },\r\n      \"transport_socket\": {\r\n       \"name\": \"envoy.transport_sockets.tls\",\r\n       \"typed_config\": {\r\n        \"@type\": \"type.googleapis.com/envoy.api.v2.auth.UpstreamTlsContext\",\r\n        \"common_tls_context\": {\r\n         \"validation_context\": {\r\n          \"trusted_ca\": {\r\n           \"filename\": \"/home/rootca/tls.crt\"\r\n          }\r\n         }\r\n        },\r\n        \"sni\": \"..svc.cluster.local\"\r\n       }\r\n      },\r\n      \"load_assignment\": {\r\n       \"cluster_name\": \"----\",\r\n       \"endpoints\": [\r\n        {\r\n         \"lb_endpoints\": [\r\n          {\r\n           \"endpoint\": {\r\n            \"address\": {\r\n             \"socket_address\": {\r\n              \"address\": \"...svc.cluster.local\",\r\n              \"port_value\": 8443\r\n             }\r\n            }\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       ]\r\n      },\r\n      \"respect_dns_ttl\": true\r\n     },\r\n     \"last_updated\": \"2020-08-14T09:13:31.576Z\"\r\n    }\r\n   ]\r\n  },\r\n  {\r\n   \"@type\": \"type.googleapis.com/envoy.admin.v2alpha.ListenersConfigDump\",\r\n   \"version_info\": \"----\",\r\n   \"dynamic_active_listeners\": [\r\n    {\r\n     \"version_info\": \"----\",\r\n     \"listener\": {\r\n      \"name\": \"listener-ingress-http\",\r\n      \"address\": {\r\n       \"socket_address\": {\r\n        \"address\": \"0.0.0.0\",\r\n        \"port_value\": 10000\r\n       }\r\n      },\r\n      \"filter_chains\": [\r\n       {\r\n        \"filters\": [\r\n         {\r\n          \"name\": \"envoy.http_connection_manager\",\r\n          \"typed_config\": {\r\n           \"@type\": \"type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager\",\r\n           \"stat_prefix\": \"ingress_http\",\r\n           \"http_filters\": [\r\n            {\r\n             \"name\": \"envoy.router\"\r\n            }\r\n           ],\r\n           \"add_user_agent\": true,\r\n           \"access_log\": [\r\n            {\r\n             \"name\": \"envoy.file_access_log\",\r\n             \"typed_config\": {\r\n              \"@type\": \"type.googleapis.com/envoy.config.accesslog.v2.FileAccessLog\",\r\n              \"path\": \"/dev/stdout\",\r\n              \"format\": \"%START_TIME% [INFO] [INGRESS]:[Request_Id: %REQ(X-REQUEST-ID)%], Protocol: %PROTOCOL%, Method : %REQ(:METHOD)%, Path: %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%, Response Code: %RESPONSE_CODE%, Host: %REQ(:AUTHORITY)%, Duration: %DURATION%, Upstream Service Time: %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%, Bytes Received: %BYTES_RECEIVED%, Bytes Sent: %BYTES_SENT%\\n\"\r\n             }\r\n            }\r\n           ],\r\n           \"rds\": {\r\n            \"config_source\": {\r\n             \"ads\": {}\r\n            },\r\n            \"route_config_name\": \"ingress-http-route-config\"\r\n           }\r\n          }\r\n         }\r\n        ]\r\n       }\r\n      ],\r\n      \"listener_filters\": [\r\n       {\r\n        \"name\": \"envoy.listener.original_dst\"\r\n       }\r\n      ]\r\n     },\r\n     \"last_updated\": \"2020-08-14T09:13:31.578Z\"\r\n    },\r\n    {\r\n     \"version_info\": \"---\",\r\n     \"listener\": {\r\n      \"name\": \"listener-ingress-tls\",\r\n      \"address\": {\r\n       \"socket_address\": {\r\n        \"address\": \"0.0.0.0\",\r\n        \"port_value\": 10443\r\n       }\r\n      },\r\n      \"filter_chains\": [\r\n       {\r\n        \"filter_chain_match\": {\r\n         \"server_names\": [\r\n          \"t1-vh1.apim.sap.com\"\r\n         ]\r\n        },\r\n        \"filters\": [\r\n         {\r\n          \"name\": \"envoy.http_connection_manager\",\r\n          \"typed_config\": {\r\n           \"@type\": \"type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager\",\r\n           \"stat_prefix\": \"ingress_http\",\r\n           \"http_filters\": [\r\n            {\r\n             \"name\": \"envoy.router\"\r\n            }\r\n           ],\r\n           \"add_user_agent\": true,\r\n           \"access_log\": [\r\n            {\r\n             \"name\": \"envoy.file_access_log\",\r\n             \"typed_config\": {\r\n              \"@type\": \"type.googleapis.com/envoy.config.accesslog.v2.FileAccessLog\",\r\n              \"path\": \"/dev/stdout\",\r\n              \"format\": \"%START_TIME% [INFO] [INGRESS]:[Request_Id: %REQ(X-REQUEST-ID)%], Protocol: %PROTOCOL%, Method : %REQ(:METHOD)%, Path: %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%, Response Code: %RESPONSE_CODE%, Host: %REQ(:AUTHORITY)%, Duration: %DURATION%, Upstream Service Time: %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%, Bytes Received: %BYTES_RECEIVED%, Bytes Sent: %BYTES_SENT%\\n\"\r\n             }\r\n            }\r\n           ],\r\n           \"rds\": {\r\n            \"config_source\": {\r\n             \"ads\": {}\r\n            },\r\n            \"route_config_name\": \"route----\"\r\n           }\r\n          }\r\n         }\r\n        ],\r\n        \"transport_socket\": {\r\n         \"name\": \"envoy.transport_sockets.tls\",\r\n         \"typed_config\": {\r\n          \"@type\": \"type.googleapis.com/envoy.api.v2.auth.DownstreamTlsContext\",\r\n          \"common_tls_context\": {\r\n           \"tls_certificate_sds_secret_configs\": [\r\n            {\r\n             \"name\": \"---\",\r\n             \"sds_config\": {\r\n              \"ads\": {}\r\n             }\r\n            }\r\n           ],\r\n           \"validation_context_sds_secret_config\": {\r\n            \"name\": \"---\",\r\n            \"sds_config\": {\r\n             \"ads\": {}\r\n            }\r\n           }\r\n          }\r\n         }\r\n        },\r\n        \"name\": \"filterchain-t1-t1-vh1\"\r\n       }\r\n      ],\r\n      \"listener_filters\": [\r\n       {\r\n        \"name\": \"envoy.listener.tls_inspector\"\r\n       }\r\n      ]\r\n     },\r\n     \"last_updated\": \"2020-08-14T09:13:31.579Z\"\r\n    }\r\n   ]\r\n  },\r\n  {\r\n   \"@type\": \"type.googleapis.com/envoy.admin.v2alpha.ScopedRoutesConfigDump\"\r\n  },\r\n  {\r\n   \"@type\": \"type.googleapis.com/envoy.admin.v2alpha.RoutesConfigDump\",\r\n   \"dynamic_route_configs\": [\r\n    {\r\n     \"version_info\": \"---\",\r\n     \"route_config\": {\r\n      \"name\": \"route-1--\",\r\n      \"virtual_hosts\": [\r\n       {\r\n        \"name\": \"route-1\",\r\n        \"domains\": [\r\n         \"---\"\r\n        ],\r\n        \"routes\": [\r\n         {\r\n          \"match\": {\r\n           \"prefix\": \"/\"\r\n          },\r\n          \"route\": {\r\n           \"cluster\": \"test\",\r\n           \"timeout\": \"15s\",\r\n           \"idle_timeout\": \"315s\"\r\n          }\r\n         }\r\n        ]\r\n       }\r\n      ]\r\n     },\r\n     \"last_updated\": \"2020-08-14T09:13:31.581Z\"\r\n    },\r\n    {\r\n     \"version_info\": \"---\",\r\n     \"route_config\": {\r\n      \"name\": \"ingress-http-route-config\"\r\n     },\r\n     \"last_updated\": \"2020-08-14T09:13:31.581Z\"\r\n    }\r\n   ]\r\n  },\r\n  {\r\n   \"@type\": \"type.googleapis.com/envoy.admin.v2alpha.SecretsConfigDump\",\r\n   \"dynamic_active_secrets\": [\r\n    {\r\n     \"name\": \"---\",\r\n     \"version_info\": \"---\",\r\n     \"last_updated\": \"2020-08-14T09:15:54.416Z\",\r\n     \"secret\": {\r\n      \"name\": \"----\",\r\n      \"tls_certificate\": {\r\n       \"certificate_chain\": {\r\n        \"inline_bytes\": \"---\"\r\n       },\r\n       \"private_key\": {\r\n        \"inline_string\": \"[redacted]\"\r\n       }\r\n      }\r\n     }\r\n    },\r\n    {\r\n     \"name\": \"----\",\r\n     \"version_info\": \"----\",\r\n     \"last_updated\": \"2020-08-14T09:15:54.416Z\",\r\n     \"secret\": {\r\n      \"name\": \"----\",\r\n      \"validation_context\": {\r\n       \"trusted_ca\": {\r\n        \"inline_bytes\": \"-------\"\r\n       }\r\n      }\r\n     }\r\n    }\r\n   ]\r\n  }\r\n ]\r\n}\r\n```\r\n</p>\r\n</details>\r\n\r\nLogs:\r\n\r\n<details><summary>Log</summary>\r\n[2020-08-14 10:35:44.511][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 247 bytes\r\n[2020-08-14 10:35:44.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 7322 bytes\r\n[2020-08-14 10:35:44.511][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 873 bytes, end_stream false\r\n[2020-08-14 10:35:44.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=0\r\n[2020-08-14 10:35:44.511][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:44.511][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:44.511][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 873\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 30\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 30 bytes into 1 slices\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 30 bytes\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=6, flags=0\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=6\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 30 bytes\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:666] [C5] about to send frame type=6, flags=1\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:720] [C5] send data: bytes=17\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 17 bytes, end_stream false\r\n[2020-08-14 10:35:44.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=6\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:44.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 17\r\n[2020-08-14 10:35:44.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1953] new connection\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1953] socket event: 2\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1953] write ready\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1953] socket event: 3\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1953] write ready\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1953] read ready\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1953] read returns: 118\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1953] read error: Resource temporarily unavailable\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1953] parsing 118 bytes\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1953] message begin\r\n[2020-08-14 10:35:44.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1953] new stream\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1953] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1953] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1953] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1953] headers complete\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1953] completed header: key=Connection value=close\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1953] message complete\r\n[2020-08-14 10:35:44.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1953][S5255068674068296761] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:44.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1953][S5255068674068296761] request end stream\r\n[2020-08-14 10:35:44.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1953][S5255068674068296761] request complete: path: /ready\r\n[2020-08-14 10:35:44.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1953][S5255068674068296761] closing connection due to connection close header\r\n[2020-08-14 10:35:44.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1953][S5255068674068296761] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:35:44 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1953] writing 228 bytes, end_stream false\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1953][S5255068674068296761] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1953] writing 15 bytes, end_stream false\r\n[2020-08-14 10:35:44.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:44.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1953] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1953][S5255068674068296761] decode headers called: filter=0x564e4337e7e0 status=1\r\n[2020-08-14 10:35:44.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1953] parsed 118 bytes\r\n[2020-08-14 10:35:44.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1953] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:44.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:35:44.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1953] socket event: 2\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1953] write ready\r\n[2020-08-14 10:35:44.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1953] write returns: 243\r\n[2020-08-14 10:35:44.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1953] write flush complete\r\n[2020-08-14 10:35:44.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1953] closing socket: 1\r\n[2020-08-14 10:35:44.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1953] adding to cleanup list\r\n[2020-08-14 10:35:44.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:44.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:44.636][13][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:35:44.636][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:35:44.636][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:35:44.636][13][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:44.636][13][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:44.636][13][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:35:44.636][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:35:44.636][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:35:44.636][13][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:44.636][13][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:45.041][6][debug][main] [source/server/server.cc:175] flushing stats\r\n[2020-08-14 10:35:47.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1954] new connection\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1954] socket event: 2\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1954] write ready\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1954] socket event: 3\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1954] write ready\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1954] read ready\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1954] read returns: 118\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1954] read error: Resource temporarily unavailable\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1954] parsing 118 bytes\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1954] message begin\r\n[2020-08-14 10:35:47.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1954] new stream\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1954] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1954] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1954] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1954] headers complete\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1954] completed header: key=Connection value=close\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1954] message complete\r\n[2020-08-14 10:35:47.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1954][S14082497283590410047] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:47.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1954][S14082497283590410047] request end stream\r\n[2020-08-14 10:35:47.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1954][S14082497283590410047] request complete: path: /ready\r\n[2020-08-14 10:35:47.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1954][S14082497283590410047] closing connection due to connection close header\r\n[2020-08-14 10:35:47.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1954][S14082497283590410047] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:35:47 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1954] writing 228 bytes, end_stream false\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1954][S14082497283590410047] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1954] writing 15 bytes, end_stream false\r\n[2020-08-14 10:35:47.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:47.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1954] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1954][S14082497283590410047] decode headers called: filter=0x564e43373f80 status=1\r\n[2020-08-14 10:35:47.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1954] parsed 118 bytes\r\n[2020-08-14 10:35:47.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1954] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:47.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:35:47.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1954] socket event: 2\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1954] write ready\r\n[2020-08-14 10:35:47.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1954] write returns: 243\r\n[2020-08-14 10:35:47.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1954] write flush complete\r\n[2020-08-14 10:35:47.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1954] closing socket: 1\r\n[2020-08-14 10:35:47.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1954] adding to cleanup list\r\n[2020-08-14 10:35:47.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:47.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:49.523][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:49.523][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:49.523][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 4644\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 2674\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 7318 bytes into 1 slices\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 7318 bytes\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:49.524][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=4635 end_stream=false)\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.auth.Secret at version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.auth.Secret: version_info: \"2020-08-14 10:35:49.52335533 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"testmst\"\r\nresource_names: \"t1-mockkeystore\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.auth.Secret\"\r\nresponse_nonce: \"3953\"\r\n\r\n[2020-08-14 10:35:49.524][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 231 bytes\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:49.524][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=430 end_stream=false)\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Cluster at version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:35:49.524][6][info][upstream] [source/common/upstream/cds_api_impl.cc:67] cds: add 1 cluster(s), remove 1 cluster(s)\r\n[2020-08-14 10:35:49.524][6][debug][upstream] [source/common/upstream/cds_api_impl.cc:85] cds: add/update cluster 'policyengine-t1' skipped\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Cluster accepted with 1 resources with version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Cluster: version_info: \"2020-08-14 10:35:49.52335533 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Cluster\"\r\nresponse_nonce: \"3954\"\r\n\r\n[2020-08-14 10:35:49.524][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 191 bytes\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:49.524][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=339 end_stream=false)\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.RouteConfiguration at version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.RouteConfiguration: version_info: \"2020-08-14 10:35:49.52335533 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"route-t1-t1-vh1\"\r\nresource_names: \"ingress-http-route-config\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.RouteConfiguration\"\r\nresponse_nonce: \"3955\"\r\n\r\n[2020-08-14 10:35:49.524][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 246 bytes\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:49.524][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=1878 end_stream=false)\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Listener at version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-http hash=15192452732192267292\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-http'. no add/update\r\n[2020-08-14 10:35:49.524][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-http' skipped\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-tls hash=9325604105818206458\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-tls'. no add/update\r\n[2020-08-14 10:35:49.524][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-tls' skipped\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:35:49.524][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Listener accepted with 2 resources with version 2020-08-14 10:35:49.52335533 +0000 UTC\r\n[2020-08-14 10:35:49.524][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Listener: version_info: \"2020-08-14 10:35:49.52335533 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Listener\"\r\nresponse_nonce: \"3956\"\r\n\r\n[2020-08-14 10:35:49.524][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 192 bytes\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 7318 bytes\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 869 bytes, end_stream false\r\n[2020-08-14 10:35:49.524][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=0\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:49.524][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 869\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 30\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 30 bytes into 1 slices\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 30 bytes\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=6, flags=0\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=6\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 30 bytes\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:666] [C5] about to send frame type=6, flags=1\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:720] [C5] send data: bytes=17\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 17 bytes, end_stream false\r\n[2020-08-14 10:35:49.525][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=6\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:49.525][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 17\r\n[2020-08-14 10:35:49.777][14][debug][router] [source/common/router/router.cc:724] [C1916][S6524082276721005270] upstream timeout\r\n[2020-08-14 10:35:49.777][14][debug][router] [source/common/router/router.cc:1564] [C1916][S6524082276721005270] resetting pool request\r\n[2020-08-14 10:35:49.777][14][debug][client] [source/common/http/codec_client.cc:111] [C1948] request reset\r\n[2020-08-14 10:35:49.777][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:49.777][14][debug][connection] [source/common/network/connection_impl.cc:104] [C1948] closing data_to_write=0 type=1\r\n[2020-08-14 10:35:49.777][14][debug][connection] [source/common/network/connection_impl.cc:193] [C1948] closing socket: 1\r\n[2020-08-14 10:35:49.777][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:298] [C1948] SSL shutdown: rc=0\r\n[2020-08-14 10:35:49.777][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:226] [C1948] \r\n[2020-08-14 10:35:49.777][14][debug][client] [source/common/http/codec_client.cc:88] [C1948] disconnect. resetting 0 pending requests\r\n[2020-08-14 10:35:49.777][14][debug][pool] [source/common/http/http1/conn_pool.cc:136] [C1948] client disconnected, failure reason: \r\n[2020-08-14 10:35:49.777][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=2)\r\n[2020-08-14 10:35:49.777][14][debug][http] [source/common/http/conn_manager_impl.cc:1354] [C1916][S6524082276721005270] Sending local reply with details upstream_response_timeout\r\n[2020-08-14 10:35:49.777][14][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1916][S6524082276721005270] encoding headers via codec (end_stream=false):\r\n':status', '504'\r\n'content-length', '24'\r\n'content-type', 'text/plain'\r\n'date', 'Fri, 14 Aug 2020 10:35:49 GMT'\r\n'server', 'envoy'\r\n\r\n[2020-08-14 10:35:49.777][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1916] writing 130 bytes, end_stream false\r\n[2020-08-14 10:35:49.777][14][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1916][S6524082276721005270] encoding data via codec (size=24 end_stream=true)\r\n[2020-08-14 10:35:49.777][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1916] writing 24 bytes, end_stream false\r\n[2020-08-14 10:35:49.777][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=3)\r\n[2020-08-14 10:35:49.777][14][trace][connection] [source/common/network/connection_impl.cc:293] [C1916] readDisable: enabled=false disable=false\r\n[2020-08-14 10:35:49.777][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=3)\r\n2020-08-14T10:35:34.778Z [INFO] [ACCESS_LOG_INGRESS]:[Request_Id: 5dde75fe-11c3-446e-8e21-478fb13c82cc], Protocol: HTTP/1.1, Method : GET, Path: /pthru?d=20000, Response Code: 504, Host: test.host, Duration: 14999, Upstream Service Time: -, Bytes Received: 0, Bytes Sent: 24\r\n[2020-08-14 10:35:49.777][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1916] socket event: 2\r\n[2020-08-14 10:35:49.777][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1916] write ready\r\n[2020-08-14 10:35:49.777][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C1916] ssl write returns: 154\r\n[2020-08-14 10:35:50.042][6][debug][main] [source/server/server.cc:175] flushing stats\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1916] socket event: 3\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1916] write ready\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:500] [C1916] read ready\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1916] ssl read returns: 244\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1916] ssl read returns: -1\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C1916] ssl read 244 bytes into 1 slices\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1916] parsing 244 bytes\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1916] message begin\r\n[2020-08-14 10:35:50.204][14][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1916] new stream\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Host value=test.host\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=User-Agent value=PostmanRuntime/7.26.3\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Accept value=*/*\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Cache-Control value=no-cache\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Postman-Token value=89dd6ee9-2ec4-405b-8303-5743fc405d59\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Accept-Encoding value=gzip, deflate, br\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1916] headers complete\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Connection value=keep-alive\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1916] message complete\r\n[2020-08-14 10:35:50.204][14][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1916][S14993064456358697936] request headers complete (end_stream=true):\r\n':authority', 'test.host'\r\n':path', '/pthru?d=20000'\r\n':method', 'GET'\r\n'user-agent', 'PostmanRuntime/7.26.3'\r\n'accept', '*/*'\r\n'cache-control', 'no-cache'\r\n'postman-token', '89dd6ee9-2ec4-405b-8303-5743fc405d59'\r\n'accept-encoding', 'gzip, deflate, br'\r\n'connection', 'keep-alive'\r\n\r\n[2020-08-14 10:35:50.204][14][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1916][S14993064456358697936] request end stream\r\n[2020-08-14 10:35:50.204][14][debug][router] [source/common/router/router.cc:434] [C1916][S14993064456358697936] cluster 'policyengine-t1' match for URL '/pthru?d=20000'\r\n[2020-08-14 10:35:50.204][14][debug][router] [source/common/router/router.cc:549] [C1916][S14993064456358697936] router decoding headers:\r\n':authority', 'test.host'\r\n':path', '/pthru?d=20000'\r\n':method', 'GET'\r\n':scheme', 'https'\r\n'user-agent', 'PostmanRuntime/7.26.3'\r\n'accept', '*/*'\r\n'cache-control', 'no-cache'\r\n'postman-token', '89dd6ee9-2ec4-405b-8303-5743fc405d59'\r\n'accept-encoding', 'gzip, deflate, br'\r\n'x-forwarded-proto', 'https'\r\n'x-envoy-downstream-service-cluster', 'cluster1'\r\n'x-envoy-downstream-service-node', 'ingressnode'\r\n'x-request-id', '7c1115df-3b51-458c-ab2e-ce744b40c6b0'\r\n'x-envoy-expected-rq-timeout-ms', '15000'\r\n\r\n[2020-08-14 10:35:50.204][14][debug][pool] [source/common/http/http1/conn_pool.cc:95] creating a new connection\r\n[2020-08-14 10:35:50.204][14][debug][client] [source/common/http/codec_client.cc:31] [C1955] connecting\r\n[2020-08-14 10:35:50.204][14][debug][connection] [source/common/network/connection_impl.cc:711] [C1955] connecting to 100.69.188.67:8443\r\n[2020-08-14 10:35:50.204][14][debug][connection] [source/common/network/connection_impl.cc:720] [C1955] connection in progress\r\n[2020-08-14 10:35:50.204][14][debug][pool] [source/common/http/conn_pool_base.cc:20] queueing request due to no available connections\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1916][S14993064456358697936] decode headers called: filter=0x564e4337e060 status=1\r\n[2020-08-14 10:35:50.204][14][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1916] parsed 244 bytes\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:293] [C1916] readDisable: enabled=true disable=true\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1916] socket event: 2\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1916] write ready\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1955] socket event: 2\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1955] write ready\r\n[2020-08-14 10:35:50.204][14][debug][connection] [source/common/network/connection_impl.cc:559] [C1955] connected\r\n[2020-08-14 10:35:50.204][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:191] [C1955] handshake expecting read\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1955] socket event: 3\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1955] write ready\r\n[2020-08-14 10:35:50.204][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:176] [C1955] handshake complete\r\n[2020-08-14 10:35:50.204][14][debug][client] [source/common/http/codec_client.cc:69] [C1955] connected\r\n[2020-08-14 10:35:50.204][14][debug][pool] [source/common/http/http1/conn_pool.cc:249] [C1955] attaching to next request\r\n[2020-08-14 10:35:50.204][14][debug][router] [source/common/router/router.cc:1618] [C1916][S14993064456358697936] pool ready\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1955] writing 448 bytes, end_stream false\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1955] write ready\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C1955] ssl write returns: 448\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:500] [C1955] read ready\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1955] ssl read returns: -1\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C1955] ssl read 0 bytes into 0 slices\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1955] socket event: 2\r\n[2020-08-14 10:35:50.204][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1955] write ready\r\n[2020-08-14 10:35:50.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1956] new connection\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1956] socket event: 2\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1956] write ready\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1956] socket event: 3\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1956] write ready\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1956] read ready\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1956] read returns: 118\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1956] read error: Resource temporarily unavailable\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1956] parsing 118 bytes\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1956] message begin\r\n[2020-08-14 10:35:50.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1956] new stream\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1956] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1956] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1956] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1956] headers complete\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1956] completed header: key=Connection value=close\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1956] message complete\r\n[2020-08-14 10:35:50.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1956][S6915782699599929615] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:50.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1956][S6915782699599929615] request end stream\r\n[2020-08-14 10:35:50.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1956][S6915782699599929615] request complete: path: /ready\r\n[2020-08-14 10:35:50.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1956][S6915782699599929615] closing connection due to connection close header\r\n[2020-08-14 10:35:50.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1956][S6915782699599929615] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:35:50 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1956] writing 228 bytes, end_stream false\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1956][S6915782699599929615] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1956] writing 15 bytes, end_stream false\r\n[2020-08-14 10:35:50.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:50.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1956] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1956][S6915782699599929615] decode headers called: filter=0x564e4337e7e0 status=1\r\n[2020-08-14 10:35:50.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1956] parsed 118 bytes\r\n[2020-08-14 10:35:50.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1956] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:50.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:35:50.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1956] socket event: 2\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1956] write ready\r\n[2020-08-14 10:35:50.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1956] write returns: 243\r\n[2020-08-14 10:35:50.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1956] write flush complete\r\n[2020-08-14 10:35:50.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1956] closing socket: 1\r\n[2020-08-14 10:35:50.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1956] adding to cleanup list\r\n[2020-08-14 10:35:50.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:50.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:53.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1957] new connection\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1957] socket event: 2\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1957] write ready\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1957] socket event: 3\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1957] write ready\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1957] read ready\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1957] read returns: 118\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1957] read error: Resource temporarily unavailable\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1957] parsing 118 bytes\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1957] message begin\r\n[2020-08-14 10:35:53.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1957] new stream\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1957] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1957] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1957] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1957] headers complete\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1957] completed header: key=Connection value=close\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1957] message complete\r\n[2020-08-14 10:35:53.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1957][S1757894607638928359] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:53.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1957][S1757894607638928359] request end stream\r\n[2020-08-14 10:35:53.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1957][S1757894607638928359] request complete: path: /ready\r\n[2020-08-14 10:35:53.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1957][S1757894607638928359] closing connection due to connection close header\r\n[2020-08-14 10:35:53.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1957][S1757894607638928359] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:35:53 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1957] writing 228 bytes, end_stream false\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1957][S1757894607638928359] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1957] writing 15 bytes, end_stream false\r\n[2020-08-14 10:35:53.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:53.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1957] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1957][S1757894607638928359] decode headers called: filter=0x564e4337e7e0 status=1\r\n[2020-08-14 10:35:53.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1957] parsed 118 bytes\r\n[2020-08-14 10:35:53.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1957] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:53.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:35:53.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1957] socket event: 2\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1957] write ready\r\n[2020-08-14 10:35:53.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1957] write returns: 243\r\n[2020-08-14 10:35:53.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1957] write flush complete\r\n[2020-08-14 10:35:53.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1957] closing socket: 1\r\n[2020-08-14 10:35:53.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1957] adding to cleanup list\r\n[2020-08-14 10:35:53.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:53.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.327][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:35:54.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:35:54.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:35:54.327][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.327][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.327][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:35:54.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:35:54.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:35:54.327][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.327][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 7322\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 7322 bytes into 1 slices\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 7322 bytes\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:54.514][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=4636 end_stream=false)\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.auth.Secret at version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.auth.Secret: version_info: \"2020-08-14 10:35:54.513647013 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"testmst\"\r\nresource_names: \"t1-mockkeystore\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.auth.Secret\"\r\nresponse_nonce: \"3957\"\r\n\r\n[2020-08-14 10:35:54.514][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 232 bytes\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:54.514][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=1879 end_stream=false)\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Listener at version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-http hash=15192452732192267292\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-http'. no add/update\r\n[2020-08-14 10:35:54.514][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-http' skipped\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-tls hash=9325604105818206458\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-tls'. no add/update\r\n[2020-08-14 10:35:54.514][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-tls' skipped\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Listener accepted with 2 resources with version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Listener: version_info: \"2020-08-14 10:35:54.513647013 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Listener\"\r\nresponse_nonce: \"3958\"\r\n\r\n[2020-08-14 10:35:54.514][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 193 bytes\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:54.514][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=431 end_stream=false)\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Cluster at version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:35:54.514][6][info][upstream] [source/common/upstream/cds_api_impl.cc:67] cds: add 1 cluster(s), remove 1 cluster(s)\r\n[2020-08-14 10:35:54.514][6][debug][upstream] [source/common/upstream/cds_api_impl.cc:85] cds: add/update cluster 'policyengine-t1' skipped\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Cluster accepted with 1 resources with version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Cluster: version_info: \"2020-08-14 10:35:54.513647013 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Cluster\"\r\nresponse_nonce: \"3959\"\r\n\r\n[2020-08-14 10:35:54.514][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 192 bytes\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:54.514][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=340 end_stream=false)\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.RouteConfiguration at version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:35:54.513647013 +0000 UTC\r\n[2020-08-14 10:35:54.514][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.RouteConfiguration: version_info: \"2020-08-14 10:35:54.513647013 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"route-t1-t1-vh1\"\r\nresource_names: \"ingress-http-route-config\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.RouteConfiguration\"\r\nresponse_nonce: \"3960\"\r\n\r\n[2020-08-14 10:35:54.514][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 247 bytes\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 7322 bytes\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 873 bytes, end_stream false\r\n[2020-08-14 10:35:54.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=0\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:54.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 873\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 30\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 30 bytes into 1 slices\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 30 bytes\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=6, flags=0\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=6\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 30 bytes\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:666] [C5] about to send frame type=6, flags=1\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:720] [C5] send data: bytes=17\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 17 bytes, end_stream false\r\n[2020-08-14 10:35:54.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=6\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:54.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 17\r\n[2020-08-14 10:35:54.636][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:35:54.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:35:54.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:35:54.636][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.636][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.636][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:35:54.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:35:54.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:35:54.636][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:54.636][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:55.039][6][debug][main] [source/server/server.cc:175] flushing stats\r\n[2020-08-14 10:35:56.121][14][debug][router] [source/common/router/router.cc:724] [C1633][S10994230258690132099] upstream timeout\r\n[2020-08-14 10:35:56.121][14][debug][router] [source/common/router/router.cc:1564] [C1633][S10994230258690132099] resetting pool request\r\n[2020-08-14 10:35:56.121][14][debug][client] [source/common/http/codec_client.cc:111] [C1951] request reset\r\n[2020-08-14 10:35:56.121][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:56.121][14][debug][connection] [source/common/network/connection_impl.cc:104] [C1951] closing data_to_write=0 type=1\r\n[2020-08-14 10:35:56.121][14][debug][connection] [source/common/network/connection_impl.cc:193] [C1951] closing socket: 1\r\n[2020-08-14 10:35:56.121][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:298] [C1951] SSL shutdown: rc=0\r\n[2020-08-14 10:35:56.121][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:226] [C1951] \r\n[2020-08-14 10:35:56.121][14][debug][client] [source/common/http/codec_client.cc:88] [C1951] disconnect. resetting 0 pending requests\r\n[2020-08-14 10:35:56.121][14][debug][pool] [source/common/http/http1/conn_pool.cc:136] [C1951] client disconnected, failure reason: \r\n[2020-08-14 10:35:56.121][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=2)\r\n[2020-08-14 10:35:56.121][14][debug][http] [source/common/http/conn_manager_impl.cc:1354] [C1633][S10994230258690132099] Sending local reply with details upstream_response_timeout\r\n[2020-08-14 10:35:56.121][14][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1633][S10994230258690132099] encoding headers via codec (end_stream=false):\r\n':status', '504'\r\n'content-length', '24'\r\n'content-type', 'text/plain'\r\n'date', 'Fri, 14 Aug 2020 10:35:56 GMT'\r\n'server', 'envoy'\r\n\r\n[2020-08-14 10:35:56.121][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1633] writing 130 bytes, end_stream false\r\n[2020-08-14 10:35:56.121][14][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1633][S10994230258690132099] encoding data via codec (size=24 end_stream=true)\r\n[2020-08-14 10:35:56.121][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1633] writing 24 bytes, end_stream false\r\n[2020-08-14 10:35:56.121][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=3)\r\n[2020-08-14 10:35:56.121][14][trace][connection] [source/common/network/connection_impl.cc:293] [C1633] readDisable: enabled=false disable=false\r\n[2020-08-14 10:35:56.121][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=3)\r\n2020-08-14T10:35:41.121Z [INFO] [ACCESS_LOG_INGRESS]:[Request_Id: a68e0545-1402-4aa9-b3c9-bd527a89b31d], Protocol: HTTP/1.1, Method : GET, Path: /pthru?d=20000, Response Code: 504, Host: test.host, Duration: 15000, Upstream Service Time: -, Bytes Received: 0, Bytes Sent: 24\r\n[2020-08-14 10:35:56.121][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1633] socket event: 2\r\n[2020-08-14 10:35:56.121][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1633] write ready\r\n[2020-08-14 10:35:56.121][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C1633] ssl write returns: 154\r\n[2020-08-14 10:35:56.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1958] new connection\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1958] socket event: 2\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1958] write ready\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1958] socket event: 3\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1958] write ready\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1958] read ready\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1958] read returns: 118\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1958] read error: Resource temporarily unavailable\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1958] parsing 118 bytes\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1958] message begin\r\n[2020-08-14 10:35:56.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1958] new stream\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1958] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1958] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1958] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1958] headers complete\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1958] completed header: key=Connection value=close\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1958] message complete\r\n[2020-08-14 10:35:56.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1958][S9710212564483937592] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:56.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1958][S9710212564483937592] request end stream\r\n[2020-08-14 10:35:56.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1958][S9710212564483937592] request complete: path: /ready\r\n[2020-08-14 10:35:56.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1958][S9710212564483937592] closing connection due to connection close header\r\n[2020-08-14 10:35:56.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1958][S9710212564483937592] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:35:56 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1958] writing 228 bytes, end_stream false\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1958][S9710212564483937592] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1958] writing 15 bytes, end_stream false\r\n[2020-08-14 10:35:56.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:56.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1958] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1958][S9710212564483937592] decode headers called: filter=0x564e4337eba0 status=1\r\n[2020-08-14 10:35:56.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1958] parsed 118 bytes\r\n[2020-08-14 10:35:56.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1958] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:56.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:35:56.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1958] socket event: 2\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1958] write ready\r\n[2020-08-14 10:35:56.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1958] write returns: 243\r\n[2020-08-14 10:35:56.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1958] write flush complete\r\n[2020-08-14 10:35:56.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1958] closing socket: 1\r\n[2020-08-14 10:35:56.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1958] adding to cleanup list\r\n[2020-08-14 10:35:56.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:56.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 7322\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 7322 bytes into 1 slices\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 7322 bytes\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:59.511][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=4636 end_stream=false)\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.auth.Secret at version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.auth.Secret: version_info: \"2020-08-14 10:35:59.510821916 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"testmst\"\r\nresource_names: \"t1-mockkeystore\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.auth.Secret\"\r\nresponse_nonce: \"3961\"\r\n\r\n[2020-08-14 10:35:59.511][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 232 bytes\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:59.511][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=340 end_stream=false)\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.RouteConfiguration at version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.RouteConfiguration: version_info: \"2020-08-14 10:35:59.510821916 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"route-t1-t1-vh1\"\r\nresource_names: \"ingress-http-route-config\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.RouteConfiguration\"\r\nresponse_nonce: \"3962\"\r\n\r\n[2020-08-14 10:35:59.511][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 247 bytes\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:59.511][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=1879 end_stream=false)\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Listener at version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-tls hash=9325604105818206458\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-tls'. no add/update\r\n[2020-08-14 10:35:59.511][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-tls' skipped\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-http hash=15192452732192267292\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-http'. no add/update\r\n[2020-08-14 10:35:59.511][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-http' skipped\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Listener accepted with 2 resources with version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Listener: version_info: \"2020-08-14 10:35:59.510821916 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Listener\"\r\nresponse_nonce: \"3963\"\r\n\r\n[2020-08-14 10:35:59.511][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 193 bytes\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:35:59.511][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=431 end_stream=false)\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Cluster at version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:35:59.511][6][info][upstream] [source/common/upstream/cds_api_impl.cc:67] cds: add 1 cluster(s), remove 1 cluster(s)\r\n[2020-08-14 10:35:59.511][6][debug][upstream] [source/common/upstream/cds_api_impl.cc:85] cds: add/update cluster 'policyengine-t1' skipped\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:35:59.511][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Cluster accepted with 1 resources with version 2020-08-14 10:35:59.510821916 +0000 UTC\r\n[2020-08-14 10:35:59.511][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Cluster: version_info: \"2020-08-14 10:35:59.510821916 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Cluster\"\r\nresponse_nonce: \"3964\"\r\n\r\n[2020-08-14 10:35:59.511][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 192 bytes\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 7322 bytes\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 873 bytes, end_stream false\r\n[2020-08-14 10:35:59.511][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=0\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:59.511][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 873\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 43\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 43 bytes into 1 slices\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 43 bytes\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=6, flags=0\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=6\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 43 bytes\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:666] [C5] about to send frame type=6, flags=1\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:720] [C5] send data: bytes=17\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 17 bytes, end_stream false\r\n[2020-08-14 10:35:59.512][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=6\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:35:59.512][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 17\r\n[2020-08-14 10:35:59.528][6][trace][upstream] [source/common/upstream/strict_dns_cluster.cc:92] starting async DNS resolution for sapapim-rtcontroller.apim-lrt.svc.cluster.local\r\n[2020-08-14 10:35:59.528][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.529][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.529][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.529][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.530][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.530][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.530][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.530][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.531][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.532][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:35:59.532][6][trace][upstream] [source/common/upstream/strict_dns_cluster.cc:99] async DNS resolution complete for sapapim-rtcontroller.apim-lrt.svc.cluster.local\r\n[2020-08-14 10:35:59.532][6][debug][upstream] [source/common/upstream/upstream_impl.cc:250] transport socket match, socket default selected for host with address 100.68.89.88:443\r\n[2020-08-14 10:35:59.532][6][debug][upstream] [source/common/upstream/strict_dns_cluster.cc:156] DNS refresh rate reset for sapapim-rtcontroller.apim-lrt.svc.cluster.local, refresh rate 30000 ms\r\n[2020-08-14 10:35:59.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1959] new connection\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1959] socket event: 2\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1959] write ready\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1959] socket event: 3\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1959] write ready\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1959] read ready\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1959] read returns: 118\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1959] read error: Resource temporarily unavailable\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1959] parsing 118 bytes\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1959] message begin\r\n[2020-08-14 10:35:59.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1959] new stream\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1959] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1959] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1959] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1959] headers complete\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1959] completed header: key=Connection value=close\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1959] message complete\r\n[2020-08-14 10:35:59.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1959][S9808164756817688405] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:59.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1959][S9808164756817688405] request end stream\r\n[2020-08-14 10:35:59.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1959][S9808164756817688405] request complete: path: /ready\r\n[2020-08-14 10:35:59.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1959][S9808164756817688405] closing connection due to connection close header\r\n[2020-08-14 10:35:59.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1959][S9808164756817688405] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:35:59 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1959] writing 228 bytes, end_stream false\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1959][S9808164756817688405] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1959] writing 15 bytes, end_stream false\r\n[2020-08-14 10:35:59.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:59.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1959] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1959][S9808164756817688405] decode headers called: filter=0x564e4337e7e0 status=1\r\n[2020-08-14 10:35:59.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1959] parsed 118 bytes\r\n[2020-08-14 10:35:59.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1959] closing data_to_write=243 type=2\r\n[2020-08-14 10:35:59.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:35:59.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1959] socket event: 2\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1959] write ready\r\n[2020-08-14 10:35:59.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1959] write returns: 243\r\n[2020-08-14 10:35:59.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1959] write flush complete\r\n[2020-08-14 10:35:59.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1959] closing socket: 1\r\n[2020-08-14 10:35:59.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1959] adding to cleanup list\r\n[2020-08-14 10:35:59.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:35:59.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:00.041][6][debug][main] [source/server/server.cc:175] flushing stats\r\n[2020-08-14 10:36:02.308][6][trace][upstream] [source/common/upstream/strict_dns_cluster.cc:92] starting async DNS resolution for policyengine-t1.apim-lrt.svc.cluster.local\r\n[2020-08-14 10:36:02.308][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.308][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.309][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.309][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.310][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.310][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.310][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.310][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.311][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.311][6][trace][upstream] [source/common/network/dns_impl.cc:160] Setting DNS resolution timer for 5000 milliseconds\r\n[2020-08-14 10:36:02.312][6][trace][upstream] [source/common/upstream/strict_dns_cluster.cc:99] async DNS resolution complete for policyengine-t1.apim-lrt.svc.cluster.local\r\n[2020-08-14 10:36:02.312][6][debug][upstream] [source/common/upstream/upstream_impl.cc:250] transport socket match, socket default selected for host with address 100.69.188.67:8443\r\n[2020-08-14 10:36:02.312][6][debug][upstream] [source/common/upstream/strict_dns_cluster.cc:156] DNS refresh rate reset for policyengine-t1.apim-lrt.svc.cluster.local, refresh rate 30000 ms\r\n[2020-08-14 10:36:02.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1960] new connection\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1960] socket event: 2\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1960] write ready\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1960] socket event: 3\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1960] write ready\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1960] read ready\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1960] read returns: 118\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1960] read error: Resource temporarily unavailable\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1960] parsing 118 bytes\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1960] message begin\r\n[2020-08-14 10:36:02.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1960] new stream\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1960] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1960] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1960] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1960] headers complete\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1960] completed header: key=Connection value=close\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1960] message complete\r\n[2020-08-14 10:36:02.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1960][S5133849145229437806] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:02.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1960][S5133849145229437806] request end stream\r\n[2020-08-14 10:36:02.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1960][S5133849145229437806] request complete: path: /ready\r\n[2020-08-14 10:36:02.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1960][S5133849145229437806] closing connection due to connection close header\r\n[2020-08-14 10:36:02.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1960][S5133849145229437806] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:36:02 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1960] writing 228 bytes, end_stream false\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1960][S5133849145229437806] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1960] writing 15 bytes, end_stream false\r\n[2020-08-14 10:36:02.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:02.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1960] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1960][S5133849145229437806] decode headers called: filter=0x564e4337e6c0 status=1\r\n[2020-08-14 10:36:02.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1960] parsed 118 bytes\r\n[2020-08-14 10:36:02.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1960] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:02.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:36:02.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1960] socket event: 2\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1960] write ready\r\n[2020-08-14 10:36:02.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1960] write returns: 243\r\n[2020-08-14 10:36:02.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1960] write flush complete\r\n[2020-08-14 10:36:02.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1960] closing socket: 1\r\n[2020-08-14 10:36:02.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1960] adding to cleanup list\r\n[2020-08-14 10:36:02.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:02.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1341] socket event: 3\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1341] write ready\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:500] [C1341] read ready\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1341] ssl read returns: 244\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1341] ssl read returns: -1\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C1341] ssl read 244 bytes into 1 slices\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1341] parsing 244 bytes\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1341] message begin\r\n[2020-08-14 10:36:02.954][14][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1341] new stream\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=Host value=test.host\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=User-Agent value=PostmanRuntime/7.22.0\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=Accept value=*/*\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=Cache-Control value=no-cache\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=Postman-Token value=3e3bae22-3458-489f-b8df-c909387119d7\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=Accept-Encoding value=gzip, deflate, br\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1341] headers complete\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1341] completed header: key=Connection value=keep-alive\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1341] message complete\r\n[2020-08-14 10:36:02.954][14][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1341][S5885534533524513809] request headers complete (end_stream=true):\r\n':authority', 'test.host'\r\n':path', '/pthru?d=20000'\r\n':method', 'GET'\r\n'user-agent', 'PostmanRuntime/7.22.0'\r\n'accept', '*/*'\r\n'cache-control', 'no-cache'\r\n'postman-token', '3e3bae22-3458-489f-b8df-c909387119d7'\r\n'accept-encoding', 'gzip, deflate, br'\r\n'connection', 'keep-alive'\r\n\r\n[2020-08-14 10:36:02.954][14][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1341][S5885534533524513809] request end stream\r\n[2020-08-14 10:36:02.954][14][debug][router] [source/common/router/router.cc:434] [C1341][S5885534533524513809] cluster 'policyengine-t1' match for URL '/pthru?d=20000'\r\n[2020-08-14 10:36:02.954][14][debug][router] [source/common/router/router.cc:549] [C1341][S5885534533524513809] router decoding headers:\r\n':authority', 'test.host'\r\n':path', '/pthru?d=20000'\r\n':method', 'GET'\r\n':scheme', 'https'\r\n'user-agent', 'PostmanRuntime/7.22.0'\r\n'accept', '*/*'\r\n'cache-control', 'no-cache'\r\n'postman-token', '3e3bae22-3458-489f-b8df-c909387119d7'\r\n'accept-encoding', 'gzip, deflate, br'\r\n'x-forwarded-proto', 'https'\r\n'x-envoy-downstream-service-cluster', 'cluster1'\r\n'x-envoy-downstream-service-node', 'ingressnode'\r\n'x-request-id', 'f5f4b35c-0e90-4197-b2c3-6186e4bb0fe5'\r\n'x-envoy-expected-rq-timeout-ms', '15000'\r\n\r\n[2020-08-14 10:36:02.954][14][debug][pool] [source/common/http/http1/conn_pool.cc:95] creating a new connection\r\n[2020-08-14 10:36:02.954][14][debug][client] [source/common/http/codec_client.cc:31] [C1961] connecting\r\n[2020-08-14 10:36:02.954][14][debug][connection] [source/common/network/connection_impl.cc:711] [C1961] connecting to 100.69.188.67:8443\r\n[2020-08-14 10:36:02.954][14][debug][connection] [source/common/network/connection_impl.cc:720] [C1961] connection in progress\r\n[2020-08-14 10:36:02.954][14][debug][pool] [source/common/http/conn_pool_base.cc:20] queueing request due to no available connections\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1341][S5885534533524513809] decode headers called: filter=0x564e4337e120 status=1\r\n[2020-08-14 10:36:02.954][14][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1341] parsed 244 bytes\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:293] [C1341] readDisable: enabled=true disable=true\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1341] socket event: 2\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1341] write ready\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1961] socket event: 2\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1961] write ready\r\n[2020-08-14 10:36:02.954][14][debug][connection] [source/common/network/connection_impl.cc:559] [C1961] connected\r\n[2020-08-14 10:36:02.954][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:191] [C1961] handshake expecting read\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1961] socket event: 3\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1961] write ready\r\n[2020-08-14 10:36:02.954][14][debug][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:176] [C1961] handshake complete\r\n[2020-08-14 10:36:02.954][14][debug][client] [source/common/http/codec_client.cc:69] [C1961] connected\r\n[2020-08-14 10:36:02.954][14][debug][pool] [source/common/http/http1/conn_pool.cc:249] [C1961] attaching to next request\r\n[2020-08-14 10:36:02.954][14][debug][router] [source/common/router/router.cc:1618] [C1341][S5885534533524513809] pool ready\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1961] writing 448 bytes, end_stream false\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1961] write ready\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C1961] ssl write returns: 448\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:500] [C1961] read ready\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1961] ssl read returns: -1\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C1961] ssl read 0 bytes into 0 slices\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1961] socket event: 2\r\n[2020-08-14 10:36:02.954][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1961] write ready\r\n[2020-08-14 10:36:04.326][13][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:36:04.326][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: 0\r\n[2020-08-14 10:36:04.326][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:36:04.326][13][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.326][13][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.326][13][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:36:04.326][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:36:04.326][13][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:36:04.326][13][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.326][13][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.449][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1962] new connection\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1962] socket event: 2\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1962] write ready\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1962] socket event: 3\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1962] write ready\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1962] read ready\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1962] read returns: 118\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1962] read error: Resource temporarily unavailable\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1962] parsing 118 bytes\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1962] message begin\r\n[2020-08-14 10:36:04.449][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1962] new stream\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1962] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1962] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1962] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1962] headers complete\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1962] completed header: key=Connection value=close\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1962] message complete\r\n[2020-08-14 10:36:04.449][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1962][S2492011494506520494] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:04.449][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1962][S2492011494506520494] request end stream\r\n[2020-08-14 10:36:04.449][6][debug][admin] [source/server/http/admin.cc:1200] [C1962][S2492011494506520494] request complete: path: /ready\r\n[2020-08-14 10:36:04.449][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1962][S2492011494506520494] closing connection due to connection close header\r\n[2020-08-14 10:36:04.449][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1962][S2492011494506520494] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:36:04 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1962] writing 228 bytes, end_stream false\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1962][S2492011494506520494] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1962] writing 15 bytes, end_stream false\r\n[2020-08-14 10:36:04.449][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.449][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1962] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1962][S2492011494506520494] decode headers called: filter=0x564e4337e6c0 status=1\r\n[2020-08-14 10:36:04.449][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1962] parsed 118 bytes\r\n[2020-08-14 10:36:04.449][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1962] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:04.449][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:36:04.449Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1962] socket event: 2\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1962] write ready\r\n[2020-08-14 10:36:04.449][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1962] write returns: 243\r\n[2020-08-14 10:36:04.449][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1962] write flush complete\r\n[2020-08-14 10:36:04.449][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1962] closing socket: 1\r\n[2020-08-14 10:36:04.449][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1962] adding to cleanup list\r\n[2020-08-14 10:36:04.449][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.449][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.515][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:36:04.515][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:04.515][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:36:04.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 7322\r\n[2020-08-14 10:36:04.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:36:04.515][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 7322 bytes into 1 slices\r\n[2020-08-14 10:36:04.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 7322 bytes\r\n[2020-08-14 10:36:04.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:04.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:04.515][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=4636 end_stream=false)\r\n[2020-08-14 10:36:04.515][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.auth.Secret at version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.515][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.515][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.515][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.auth.Secret: version_info: \"2020-08-14 10:36:04.515233532 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"testmst\"\r\nresource_names: \"t1-mockkeystore\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.auth.Secret\"\r\nresponse_nonce: \"3965\"\r\n\r\n[2020-08-14 10:36:04.515][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 232 bytes\r\n[2020-08-14 10:36:04.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:04.515][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:04.515][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=431 end_stream=false)\r\n[2020-08-14 10:36:04.515][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Cluster at version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:36:04.516][6][info][upstream] [source/common/upstream/cds_api_impl.cc:67] cds: add 1 cluster(s), remove 1 cluster(s)\r\n[2020-08-14 10:36:04.516][6][debug][upstream] [source/common/upstream/cds_api_impl.cc:85] cds: add/update cluster 'policyengine-t1' skipped\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Cluster accepted with 1 resources with version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Cluster: version_info: \"2020-08-14 10:36:04.515233532 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Cluster\"\r\nresponse_nonce: \"3966\"\r\n\r\n[2020-08-14 10:36:04.516][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 192 bytes\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:04.516][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=340 end_stream=false)\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.RouteConfiguration at version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.RouteConfiguration: version_info: \"2020-08-14 10:36:04.515233532 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"route-t1-t1-vh1\"\r\nresource_names: \"ingress-http-route-config\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.RouteConfiguration\"\r\nresponse_nonce: \"3967\"\r\n\r\n[2020-08-14 10:36:04.516][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 247 bytes\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:04.516][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=1879 end_stream=false)\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Listener at version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-http hash=15192452732192267292\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-http'. no add/update\r\n[2020-08-14 10:36:04.516][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-http' skipped\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-tls hash=9325604105818206458\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-tls'. no add/update\r\n[2020-08-14 10:36:04.516][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-tls' skipped\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:36:04.516][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Listener accepted with 2 resources with version 2020-08-14 10:36:04.515233532 +0000 UTC\r\n[2020-08-14 10:36:04.516][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Listener: version_info: \"2020-08-14 10:36:04.515233532 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Listener\"\r\nresponse_nonce: \"3968\"\r\n\r\n[2020-08-14 10:36:04.516][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 193 bytes\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 7322 bytes\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 873 bytes, end_stream false\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=0\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 873\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 30\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 30 bytes into 1 slices\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 30 bytes\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=6, flags=0\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=6\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 30 bytes\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:666] [C5] about to send frame type=6, flags=1\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:720] [C5] send data: bytes=17\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 17 bytes, end_stream false\r\n[2020-08-14 10:36:04.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=6\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:04.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 17\r\n[2020-08-14 10:36:04.636][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:36:04.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:36:04.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:36:04.636][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.636][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.636][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:36:04.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:36:04.636][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:36:04.636][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:04.636][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:05.041][6][debug][main] [source/server/server.cc:175] flushing stats\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1955] socket event: 3\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1955] write ready\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:500] [C1955] read ready\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1955] ssl read returns: 144\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1955] ssl read returns: -1\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C1955] ssl read 144 bytes into 1 slices\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1955] parsing 144 bytes\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1955] message begin\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1955] completed header: key=Content-Length value=14\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1955] completed header: key=Content-Type value=text/plain\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1955] completed header: key=Date value=Fri, 14 Aug 2020 10:36:05 GMT\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1955] headers complete\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1955] completed header: key=Server value=envoy\r\n[2020-08-14 10:36:05.206][14][debug][router] [source/common/router/router.cc:1036] [C1916][S14993064456358697936] upstream headers complete: end_stream=false\r\n[2020-08-14 10:36:05.206][14][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1916][S14993064456358697936] encoding headers via codec (end_stream=false):\r\n':status', '408'\r\n'content-length', '14'\r\n'content-type', 'text/plain'\r\n'date', 'Fri, 14 Aug 2020 10:36:05 GMT'\r\n'server', 'envoy'\r\n'x-envoy-upstream-service-time', '15001'\r\n\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1916] writing 168 bytes, end_stream false\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1916][S14993064456358697936] encoding data via codec (size=14 end_stream=false)\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1916] writing 14 bytes, end_stream false\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1955] message complete\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:827] [C1955] message complete\r\n[2020-08-14 10:36:05.206][14][debug][client] [source/common/http/codec_client.cc:101] [C1955] response complete\r\n[2020-08-14 10:36:05.206][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1916][S14993064456358697936] encoding data via codec (size=0 end_stream=true)\r\n[2020-08-14 10:36:05.206][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=2)\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:293] [C1916] readDisable: enabled=false disable=false\r\n[2020-08-14 10:36:05.206][14][debug][pool] [source/common/http/http1/conn_pool.cc:206] [C1955] response complete\r\n[2020-08-14 10:36:05.206][14][debug][pool] [source/common/http/http1/conn_pool.cc:244] [C1955] moving to ready\r\n[2020-08-14 10:36:05.206][14][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1955] parsed 144 bytes\r\n[2020-08-14 10:36:05.206][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=2)\r\n2020-08-14T10:35:50.204Z [INFO] [ACCESS_LOG_INGRESS]:[Request_Id: 7c1115df-3b51-458c-ab2e-ce744b40c6b0], Protocol: HTTP/1.1, Method : GET, Path: /pthru?d=20000, Response Code: 408, Host: test.host, Duration: 15001, Upstream Service Time: 15001, Bytes Received: 0, Bytes Sent: 14\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1916] socket event: 2\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1916] write ready\r\n[2020-08-14 10:36:05.206][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C1916] ssl write returns: 182\r\n[2020-08-14 10:36:05.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1963] new connection\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1963] socket event: 2\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1963] write ready\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1963] socket event: 3\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1963] write ready\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1963] read ready\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1963] read returns: 118\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1963] read error: Resource temporarily unavailable\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1963] parsing 118 bytes\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1963] message begin\r\n[2020-08-14 10:36:05.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1963] new stream\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1963] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1963] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1963] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1963] headers complete\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1963] completed header: key=Connection value=close\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1963] message complete\r\n[2020-08-14 10:36:05.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1963][S17788979837976716579] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:05.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1963][S17788979837976716579] request end stream\r\n[2020-08-14 10:36:05.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1963][S17788979837976716579] request complete: path: /ready\r\n[2020-08-14 10:36:05.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1963][S17788979837976716579] closing connection due to connection close header\r\n[2020-08-14 10:36:05.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1963][S17788979837976716579] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:36:05 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1963] writing 228 bytes, end_stream false\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1963][S17788979837976716579] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1963] writing 15 bytes, end_stream false\r\n[2020-08-14 10:36:05.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:05.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1963] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1963][S17788979837976716579] decode headers called: filter=0x564e4337e7e0 status=1\r\n[2020-08-14 10:36:05.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1963] parsed 118 bytes\r\n[2020-08-14 10:36:05.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1963] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:05.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:36:05.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1963] socket event: 2\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1963] write ready\r\n[2020-08-14 10:36:05.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1963] write returns: 243\r\n[2020-08-14 10:36:05.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1963] write flush complete\r\n[2020-08-14 10:36:05.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1963] closing socket: 1\r\n[2020-08-14 10:36:05.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1963] adding to cleanup list\r\n[2020-08-14 10:36:05.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:05.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:05.726][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1916] socket event: 3\r\n[2020-08-14 10:36:05.726][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1916] write ready\r\n[2020-08-14 10:36:05.726][14][trace][connection] [source/common/network/connection_impl.cc:500] [C1916] read ready\r\n[2020-08-14 10:36:05.726][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1916] ssl read returns: 244\r\n[2020-08-14 10:36:05.726][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C1916] ssl read returns: -1\r\n[2020-08-14 10:36:05.726][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C1916] ssl read 244 bytes into 1 slices\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1916] parsing 244 bytes\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1916] message begin\r\n[2020-08-14 10:36:05.726][14][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1916] new stream\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Host value=test.host\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=User-Agent value=PostmanRuntime/7.26.3\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Accept value=*/*\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Cache-Control value=no-cache\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Postman-Token value=353fdf1b-00a7-48f1-a93d-bb552c479330\r\n[2020-08-14 10:36:05.726][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Accept-Encoding value=gzip, deflate, br\r\n[2020-08-14 10:36:05.727][14][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1916] headers complete\r\n[2020-08-14 10:36:05.727][14][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1916] completed header: key=Connection value=keep-alive\r\n[2020-08-14 10:36:05.727][14][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1916] message complete\r\n[2020-08-14 10:36:05.727][14][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1916][S332189432177281115] request headers complete (end_stream=true):\r\n':authority', 'test.host'\r\n':path', '/pthru?d=20000'\r\n':method', 'GET'\r\n'user-agent', 'PostmanRuntime/7.26.3'\r\n'accept', '*/*'\r\n'cache-control', 'no-cache'\r\n'postman-token', '353fdf1b-00a7-48f1-a93d-bb552c479330'\r\n'accept-encoding', 'gzip, deflate, br'\r\n'connection', 'keep-alive'\r\n\r\n[2020-08-14 10:36:05.727][14][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1916][S332189432177281115] request end stream\r\n[2020-08-14 10:36:05.727][14][debug][router] [source/common/router/router.cc:434] [C1916][S332189432177281115] cluster 'policyengine-t1' match for URL '/pthru?d=20000'\r\n[2020-08-14 10:36:05.727][14][debug][router] [source/common/router/router.cc:549] [C1916][S332189432177281115] router decoding headers:\r\n':authority', 'test.host'\r\n':path', '/pthru?d=20000'\r\n':method', 'GET'\r\n':scheme', 'https'\r\n'user-agent', 'PostmanRuntime/7.26.3'\r\n'accept', '*/*'\r\n'cache-control', 'no-cache'\r\n'postman-token', '353fdf1b-00a7-48f1-a93d-bb552c479330'\r\n'accept-encoding', 'gzip, deflate, br'\r\n'x-forwarded-proto', 'https'\r\n'x-envoy-downstream-service-cluster', 'cluster1'\r\n'x-envoy-downstream-service-node', 'ingressnode'\r\n'x-request-id', '247beb82-5d01-43da-8e7a-c49d6901d664'\r\n'x-envoy-expected-rq-timeout-ms', '15000'\r\n\r\n[2020-08-14 10:36:05.727][14][debug][pool] [source/common/http/http1/conn_pool.cc:104] [C1955] using existing connection\r\n[2020-08-14 10:36:05.727][14][debug][router] [source/common/router/router.cc:1618] [C1916][S332189432177281115] pool ready\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/common/network/connection_impl.cc:398] [C1955] writing 448 bytes, end_stream false\r\n[2020-08-14 10:36:05.727][14][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1916][S332189432177281115] decode headers called: filter=0x564e4337e060 status=1\r\n[2020-08-14 10:36:05.727][14][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1916] parsed 244 bytes\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/common/network/connection_impl.cc:293] [C1916] readDisable: enabled=true disable=true\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1955] socket event: 2\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1955] write ready\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C1955] ssl write returns: 448\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/common/network/connection_impl.cc:462] [C1916] socket event: 2\r\n[2020-08-14 10:36:05.727][14][trace][connection] [source/common/network/connection_impl.cc:550] [C1916] write ready\r\n[2020-08-14 10:36:08.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1964] new connection\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1964] socket event: 2\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1964] write ready\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1964] socket event: 3\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1964] write ready\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1964] read ready\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1964] read returns: 118\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1964] read error: Resource temporarily unavailable\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1964] parsing 118 bytes\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1964] message begin\r\n[2020-08-14 10:36:08.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1964] new stream\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1964] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1964] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1964] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1964] headers complete\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1964] completed header: key=Connection value=close\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1964] message complete\r\n[2020-08-14 10:36:08.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1964][S6323848685696604929] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:08.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1964][S6323848685696604929] request end stream\r\n[2020-08-14 10:36:08.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1964][S6323848685696604929] request complete: path: /ready\r\n[2020-08-14 10:36:08.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1964][S6323848685696604929] closing connection due to connection close header\r\n[2020-08-14 10:36:08.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1964][S6323848685696604929] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:36:08 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1964] writing 228 bytes, end_stream false\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1964][S6323848685696604929] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1964] writing 15 bytes, end_stream false\r\n[2020-08-14 10:36:08.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:08.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1964] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1964][S6323848685696604929] decode headers called: filter=0x564e4337e7e0 status=1\r\n[2020-08-14 10:36:08.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1964] parsed 118 bytes\r\n[2020-08-14 10:36:08.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1964] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:08.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:36:08.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1964] socket event: 2\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1964] write ready\r\n[2020-08-14 10:36:08.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1964] write returns: 243\r\n[2020-08-14 10:36:08.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1964] write flush complete\r\n[2020-08-14 10:36:08.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1964] closing socket: 1\r\n[2020-08-14 10:36:08.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1964] adding to cleanup list\r\n[2020-08-14 10:36:08.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:08.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:09.513][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:36:09.513][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:09.513][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:36:09.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 7322\r\n[2020-08-14 10:36:09.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:36:09.513][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 7322 bytes into 1 slices\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 7322 bytes\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:09.513][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=4636 end_stream=false)\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.auth.Secret at version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.auth.Secret: version_info: \"2020-08-14 10:36:09.512752108 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"testmst\"\r\nresource_names: \"t1-mockkeystore\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.auth.Secret\"\r\nresponse_nonce: \"3969\"\r\n\r\n[2020-08-14 10:36:09.513][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 232 bytes\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:09.513][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=1879 end_stream=false)\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Listener at version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-http hash=15192452732192267292\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-http'. no add/update\r\n[2020-08-14 10:36:09.513][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-http' skipped\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-tls hash=9325604105818206458\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-tls'. no add/update\r\n[2020-08-14 10:36:09.513][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-tls' skipped\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Listener accepted with 2 resources with version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Listener: version_info: \"2020-08-14 10:36:09.512752108 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Listener\"\r\nresponse_nonce: \"3970\"\r\n\r\n[2020-08-14 10:36:09.513][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 193 bytes\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:09.513][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=431 end_stream=false)\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Cluster at version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:36:09.513][6][info][upstream] [source/common/upstream/cds_api_impl.cc:67] cds: add 1 cluster(s), remove 1 cluster(s)\r\n[2020-08-14 10:36:09.513][6][debug][upstream] [source/common/upstream/cds_api_impl.cc:85] cds: add/update cluster 'policyengine-t1' skipped\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Cluster accepted with 1 resources with version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.513][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Cluster: version_info: \"2020-08-14 10:36:09.512752108 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Cluster\"\r\nresponse_nonce: \"3971\"\r\n\r\n[2020-08-14 10:36:09.513][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 192 bytes\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:09.513][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:09.513][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=340 end_stream=false)\r\n[2020-08-14 10:36:09.513][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.RouteConfiguration at version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.514][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.RouteConfiguration accepted with 1 resources with version 2020-08-14 10:36:09.512752108 +0000 UTC\r\n[2020-08-14 10:36:09.514][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.RouteConfiguration: version_info: \"2020-08-14 10:36:09.512752108 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"route-t1-t1-vh1\"\r\nresource_names: \"ingress-http-route-config\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.RouteConfiguration\"\r\nresponse_nonce: \"3972\"\r\n\r\n[2020-08-14 10:36:09.514][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 247 bytes\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 7322 bytes\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 873 bytes, end_stream false\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=0\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 873\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 30\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 30 bytes into 1 slices\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 30 bytes\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=8, flags=0\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=8\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=6, flags=0\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=6\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:424] [C5] dispatched 30 bytes\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:666] [C5] about to send frame type=6, flags=1\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:720] [C5] send data: bytes=17\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:398] [C5] writing 17 bytes, end_stream false\r\n[2020-08-14 10:36:09.514][6][trace][http2] [source/common/http/http2/codec_impl.cc:608] [C5] sent frame type=6\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 2\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:09.514][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:259] [C5] ssl write returns: 17\r\n[2020-08-14 10:36:10.039][6][debug][main] [source/server/server.cc:175] flushing stats\r\n[2020-08-14 10:36:11.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:335] [C1965] new connection\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1965] socket event: 2\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1965] write ready\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1965] socket event: 3\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1965] write ready\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:500] [C1965] read ready\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:24] [C1965] read returns: 118\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:38] [C1965] read error: Resource temporarily unavailable\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:409] [C1965] parsing 118 bytes\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:561] [C1965] message begin\r\n[2020-08-14 10:36:11.612][6][debug][http] [source/common/http/conn_manager_impl.cc:259] [C1965] new stream\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1965] completed header: key=Host value=100.96.1.47:9901\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1965] completed header: key=User-Agent value=kube-probe/1.18\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1965] completed header: key=Accept-Encoding value=gzip\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:503] [C1965] headers complete\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:371] [C1965] completed header: key=Connection value=close\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:548] [C1965] message complete\r\n[2020-08-14 10:36:11.612][6][debug][http] [source/common/http/conn_manager_impl.cc:708] [C1965][S5175704883643059425] request headers complete (end_stream=true):\r\n':authority', '100.96.1.47:9901'\r\n':path', '/ready'\r\n':method', 'GET'\r\n'user-agent', 'kube-probe/1.18'\r\n'accept-encoding', 'gzip'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:11.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1257] [C1965][S5175704883643059425] request end stream\r\n[2020-08-14 10:36:11.612][6][debug][admin] [source/server/http/admin.cc:1200] [C1965][S5175704883643059425] request complete: path: /ready\r\n[2020-08-14 10:36:11.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1490] [C1965][S5175704883643059425] closing connection due to connection close header\r\n[2020-08-14 10:36:11.612][6][debug][http] [source/common/http/conn_manager_impl.cc:1552] [C1965][S5175704883643059425] encoding headers via codec (end_stream=false):\r\n':status', '200'\r\n'content-type', 'text/plain; charset=UTF-8'\r\n'cache-control', 'no-cache, max-age=0'\r\n'x-content-type-options', 'nosniff'\r\n'date', 'Fri, 14 Aug 2020 10:36:11 GMT'\r\n'server', 'envoy'\r\n'connection', 'close'\r\n\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1965] writing 228 bytes, end_stream false\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/conn_manager_impl.cc:1700] [C1965][S5175704883643059425] encoding data via codec (size=5 end_stream=true)\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:398] [C1965] writing 15 bytes, end_stream false\r\n[2020-08-14 10:36:11.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:11.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1965] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/conn_manager_impl.cc:966] [C1965][S5175704883643059425] decode headers called: filter=0x564e4337f080 status=1\r\n[2020-08-14 10:36:11.612][6][trace][http] [source/common/http/http1/codec_impl.cc:430] [C1965] parsed 118 bytes\r\n[2020-08-14 10:36:11.612][6][debug][connection] [source/common/network/connection_impl.cc:104] [C1965] closing data_to_write=243 type=2\r\n[2020-08-14 10:36:11.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14T10:36:11.612Z] \"GET /ready HTTP/1.1\" 200 - 0 5 0 - \"10.250.6.76\" \"kube-probe/1.18\" \"-\" \"100.96.1.47:9901\" \"-\"\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:462] [C1965] socket event: 2\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/connection_impl.cc:550] [C1965] write ready\r\n[2020-08-14 10:36:11.612][6][trace][connection] [source/common/network/raw_buffer_socket.cc:67] [C1965] write returns: 243\r\n[2020-08-14 10:36:11.612][6][debug][connection] [source/common/network/connection_impl.cc:589] [C1965] write flush complete\r\n[2020-08-14 10:36:11.612][6][debug][connection] [source/common/network/connection_impl.cc:193] [C1965] closing socket: 1\r\n[2020-08-14 10:36:11.612][6][debug][conn_handler] [source/server/connection_handler_impl.cc:88] [C1965] adding to cleanup list\r\n[2020-08-14 10:36:11.612][6][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:11.612][6][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:14.326][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:36:14.326][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:36:14.327][14][debug][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:72] tls inspector: new connection accepted\r\n[2020-08-14 10:36:14.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:165] tls inspector: recv: -1\r\n[2020-08-14 10:36:14.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:36:14.327][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:14.327][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:14.327][14][trace][filter] [source/extensions/filters/listener/tls_inspector/tls_inspector.cc:186] tls inspector: done: false\r\n[2020-08-14 10:36:14.327][14][trace][main] [source/common/event/dispatcher_impl.cc:160] item added to deferred deletion list (size=1)\r\n[2020-08-14 10:36:14.327][14][trace][main] [source/common/event/dispatcher_impl.cc:79] clearing deferred deletion list (size=1)\r\n[2020-08-14 10:36:14.516][6][trace][connection] [source/common/network/connection_impl.cc:462] [C5] socket event: 3\r\n[2020-08-14 10:36:14.516][6][trace][connection] [source/common/network/connection_impl.cc:550] [C5] write ready\r\n[2020-08-14 10:36:14.516][6][trace][connection] [source/common/network/connection_impl.cc:500] [C5] read ready\r\n[2020-08-14 10:36:14.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: 7322\r\n[2020-08-14 10:36:14.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:80] [C5] ssl read returns: -1\r\n[2020-08-14 10:36:14.516][6][trace][connection] [source/extensions/transport_sockets/tls/ssl_socket.cc:155] [C5] ssl read 7322 bytes into 1 slices\r\n[2020-08-14 10:36:14.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:405] [C5] dispatching 7322 bytes\r\n[2020-08-14 10:36:14.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:14.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:14.516][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=431 end_stream=false)\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Cluster at version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:36:14.516][6][info][upstream] [source/common/upstream/cds_api_impl.cc:67] cds: add 1 cluster(s), remove 1 cluster(s)\r\n[2020-08-14 10:36:14.516][6][debug][upstream] [source/common/upstream/cds_api_impl.cc:85] cds: add/update cluster 'policyengine-t1' skipped\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Cluster accepted with 1 resources with version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.516][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Cluster: version_info: \"2020-08-14 10:36:14.515810246 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Cluster\"\r\nresponse_nonce: \"3973\"\r\n\r\n[2020-08-14 10:36:14.516][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 192 bytes\r\n[2020-08-14 10:36:14.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:14.516][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:14.516][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=1879 end_stream=false)\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.Listener at version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/common/config/grpc_mux_impl.cc:101] Pausing discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-http hash=15192452732192267292\r\n[2020-08-14 10:36:14.516][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-http'. no add/update\r\n[2020-08-14 10:36:14.516][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-http' skipped\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/server/listener_manager_impl.cc:269] begin add/update listener: name=listener-ingress-tls hash=9325604105818206458\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/server/listener_manager_impl.cc:280] duplicate/locked listener 'listener-ingress-tls'. no add/update\r\n[2020-08-14 10:36:14.517][6][debug][upstream] [source/server/lds_api.cc:66] lds: add/update listener 'listener-ingress-tls' skipped\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/common/config/grpc_mux_impl.cc:109] Resuming discovery requests for type.googleapis.com/envoy.api.v2.RouteConfiguration\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.Listener accepted with 2 resources with version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.517][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.Listener: version_info: \"2020-08-14 10:36:14.515810246 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\ntype_url: \"type.googleapis.com/envoy.api.v2.Listener\"\r\nresponse_nonce: \"3974\"\r\n\r\n[2020-08-14 10:36:14.517][6][trace][router] [source/common/router/router.cc:1487] [C0][S6236246387049523829] proxying 193 bytes\r\n[2020-08-14 10:36:14.517][6][trace][http2] [source/common/http/http2/codec_impl.cc:468] [C5] about to recv frame type=0, flags=0\r\n[2020-08-14 10:36:14.517][6][trace][http2] [source/common/http/http2/codec_impl.cc:483] [C5] recv frame type=0\r\n[2020-08-14 10:36:14.517][6][trace][http] [source/common/http/async_client_impl.cc:109] async http request response data (length=4636 end_stream=false)\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/common/config/grpc_mux_impl.cc:132] Received gRPC message for type.googleapis.com/envoy.api.v2.auth.Secret at version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.517][6][debug][config] [source/common/config/grpc_mux_subscription_impl.cc:62] gRPC config for type.googleapis.com/envoy.api.v2.auth.Secret accepted with 1 resources with version 2020-08-14 10:36:14.515810246 +0000 UTC\r\n[2020-08-14 10:36:14.517][6][trace][config] [source/common/config/grpc_mux_impl.cc:63] Sending DiscoveryRequest for type.googleapis.com/envoy.api.v2.auth.Secret: version_info: \"2020-08-14 10:36:14.515810246 +0000 UTC\"\r\nnode {\r\n  id: \"ingressnode\"\r\n  cluster: \"cluster1\"\r\n  build_version: \"8f2515a19bdcc75bea0bfd7016231a7661d0be6e/1.12.2/Clean/RELEASE/BoringSSL\"\r\n}\r\nresource_names: \"testmst\"\r\nresource_names: \"t1-mockkeystore\"\r\ntype_url: \"type.googleapis.com/envoy.api.v2.auth.Secret\"\r\nresponse_nonce: \"3975\"\r\n\r\n</details>",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/12665/comments",
    "author": "ankur-anand",
    "comments": [
      {
        "user": "mattklein123",
        "created_at": "2020-08-16T21:07:08Z",
        "body": "There have been various changes in this area over the months. Please try with a more recent build and report back. In general though a 408 can happen if idle timeouts, buffer timeouts, etc. are hit."
      },
      {
        "user": "ankur-anand",
        "created_at": "2020-09-01T08:15:51Z",
        "body": "@mattklein123 Thank you for the help. Didn't received such inconsistency in the newer version. "
      }
    ],
    "satisfaction_conditions": [
      "Explanation of the conditions under which Envoy would return 408 vs 504 for timeout scenarios",
      "Identification of potential idle timeout interactions with request timeout settings",
      "Differentiation between network-level timeouts and application-level timeouts"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:29:03"
    }
  },
  {
    "number": 9937,
    "title": "Too many Host headers caused via lua headers():add(\":a\",\"value\")",
    "created_at": "2020-02-05T13:53:45Z",
    "closed_at": "2020-02-06T07:39:57Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/9937",
    "body": "*Description*:\r\n\r\nThe lua filters makes it possible to add headers which are available\r\nonly for access logs by adding ':' character to them. However if this\r\nkind of \"hidden\" header starts with \":a\" it is used as \":authority\"\r\nand this causes multiple \"host\" headers to appear with HTTP/1.X\r\nrequests. This in turns causes error with at least golang based http server:\r\n\"HTTP/1.1 400 Bad Request: too many Host headers\".\r\n\r\nWith the envoy virtual hosts routes config it is not possible to\r\nmodify the \":\" prefixed headers but it's nicely possible via lua api.\r\n\r\nThe use of \":\" started headers via lua api may be an unplanned feature\r\nbut it makes it possible to have these hidden/log-only headers like\r\nthe Nginx supports via variables. These variables/hidden headers are\r\nvery convenient especially when using external authorizers or other\r\nexternal subrequests where one needs to log the subrequest result\r\nheaders as part of access logs but not pass all of them to the\r\nupstream.\r\n\r\n*Proposed fix*:\r\n\r\nEnvoy should copy only the \":authority\" header as HTTP/1.X \"host\" header and not all of the \":a*\" headers.\r\n\r\n*Proposed new feature*:\r\n\r\nAdd documented support for using hidden/access-log only headers.\r\n\r\n*Repro steps*:\r\n- Use the configuration below\r\n- Have upstream server ready (written in go), or some other server but verify headers with tcpdump.\r\n- make a request to the envoy\r\n- notice that the server returns 400 error (you can verify the issue by using tcpdump to capture the traffic).\r\n\r\n*Config*:\r\n\r\n```\r\nstatic_resources:\r\n  listeners:\r\n  - address:\r\n      socket_address:\r\n        address: 0.0.0.0\r\n        port_value: 8081\r\n    filter_chains:\r\n    - filters:\r\n      - name: envoy.http_connection_manager\r\n        typed_config:\r\n          \"@type\": type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager\r\n          codec_type: auto\r\n          stat_prefix: proxy_http\r\n          http_protocol_options:\r\n            accept_http_10: true\r\n          #Disabled delayed close for the http/1.0 (and all other...)\r\n          delayed_close_timeout: 0.0s\r\n          access_log:\r\n          - name: envoy.file_access_log\r\n            typed_config:\r\n              \"@type\": type.googleapis.com/envoy.config.accesslog.v2.FileAccessLog\r\n              path: /var/log/envoy/envoy-access.log\r\n              format: \"[%START_TIME%] \\\r\n                       host=\\\"%REQ(:AUTHORITY)%\\\" \\\r\n                       m=\\\"%REQ(:METHOD)%\\\" \\\r\n                       st=\\\"%RESPONSE_CODE%\\\" \\\r\n                       ahidden=\\\"%REQ(:AHIDDEN)%\\\" \\\r\n                       bhidden=\\\"%REQ(:BHIDDEN)%\\\" \\\r\n                       \\\"\\n\"\r\n          route_config:\r\n            name: local_route\r\n            virtual_hosts:\r\n            - name: backend\r\n              domains:\r\n              - \"*\"\r\n              routes:\r\n              - match:\r\n                  path: /envoy-status\r\n                direct_response:\r\n                  status: 200\r\n                  body:\r\n                    inline_string: OK\r\n              - match:\r\n                  prefix: /\r\n                route:\r\n                  cluster: upstream\r\n          http_filters:\r\n          - name: envoy.lua\r\n            typed_config:\r\n              \"@type\": type.googleapis.com/envoy.config.filter.http.lua.v2.Lua\r\n              #################################################################\r\n              inline_code: |\r\n                function envoy_on_request(handle)\r\n                     -- testing request header modifications,\r\n                     -- adding a \"hidden\" log only header starting with \":a\" will be used\r\n                     -- as \":authority\" causing \"HTTP/1.1 400 Bad Request: too many Host headers\" error\r\n                     -- Example headers caused by this example:\r\n                     --     host: localhost:8081\r\n                     --     host: a-value\r\n                     handle:headers():replace(\":ahidden\", \"a-value\")\r\n                     handle:headers():replace(\":bhidden\", \"b-value\")\r\n                end \r\n              ##########################################################\r\n          - name: envoy.router\r\n            typed_config: {}\r\n  clusters:\r\n  - name: upstream\r\n    connect_timeout: 0.25s\r\n    type: strict_dns\r\n    lb_policy: round_robin\r\n    load_assignment:\r\n      cluster_name: upstream\r\n      endpoints:\r\n      - lb_endpoints:\r\n        - endpoint:\r\n            address:\r\n              socket_address:\r\n                address: upstream\r\n                port_value: 9090\r\n### LISTENER FOR ADMIN API\r\nadmin:\r\n  access_log_path: \"/var/log/envoy/envoy-admin.log\"\r\n  address:\r\n    socket_address:\r\n      address: 127.0.0.1\r\n      port_value: 8001\r\n\r\n```\r\n\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9937/comments",
    "author": "jusmaki",
    "comments": [
      {
        "user": "mattklein123",
        "created_at": "2020-02-05T17:25:58Z",
        "body": "You are relying on undocumented behavior which I don't think we are going to change. Can you use dynamic metadata for this? IIRC it can also be logged. cc @dio "
      },
      {
        "user": "jusmaki",
        "created_at": "2020-02-06T07:39:57Z",
        "body": "Yes, the dynamic metadata works perfectly for this case. Thanks for the the tip. "
      }
    ],
    "satisfaction_conditions": [
      "Provides a method to add log-only headers without modifying upstream request headers",
      "Uses officially supported Envoy features rather than header manipulation hacks",
      "Prevents unintended side effects on HTTP/1.X request processing"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:29:41"
    }
  },
  {
    "number": 9084,
    "title": "Simple Ratelimit doesnt work with envoy frontproxy",
    "created_at": "2019-11-20T15:46:42Z",
    "closed_at": "2019-11-20T16:19:30Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/9084",
    "body": "Simple Ratelimit doesnt work with envoy frontproxy\r\n\r\nenvoy front proxy config:\r\n```\r\nstatic_resources:\r\n  listeners:\r\n  - address:\r\n      socket_address:\r\n        address: 0.0.0.0\r\n        port_value: 80\r\n    filter_chains:\r\n    - filters:\r\n      - name: envoy.http_connection_manager\r\n        config:\r\n          codec_type: auto\r\n          use_remote_address: true\r\n          stat_prefix: ingress_http\r\n          access_log:\r\n            - name: envoy.file_access_log\r\n              config:\r\n                path: /dev/stdout\r\n          route_config:\r\n            name: local_route\r\n            virtual_hosts:\r\n            - name: backend\r\n              domains: [\"*\"]\r\n              routes:\r\n              - match:\r\n                  prefix: \"/\"\r\n                route:\r\n                  # Send request to an endpoint in the Google cluster\r\n                  cluster: google\r\n                  host_rewrite: www.google.com\r\n                rate_limits:\r\n                  - actions:\r\n                      - remote_address: {}\r\n          http_filters:\r\n          - name: envoy.rate_limit\r\n            config:\r\n              domain: rate_per_ip\r\n              rate_limit_service:\r\n                grpc_service:\r\n                  envoy_grpc:\r\n                    cluster_name: rate_limit_cluster\r\n                  timeout: 0.25s\r\n          - name: envoy.router\r\n            typed_config: {}\r\n  clusters:\r\n  - name: google\r\n    connect_timeout: 1s\r\n    type: logical_dns \r\n    dns_lookup_family: V4_ONLY\r\n    lb_policy: round_robin\r\n    load_assignment:\r\n    hosts: [{ socket_address: { address: google.com, port_value: 443 }}]\r\n    tls_context: { sni: www.google.com }\r\n\r\n  - name: rate_limit_cluster\r\n    type: STATIC \r\n    connect_timeout: 1s\r\n    lb_policy: ROUND_ROBIN\r\n    http2_protocol_options: {}\r\n    hosts: [{ socket_address: { address: 127.0.0.1 , port_value: 8081 }}]\r\nadmin:\r\n  access_log_path: \"/dev/null\"\r\n  address:\r\n    socket_address:\r\n      address: 0.0.0.0\r\n      port_value: 8001\r\n```\r\n\r\n\r\n\r\nratelimit config:\r\n```\r\ndomain: rate_per_ip\r\ndescriptors:\r\n  - key: database\r\n    value: users\r\n    rate_limit:\r\n      unit: minute\r\n      requests_per_unit: 5\r\n  - key: remote_address\r\n    rate_limit:\r\n      unit: minute\r\n      requests_per_unit: 5\r\n```\r\n\r\nI can see both ratelimit and envoy working, and can access them, but envoy doesnt hit ratelimit service at all. Please help me.",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/9084/comments",
    "author": "nagireddygatla",
    "comments": [
      {
        "user": "junr03",
        "created_at": "2019-11-20T16:10:18Z",
        "body": "in the configuration above the rate_limits field is not indented correctly. The field should be inside of the route field."
      },
      {
        "user": "nagireddygatla",
        "created_at": "2019-11-20T16:19:30Z",
        "body": "Sir, you are such a savior that worked, been struggling with for a week now. very thankful for your help."
      }
    ],
    "satisfaction_conditions": [
      "Correct structural placement of rate_limits configuration in Envoy route definition",
      "Ensures Envoy proxy communicates with rate limit service"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:31:06"
    }
  },
  {
    "number": 8054,
    "title": "envoy.ext_authz with HTTP with POST method doesn't return the exact status.",
    "created_at": "2019-08-27T15:04:53Z",
    "closed_at": "2019-08-27T16:16:37Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/8054",
    "body": "envoy.ext_authz with HTTP with the POST method doesn't return the exact status.\r\nWe set \r\n\r\n- `with_request_body:\r\n                max_request_bytes: 2048\r\n                allow_partial_message: false`\r\n\r\n- And do a JSON POST, from the server 200 is returned, but the envoy gets \r\n`':status', '504'\r\n'content-length', '24'\r\n'content-type', 'text/plain'`\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/8054/comments",
    "author": "ghost",
    "comments": [
      {
        "user": "snowp",
        "created_at": "2019-08-27T15:17:27Z",
        "body": "It sounds like the call is timing out, have you tried to increase the timeout to the ext authz server?"
      },
      {
        "user": "ghost",
        "created_at": "2019-08-27T16:16:33Z",
        "body": "it works by increasing the timeout. Thanks!"
      }
    ],
    "satisfaction_conditions": [
      "Addresses timeout configuration for the ext_authz service",
      "Ensures the authorization service has sufficient time to process POST requests with bodies"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:31:40"
    }
  },
  {
    "number": 7441,
    "title": "Trying to add linkopts, Bazel getting in the way...",
    "created_at": "2019-07-02T00:38:22Z",
    "closed_at": "2019-07-02T03:04:57Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/7441",
    "body": "Looks like similar opinions were raised before about Bazel but I am also in the opinion that it is overall a hard ecosystem to navigate.\r\n\r\nSo much so that I am unable to have my project (derived from the `filter-example`) link with an additional system library.\r\n\r\nFor simplicity, let's say it is `curl`. I simply want to link with `libcurl.so`. I don't need to build curl from source (although I tried that and failed to do that with Bazel and there aren't many examples except for `tensorflow` and `googlecartographer/async_grpc` projects), I have it installed on my system.\r\n\r\nI am trying to simply add a `-lcurl` to the `linkopts` but since `envoy_cc_binary` wraps the `cc_binary`, I am unable to specify `linkopts`.\r\n\r\nAny help is appreciated. I feel like this should be rather simple but Bazel is getting in the way. :) ",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/7441/comments",
    "author": "canselcik",
    "comments": [
      {
        "user": "mattklein123",
        "created_at": "2019-07-02T02:44:52Z",
        "body": "Presumably since you are trying to link against a system library, you have private code. You can define your own binary target like so and pass whatever linkops you want. E.g.,\r\n\r\n```\r\nenvoy_cc_binary(\r\n    name = \"envoy\",\r\n    repository = \"@envoy\",\r\n    stamped = True,\r\n    deps = LYFT_CUSTOM_FILTER_CONFIGS + [\r\n        \"@envoy//source/exe:envoy_main_entry_lib\",\r\n    ],\r\n)\r\n```"
      },
      {
        "user": "canselcik",
        "created_at": "2019-07-02T03:04:57Z",
        "body": "Thanks @mattklein123, that was actually the first thing I had tried but that had resulted in an obscure Bazel error so I had figured the `envoy_cc_binary` wrapper didn't accept a list of `linkopts`. Turns out it was something else. Perhaps my `bazel clean --expunge` from earlier addressed something.\r\n\r\nThanks for the quick response."
      }
    ],
    "satisfaction_conditions": [
      "Allows linking against system libraries without requiring source-based builds",
      "Works within Bazel's envoy_cc_binary wrapper constraints",
      "Provides a clear pattern for custom binary target configuration",
      "Avoids dependency on complex external build integrations"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:31:49"
    }
  },
  {
    "number": 6950,
    "title": "Envoy is crashed when try to log if there is no space",
    "created_at": "2019-05-15T08:30:01Z",
    "closed_at": "2019-05-16T06:09:45Z",
    "labels": [
      "bug",
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/6950",
    "body": "**Envoy is crashed when try to log if there is no space**\r\n\r\n*Envoy is crashed when try to log if there is no space*: *Enabled access log and if no space left, envoy is crashed immediately*\r\n\r\n*Description*:\r\nI enabled access logs and on load traffic, the log partition can be full in sometimes. In that time, envoy is crashed and the log is like following. The expected behaviour is not crashed and not try to log if no space left.\r\n\r\nThanks in advance\r\nSincerely\r\n\r\n*Logs*:\r\n[2019-05-14 16:41:00.934][6193][critical][assert] [external/envoy/source/common/access_log/access_log_manager_impl.cc:95] assert failure: result.rc_ == static_cast<ssize_t>(slice.len_).\r\n[2019-05-14 16:41:00.934][6193][critical][backtrace] [bazel-out/k8-dbg/bin/external/envoy/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:81] Caught Aborted, suspect faulting address 0x181e\r\n[2019-05-14 16:41:00.934][6193][critical][backtrace] [bazel-out/k8-dbg/bin/external/envoy/source/server/_virtual_includes/backtrace_lib/server/backtrace.h:69] Backtrace (use tools/stack_decode.py to get line\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6950/comments",
    "author": "cihankom",
    "comments": [
      {
        "user": "mattklein123",
        "created_at": "2019-05-15T14:37:38Z",
        "body": "@cihankom that's a debug assert. It will be compiled out on release builds. IMO it's reasonable to keep that assert in this case. In release builds the data will be dropped."
      },
      {
        "user": "cihankom",
        "created_at": "2019-05-16T05:58:52Z",
        "body": "Ok, I see. thanks for your help"
      }
    ],
    "satisfaction_conditions": [
      "Explanation of why Envoy doesn't crash in production environments when disk space is exhausted",
      "Clarification of debug vs release build behavior regarding critical asserts",
      "Confirmation that Envoy handles full disk scenarios gracefully in normal operation"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:32:36"
    }
  },
  {
    "number": 6159,
    "title": "Bazel build failed in foreign_cc",
    "created_at": "2019-03-04T18:31:44Z",
    "closed_at": "2019-03-04T22:14:04Z",
    "labels": [
      "question",
      "area/build"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/6159",
    "body": "**Bug Template**\r\n\r\n*Title*: Bazel build failed in foreign_cc\r\n\r\n*Description*:\r\nWith latest tree, and with bazel 0.21.0,   when \"bazel build //souce/...\", I got\r\n\r\nbazel build //source/exe:envoy-static\r\nWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\n/home/qiwzhang/github/envoyproxy/envoy/tools/bazel.rc\r\nERROR: /home/qiwzhang/.cache/bazel/_bazel_qiwzhang/85114b85e3290f3d9d9a93c62b41d7d0/external/envoy/bazel/foreign_cc/BUILD:86:1: in cmake_external rule @envoy//bazel/foreign_cc:yaml: \r\nTraceback (most recent call last):\r\n        File \"/home/qiwzhang/.cache/bazel/_bazel_qiwzhang/85114b85e3290f3d9d9a93c62b41d7d0/external/envoy/bazel/foreign_cc/BUILD\", line 86\r\n                cmake_external(name = 'yaml')\r\n        File \"/home/qiwzhang/.cache/bazel/_bazel_qiwzhang/85114b85e3290f3d9d9a93c62b41d7d0/external/rules_foreign_cc/tools/build_defs/cmake.bzl\", line 47, in _cmake_external\r\n                cc_external_rule_impl(ctx, attrs)\r\n        File \"/home/qiwzhang/.cache/bazel/_bazel_qiwzhang/85114b85e3290f3d9d9a93c62b41d7d0/external/foreign_cc_impl/framework.bzl\", line 209, in cc_external_rule_impl\r\n                _define_out_cc_info(ctx, attrs, inputs, outputs)\r\n        File \"/home/qiwzhang/.cache/bazel/_bazel_qiwzhang/85114b85e3290f3d9d9a93c62b41d7d0/external/foreign_cc_impl/framework.bzl\", line 627, in _define_out_cc_info\r\n                cc_common.create_compilation_context(ctx = ctx, headers = depset([outpu...]), <2 more arguments>)\r\nunexpected keyword 'ctx', for call to method create_compilation_context(headers = unbound, system_includes = unbound, includes = unbound, quote_includes = unbound, defines = unbound) of 'cc_common'\r\nERROR: Analysis of target '//source/exe:envoy-static' failed; build aborted: Analysis of target '@envoy//bazel/foreign_cc:yaml' failed; build aborted\r\nINFO: Elapsed time: 1.483s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (213 packages loaded, 4783 targets configured)\r\n    Fetching @com_github_gperftools_gperftools; Patching repository\r\n    Fetching @com_github_nghttp2_nghttp2; fetching\r\n    Fetching @com_github_c_ares_c_ares; fetching\r\n    Fetching @com_github_circonus_labs_libcircllhist; fetching\r\n    Fetching @boringssl; fetching\r\n    Fetching @com_github_madler_zlib; fetching\r\n\r\n\r\n\r\nBTW,  I also tried with bazel 0.23.0. Same issue\r\n\r\nAny clues?\r\n\r\n\r\n\r\n\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/6159/comments",
    "author": "qiwzhang",
    "comments": [
      {
        "user": "lizan",
        "created_at": "2019-03-04T20:28:55Z",
        "body": "Did you try `bazel clean --expunge`? 0.21 doesn't work with latest, but 0.22 or 0.23 should work and they are tested in CI."
      },
      {
        "user": "qiwzhang",
        "created_at": "2019-03-04T22:13:58Z",
        "body": "Thanks.   It works now after \"bazel clean --expunge\"\r\n"
      }
    ],
    "satisfaction_conditions": [
      "Resolves cached build artifact incompatibility with newer Bazel versions",
      "Ensures environment state matches required Bazel version expectations"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:34:06"
    }
  },
  {
    "number": 5788,
    "title": "Envoy \"Connection: close\" causes 1s rq_time overhead",
    "created_at": "2019-01-31T12:05:04Z",
    "closed_at": "2019-02-01T12:13:44Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/5788",
    "body": "Given the below configuration:\r\n\r\nRequest with __Connection: close__, causes envoy to delays the sending the tcp (FIN) / closing the socket by 1s.\r\n\r\nEnvoy sends the response data, rightaway (no delay visible in tcpdump / wireshark), the FIN / closing of the connection is the issue.\r\n```bash\r\ntime fortio curl -loglevel=debug -keepalive=false localhost:8080/\r\n```\r\n\r\nRequest without 'Connection: close', works as expected\r\n```bash\r\ntime fortio curl -loglevel=debug localhost:8080/\r\n```\r\n\r\n```yaml\r\n---\r\nnode:\r\n  locality:\r\n    zone: default-zone\r\n\r\nstatic_resources:\r\n  listeners:\r\n  - name: default_listener\r\n    address:\r\n      socket_address:\r\n        address: 0.0.0.0\r\n        port_value: 8080\r\n    filter_chains:\r\n    - filters:\r\n      - name: envoy.http_connection_manager\r\n        config:\r\n          stat_prefix: ingress_proxy\r\n          access_log:\r\n            name: envoy.file_access_log\r\n            config:\r\n              path: \"/dev/stdout\"\r\n              format: >\r\n                [%START_TIME%] %PROTOCOL% %REQ(:METHOD)% %REQ(:authority)% %REQ(:PATH)% %RESPONSE_CODE% %RESPONSE_FLAGS%\r\n                %BYTES_RECEIVED%b %BYTES_SENT%b %DURATION%ms \"%DOWNSTREAM_REMOTE_ADDRESS%\" -> \"%UPSTREAM_HOST%\"\r\n          route_config:\r\n            name: \"ingress_routes\"\r\n            virtual_hosts:\r\n              - name: \"local_service\"\r\n                domains:\r\n                  - \"*\"\r\n                routes:\r\n                  - match:\r\n                      prefix: \"/\"\r\n                    route:\r\n                      cluster: \"example\"\r\n          http_filters:\r\n            - name: envoy.router\r\n          http_protocol_options:\r\n            allow_absolute_url: true\r\n\r\n  clusters:\r\n  - name: example\r\n    type: STRICT_DNS\r\n    hosts:\r\n    - socket_address:\r\n        address: 127.0.0.1\r\n        port_value: 9091\r\n    connect_timeout:\r\n      seconds: 1\r\n\r\nadmin:\r\n  access_log_path: \"/dev/null\"\r\n  address:\r\n    socket_address:\r\n      address: 0.0.0.0\r\n      port_value: 9091\r\n```\r\n\r\nThis looks similar to #234, we've noticed unhealthy instances in varnish, when probes had .timeout < 1s.",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5788/comments",
    "author": "fkowal",
    "comments": [
      {
        "user": "fkowal",
        "created_at": "2019-01-31T12:37:02Z",
        "body": "```\r\ntcpdump -nni lo0 -s 0 -A tcp portrange 8080\r\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\r\nlistening on lo0, link-type NULL (BSD loopback), capture size 262144 bytes\r\n13:15:10.238945 IP6 ::1.65046 > ::1.8080: Flags [S], seq 1696331147, win 65535, options [mss 16324,nop,wscale 6,nop,nop,TS val 803548502 ecr 0,sackOK,eol], length 0\r\n`..0.,.@....................................e............4....?........\r\n/.-V........\r\n13:15:10.239025 IP6 ::1.8080 > ::1.65046: Flags [S.], seq 2050231525, ack 1696331148, win 65535, options [mss 16324,nop,wscale 6,nop,nop,TS val 803548502 ecr 803548502,sackOK,eol], length 0\r\n`....,.@....................................z4..e........4....?........\r\n/.-V/.-V....\r\n13:15:10.239037 IP6 ::1.65046 > ::1.8080: Flags [.], ack 1, win 6371, options [nop,nop,TS val 803548502 ecr 803548502], length 0\r\n`..0. .@....................................e...z4.......(.....\r\n/.-V/.-V\r\n13:15:10.239045 IP6 ::1.8080 > ::1.65046: Flags [.], ack 1, win 6371, options [nop,nop,TS val 803548502 ecr 803548502], length 0\r\n`.... .@....................................z4..e........(.....\r\n/.-V/.-V\r\n13:15:10.239089 IP6 ::1.65046 > ::1.8080: Flags [P.], seq 1:97, ack 1, win 6371, options [nop,nop,TS val 803548502 ecr 803548502], length 96: HTTP: GET / HTTP/1.1\r\n`..0...@....................................e...z4.............\r\n/.-V/.-VGET / HTTP/1.1\r\nHost: localhost:8080\r\nConnection: close\r\nUser-Agent: fortio.org/fortio-1.3.0\r\n\r\n\r\n13:15:10.239101 IP6 ::1.8080 > ::1.65046: Flags [.], ack 97, win 6370, options [nop,nop,TS val 803548502 ecr 803548502], length 0\r\n`.... .@....................................z4..e........(.....\r\n/.-V/.-V\r\n13:15:10.247298 IP6 ::1.8080 > ::1.65046: Flags [P.], seq 1:4807, ack 97, win 6370, options [nop,nop,TS val 803548510 ecr 803548502], length 4806: HTTP: HTTP/1.1 200 OK\r\n`......@....................................z4..e..............\r\n/.-^/.-VHTTP/1.1 200 OK\r\ncontent-type: text/html; charset=UTF-8\r\ncache-control: no-cache, max-age=0\r\nx-content-type-options: nosniff\r\ndate: Thu, 31 Jan 2019 12:15:10 GMT\r\nserver: envoy\r\nx-envoy-upstream-service-time: 0\r\nconnection: close\r\ntransfer-encoding: chunked\r\n\r\n11b4\r\n<head>\r\n  <title>Envoy Admin</title> etc\r\n</body>\r\n\r\n0\r\n\r\n\r\n13:15:10.247329 IP6 ::1.65046 > ::1.8080: Flags [.], ack 4807, win 6296, options [nop,nop,TS val 803548510 ecr 803548510], length 0\r\n`..0. .@....................................e...z4.......(.....\r\n/.-^/.-^\r\n13:15:11.250726 IP6 ::1.8080 > ::1.65046: Flags [.], ack 97, win 6370, length 0\r\n`......@....................................z4..e...P.......\r\n13:15:11.250767 IP6 ::1.65046 > ::1.8080: Flags [.], ack 4807, win 6296, options [nop,nop,TS val 803549510 ecr 803548510], length 0\r\n`..0. .@....................................e...z4.......(.....\r\n/.1F/.-^\r\n13:15:11.252739 IP6 ::1.8080 > ::1.65046: Flags [F.], seq 4807, ack 97, win 6370, options [nop,nop,TS val 803549512 ecr 803549510], length 0\r\n`.... .@....................................z4..e........(.....\r\n/.1H/.1F\r\n13:15:11.252769 IP6 ::1.65046 > ::1.8080: Flags [.], ack 4808, win 6296, options [nop,nop,TS val 803549512 ecr 803549512], length 0\r\n`..0. .@....................................e...z4.......(.....\r\n/.1H/.1H\r\n13:15:11.252815 IP6 ::1.65046 > ::1.8080: Flags [F.], seq 97, ack 4808, win 6296, options [nop,nop,TS val 803549512 ecr 803549512], length 0\r\n`..0. .@....................................e...z4.......(.....\r\n/.1H/.1H\r\n13:15:11.252866 IP6 ::1.8080 > ::1.65046: Flags [.], ack 98, win 6370, options [nop,nop,TS val 803549512 ecr 803549512], length 0\r\n`.... .@....................................z4..e........(.....\r\n/.1H/.1H\r\n```\r\n\r\nHere is the tcpdump"
      },
      {
        "user": "alyssawilk",
        "created_at": "2019-01-31T15:56:19Z",
        "body": "If it's a close due to early response, it's likely ConnectionCloseType::FlushWriteAndDelay which was introduced to address the race described in #2929  \r\n\r\nIf it's not a close due to early response there might be some other corner case triggering the delay.\r\n\r\nIf that's the problem you could fix by adjusting  delayed_close_timeout in your HCM config but depending on how your client handles resets you might reintroduce the race described in that issue\r\n\r\ncc @AndresGuedez "
      },
      {
        "user": "fkowal",
        "created_at": "2019-02-01T12:13:44Z",
        "body": "Changing the __delayed_close_timeout__ did helped lowering the delay with the responses.\r\n\r\nThese metrics keep increasing, which I belive is an indication that varnish is not issuing a FIN after receiving the response.\r\n*http.ingress_http.downstream_cx_delayed_close_timeout* and *http.ingress_http.downstream_cx_destroy_local*\r\n\r\nThank you @alyssawilk "
      }
    ],
    "satisfaction_conditions": [
      "Explanation of why Envoy delays FIN packets when 'Connection: close' is present",
      "Configuration mechanism to control connection closure timing without reintroducing race conditions",
      "Clarification of metrics indicating improper connection termination"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:34:16"
    }
  },
  {
    "number": 1189,
    "title": "TLS between Envoys is not working",
    "created_at": "2017-06-29T00:34:06Z",
    "closed_at": "2017-06-29T16:27:58Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/1189",
    "body": "Hi,\r\n\r\nWe are trying to initiate a TCP connection through two Envoys, like so:\r\n```\r\nClient (nc) --> \"Client\" Envoy ==> \"Server\" Envoy --> Server (nc -l)\r\n```\r\nWhere the `==>` arrow is TLS (server certs, no client certs).\r\n\r\nThe client connection looks like\r\n```\r\ndate | nc -v 127.0.0.1 10000\r\n```\r\n\r\nAnd the server runs as\r\n```\r\nnc -l -k 8080\r\n```\r\n\r\nWhen trying to connect, we get inconsistent behavior.   Sometimes the date appears on the server side `nc`, but often it does not.\r\n\r\nHowever, the client side `nc` always reports \r\n```\r\nConnection to 127.0.0.1 10000 port [tcp/webmin] succeeded!\r\n```\r\n\r\n\r\nOn the server side, the Envoy debug logs are:\r\n```\r\n[2017-06-29 00:32:55.981][116][info][main] source/server/connection_handler_impl.cc:109] [C1] new connection\r\n[2017-06-29 00:32:55.981][116][info][filter] source/common/filter/tcp_proxy.cc:117] [C1] new tcp proxy session\r\n[2017-06-29 00:32:55.981][116][debug][filter] source/common/filter/tcp_proxy.cc:133] [C1] Creating connection to cluster service_local\r\n[2017-06-29 00:32:55.981][116][debug][connection] source/common/network/connection_impl.cc:418] [C2] connecting to 127.0.0.1:8080\r\n[2017-06-29 00:32:55.981][116][debug][connection] source/common/network/connection_impl.cc:427] [C2] connection in progress\r\n[2017-06-29 00:32:55.983][116][debug][connection] source/common/ssl/connection_impl.cc:128] [C1] handshake error: 5\r\n[2017-06-29 00:32:55.983][116][debug][connection] source/common/network/connection_impl.cc:341] [C1] remote close\r\n[2017-06-29 00:32:55.983][116][debug][connection] source/common/network/connection_impl.cc:135] [C1] closing socket: 1\r\n[2017-06-29 00:32:55.983][116][debug][connection] source/common/network/connection_impl.cc:102] [C2] closing data_to_write=0 type=1\r\n[2017-06-29 00:32:55.983][116][debug][connection] source/common/network/connection_impl.cc:135] [C2] closing socket: 2\r\n[2017-06-29 00:32:55.983][116][info][main] source/server/connection_handler_impl.cc:51] [C1] adding to cleanup list\r\n```\r\n\r\nAnd the client side, the Envoy debug logs are:\r\n\r\n```\r\n[2017-06-29 00:32:55.980][894][info][main] source/server/connection_handler_impl.cc:109] [C1] new connection\r\n[2017-06-29 00:32:55.980][894][info][filter] source/common/filter/tcp_proxy.cc:117] [C1] new tcp proxy session\r\n[2017-06-29 00:32:55.980][894][debug][filter] source/common/filter/tcp_proxy.cc:133] [C1] Creating connection to cluster service_remote\r\n[2017-06-29 00:32:55.980][894][debug][connection] source/common/network/connection_impl.cc:418] [C2] connecting to 172.17.0.2:10001\r\n[2017-06-29 00:32:55.980][894][debug][connection] source/common/network/connection_impl.cc:427] [C2] connection in progress\r\n[2017-06-29 00:32:55.981][894][debug][connection] source/common/network/connection_impl.cc:341] [C1] remote close\r\n[2017-06-29 00:32:55.981][894][debug][connection] source/common/network/connection_impl.cc:135] [C1] closing socket: 1\r\n[2017-06-29 00:32:55.981][894][debug][connection] source/common/network/connection_impl.cc:102] [C2] closing data_to_write=29 type=1\r\n[2017-06-29 00:32:55.981][894][debug][connection] source/common/ssl/connection_impl.cc:128] [C2] handshake error: 2\r\n[2017-06-29 00:32:55.981][894][debug][connection] source/common/network/connection_impl.cc:135] [C2] closing socket: 2\r\n[2017-06-29 00:32:55.981][894][info][main] source/server/connection_handler_impl.cc:51] [C1] adding to cleanup list\r\n```\r\n\r\n\r\n\r\nConfig for \"server\" Envoy:\r\n```json\r\n{\r\n    \"listeners\": [{\r\n        \"address\": \"tcp://0.0.0.0:10001\",\r\n        \"filters\": [{\r\n            \"type\": \"read\",\r\n            \"name\": \"tcp_proxy\",\r\n            \"config\": {\r\n              \"stat_prefix\": \"ingress_tcp\",\r\n              \"route_config\": {\r\n                  \"routes\": [{\r\n                    \"cluster\": \"service_local\"\r\n               }]\r\n            }\r\n          }\r\n        }],\r\n        \"ssl_context\": {\r\n          \"cert_chain_file\": \"certs/server.crt\",\r\n          \"private_key_file\": \"certs/server.key\"\r\n        }\r\n    }],\r\n    \"admin\": {\r\n        \"access_log_path\": \"/tmp/admin_access.log\",\r\n        \"address\": \"tcp://127.0.0.1:9901\"\r\n    },\r\n    \"cluster_manager\": {\r\n        \"clusters\": [{\r\n            \"name\": \"service_local\",\r\n            \"connect_timeout_ms\": 2500,\r\n            \"type\": \"static\",\r\n            \"lb_type\": \"round_robin\",\r\n            \"hosts\": [{\r\n                \"url\": \"tcp://127.0.0.1:8080\"\r\n            }]\r\n        }]\r\n    }\r\n}\r\n```\r\n\r\nConfig for \"client\" Envoy:\r\n```json\r\n{\r\n    \"listeners\": [{\r\n        \"address\": \"tcp://0.0.0.0:10000\",\r\n        \"filters\": [{\r\n            \"type\": \"read\",\r\n            \"name\": \"tcp_proxy\",\r\n            \"config\": {\r\n                \"stat_prefix\": \"ingress_tcp\",\r\n                \"route_config\": {\r\n                    \"routes\": [{\r\n                            \"cluster\": \"service_remote\"\r\n                    }]\r\n                }\r\n            }\r\n        }]\r\n    }],\r\n    \"admin\": {\r\n        \"access_log_path\": \"/tmp/admin_access.log\",\r\n        \"address\": \"tcp://127.0.0.1:9901\"\r\n    },\r\n    \"cluster_manager\": {\r\n        \"clusters\": [{\r\n            \"name\": \"service_remote\",\r\n            \"connect_timeout_ms\": 2500,\r\n            \"type\": \"static\",\r\n            \"lb_type\": \"round_robin\",\r\n            \"hosts\": [{\r\n                \"url\": \"tcp://172.17.0.2:10001\"\r\n            }],\r\n            \"ssl_context\": {\r\n              \"ca_cert_file\": \"certs/ca.crt\"\r\n            }\r\n        }]\r\n    }\r\n}\r\n```\r\n\r\n\r\nAny idea why this setup doesn't work consistently?\r\n\r\nThanks,\r\nAngela and @rosenhouse\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/1189/comments",
    "author": "angelachin",
    "comments": [
      {
        "user": "mattklein123",
        "created_at": "2017-06-29T14:42:37Z",
        "body": "When you run `date | nc -v 127.0.0.1 10000` the connection will be closed after writing the data. Envoy detects this close and terminates the proxied connection leading to a timing issue. Basically, Envoy does not currently support this case in the TCP proxy (accept client connection, write data, and guarantee that all data gets written if client closes connection). \r\n\r\nIs this a real use case or just a test? If just a test, try `telnet` or `nc` without a pipe so you can keep the connection open."
      },
      {
        "user": "angelachin",
        "created_at": "2017-06-29T16:27:58Z",
        "body": "Ok, that makes sense. It was just a test-- works fine when we don't pipe. Thanks!\r\n\r\n- Angela and @rosenhouse"
      }
    ],
    "satisfaction_conditions": [
      "Identification of connection closure timing issues in Envoy's TCP proxy implementation",
      "Clarification of Envoy's behavior with short-lived client connections in TCP proxy scenarios",
      "Guidance on valid testing methodologies for Envoy TCP proxy with TLS"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:35:48"
    }
  },
  {
    "number": 10701,
    "title": "thrift proxy test driver dependencies",
    "created_at": "2020-04-08T17:25:22Z",
    "closed_at": "2022-04-26T00:54:08Z",
    "labels": [
      "tech debt",
      "help wanted"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/10701",
    "body": "Envoy's thrift proxy network filter uses some python code to generate a variety of requests and responses in the various combinations of thrift transport and protocol that are support. One of the supported protocols, colloquially known as \"ttwitter\", is no longer supported in python and is not compatible with python3, blocking #4552.\r\n\r\nThe actual python3 incompatibility is in the twitter.common.rpc package and involves a type check against `long`, which no longer exists in python3. The fix is simple, but as the package is no longer support I don't expect we'll see an update. \r\n\r\nThis issue enumerates so possible paths forward:\r\n\r\n1. It's fairly simple to patch the library to remove the check for `long`. I think this is reasonable in the short-term.\r\n\r\n2. Bring the unsupported twitter.common.rpc code into the envoyproxy org (not necessarily envoyproxy/envoy), and fix it. I dislike this path because the entire point of using external libraries was to test against a different implementation of the protocol. If the protocol were ever updated (and it does have a versioning provision) we'd be implementing both sides of the integration test.\r\n\r\n3. Thrift supports other languages besides python and it should be possible to rewrite the code in `test/extensions/filters/network/thrift_proxy/driver` in another language. Java seems the mostly likely candidate since it's supported by bazel and has support for all the variations of thrift. I think we'd want to put that code in a new repository (under the envoyproxy org) and treat the entire payload generating structure as an external dependency.\r\n\r\n4. Deprecate ttwitter support and delete usage of the abandoned libraries. I don't have a sense of how much the ttwitter thrift protocol is used in conjunction with Envoy so I don't know how to gauge how painful this would be to end users.\r\n",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/10701/comments",
    "author": "zuercher",
    "comments": [
      {
        "user": "zuercher",
        "created_at": "2020-04-08T17:29:17Z",
        "body": "#10702 implements the first option above."
      },
      {
        "user": "rgs1",
        "created_at": "2022-04-25T23:00:58Z",
        "body": "I think we should get started with option 4 (deprecate ttwitter and remove the abandoned tests), I am happy to drive. I pinged @mattklein123 offline to get a sense of whether other deployments are relying on ttwitter.\r\n\r\ncc: @fishcakez @davinci26 @tkovacs-2 @caitong93  \n\n---\n\n@zuercher I think we can close this now that #20466 is done. \r\n\r\ncc: @phlax "
      },
      {
        "user": "zuercher",
        "created_at": "2022-04-26T00:54:08Z",
        "body": "For anyone going across this bug in the future -- we chose option 4 and have deprecated the ttwitter protocol."
      }
    ],
    "satisfaction_conditions": [
      "Resolve Python3 incompatibility blocking test execution",
      "Eliminate dependency on unmaintained third-party libraries",
      "Avoid maintaining redundant protocol implementations",
      "Assess impact on end-users before deprecating protocol support"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:36:09"
    }
  },
  {
    "number": 5412,
    "title": "create easier way to get a core dump locally and in CI",
    "created_at": "2018-12-24T17:03:28Z",
    "closed_at": "2019-11-08T22:24:47Z",
    "labels": [
      "area/build",
      "help wanted"
    ],
    "url": "https://github.com/envoyproxy/envoy/issues/5412",
    "body": "I was trying to debug the hot restart test and get a core dump, and it took me an embarrassingly long time to figure out how to do it under bazel (the main issue was that my shell `ulimit` settings don't transfer to the test invocation I think because bazel is running the test and not my shell). It would be really nice if we could do two things:\r\n1) Have a better way to get a core dump from a test run locally. Perhaps this is a run_under thing (per @htuch) that correctly sets up ulimit and also make sets the core dump output location to something known and then sets it back, and I guess also deals with sandboxing correctly (i.e., gives you very clear instructions on how to look at the core dump with the right symbols/binary).\r\n2) Also enables this in CI somehow where we could get a core dump saved as an artifact with the binary that created it. ",
    "comments_url": "https://api.github.com/repos/envoyproxy/envoy/issues/5412/comments",
    "author": "mattklein123",
    "comments": [
      {
        "user": "lizan",
        "created_at": "2019-11-08T22:13:00Z",
        "body": "@mattklein123 re: 1) after #8488 you can run test binary outside bazel without anything special (just invoke `bazel-bin/test/<binary>`). only general core dump configuration are needed."
      },
      {
        "user": "mattklein123",
        "created_at": "2019-11-08T22:24:46Z",
        "body": "Cool SGTM will close. Thank you!"
      }
    ],
    "satisfaction_conditions": [
      "Enable core dump generation for local test runs without manual environment configuration (e.g., ulimit settings)"
    ],
    "_classification": {
      "category": "Can be dockerized without any issue",
      "timestamp": "2025-04-05 00:36:21"
    }
  }
]