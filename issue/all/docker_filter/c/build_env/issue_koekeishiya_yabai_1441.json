{
  "number": 1441,
  "title": "Zoomed windows are occluded if not preemptively raised",
  "created_at": "2022-09-22T20:48:02Z",
  "closed_at": "2022-09-23T07:15:56Z",
  "labels": [
    "question"
  ],
  "url": "https://github.com/koekeishiya/yabai/issues/1441",
  "body": "Zooming a window which hasn't been raised will cause it to be occluded by other windows.\r\n(or more specifically all windows which have been raised since the window in question itself was raised)\r\n\r\nThis will frequently happen if you use `focus_follows_mouse = autofocus`. \r\nA common use case (at least for me) is to hover a window I want to fullscreen and then pressing the corresponding binding. \r\nAs it currently is I have to press the window before or after zooming it.\r\n\r\nA solution would be to force-raise any window which are zoomed.",
  "comments_url": "https://api.github.com/repos/koekeishiya/yabai/issues/1441/comments",
  "author": "jonatan-branting",
  "comments": [
    {
      "user": "jonatan-branting",
      "created_at": "2022-09-22T20:51:44Z",
      "body": "~~This also seems to occur using `focus_follows_mouse = autoraise`, although not consistently. Not sure when or why, however.~~ Seems not to be the case any more on latest master, was a few commits behind. Autofocus is still problematic though."
    },
    {
      "user": "koekeishiya",
      "created_at": "2022-09-22T22:24:19Z",
      "body": "This was an ordering bug with the animation system; I have changed the system not to mess with ordering since then. I personally think I'd sometimes prefer the behaviour you are talking about, where I can zoom a window and not make it frontmost.\r\n\r\nThe behaviour you described can be easily achieved by using the following command: ` yabai -m window --toggle zoom-fullscreen --focus` so I don't think it needs to be made a default?"
    },
    {
      "user": "jonatan-branting",
      "created_at": "2022-09-23T07:15:56Z",
      "body": "> This was an ordering bug with the animation system; I have changed the system not to mess with ordering since then. I personally think I'd sometimes prefer the behaviour you are talking about, where I can zoom a window and not make it frontmost.\r\n> \r\n> The behaviour you described can be easily achieved by using the following command: ` yabai -m window --toggle zoom-fullscreen --focus` so I don't think it needs to be made a default?\r\n\r\nThat's reasonable, completely missed that `--focus` was an option. Thanks!"
    }
  ],
  "satisfaction_conditions": [
    "Ensure zoomed windows are brought to front without requiring manual focus",
    "Maintain compatibility with focus_follows_mouse=autofocus behavior",
    "Provide a non-disruptive solution that doesn't require changing default window ordering behavior",
    "Allow combining zoom action with window focusing in a single operation"
  ],
  "_classification": {
    "category": "Can be dockerized without any issue",
    "timestamp": "2025-04-05 00:05:00"
  },
  "git_commit_info": {
    "sha": "e7cda15ff918ccec733c48b750c1da32f57b9c7f",
    "date": "2019-08-03T20:38:26Z",
    "message": "..",
    "author": "koekeishiya"
  },
  "repository_info": {
    "structure_summary": ".\n./.git\n./.git/branches\n./.git/description\n./.git/hooks\n./.git/hooks/applypatch-msg.sample\n./.git/hooks/commit-msg.sample\n./.git/hooks/post-update.sample\n./.git/hooks/pre-applypatch.sample\n./.git/hooks/pre-commit.sample\n./.git/hooks/pre-merge-commit.sample\n./.git/hooks/pre-push.sample\n./.git/hooks/pre-receive.sample\n./.git/hooks/push-to-checkout.sample\n./.git/hooks/update.sample\n./.git/hooks/fsmonitor-watchman.sample\n./.git/hooks/pre-rebase.sample\n./.git/hooks/prepare-commit-msg.sample\n./.git/hooks/sendemail-validate.sample\n./.git/info\n./.git/info/exclude\n./.git/config\n./.git/objects\n./.git/objects/pack\n./.git/objects/pack/pack-e1d842ed6289fe1747a8b0ad6df5dc7af8b091e0.pack\n./.git/objects/pack/pack-e1d842ed6289fe1747a8b0ad6df5dc7af8b091e0.rev\n./.git/objects/pack/pack-e1d842ed6289fe1747a8b0ad6df5dc7af8b091e0.idx\n./.git/objects/info\n./.git/HEAD\n./.git/refs\n./.git/refs/heads\n./.git/refs/heads/master\n./.git/refs/tags\n./.git/refs/remotes\n./.git/refs/remotes/origin\n./.git/refs/remotes/origin/HEAD\n./.git/packed-refs\n./.git/logs\n./.git/logs/refs\n./.git/logs/refs/remotes\n./.git/logs/refs/remotes/origin\n./.git/logs/refs/remotes/origin/HEAD\n./.git/logs/refs/heads\n./.git/logs/refs/heads/master\n./.git/logs/HEAD\n./.git/index\n./LICENSE.txt\n./doc\n./doc/yabai.1\n./doc/yabai.asciidoc\n./examples\n./examples/skhdrc\n./examples/yabairc\n./src\n./src/misc\n./src/misc/hashtable.h\n./src/misc/helpers.h\n./src/misc/log.h\n./src/misc/macros.h\n./src/misc/notify.h\n./src/misc/sbuffer.h\n./src/misc/socket.c\n./src/misc/socket.h\n./src/osax\n./src/osax/common.h\n./src/osax/loader.m\n./src/osax/payload.m\n./src/osax/sa.h\n./src/osax/sa.m\n./src/osax/sa_loader.c\n./src/osax/sa_payload.c\n./src/application.c\n./src/application.h\n./src/bar.c\n./src/bar.h\n./src/border.c\n./src/border.h\n./src/display.c\n./src/display.h\n./src/display_manager.c\n./src/display_manager.h\n./src/event.c\n./src/event.h\n./src/event_loop.c\n./src/event_loop.h\n./src/event_tap.c\n./src/event_tap.h\n./src/manifest.m\n./src/message.c\n./src/message.h\n./src/mouse.h\n./src/process.c\n./src/process.h\n./src/process_manager.c\n./src/process_manager.h\n./src/rule.c\n./src/rule.h\n./src/space.c\n./src/space.h\n./src/space_manager.c\n./src/space_manager.h\n./src/view.c\n./src/view.h\n./src/window.c\n./src/window.h\n./src/window_manager.c\n./src/window_manager.h\n./src/workspace.h\n./src/workspace.m\n./src/yabai.c\n./.gitignore\n./.travis.yml\n./CHANGELOG.md\n./CODESIGN.md\n./README.md\n./img\n./img/seticon.py\n./makefile\n",
    "readme": "\n--- ./README.md ---\n[![Build Status](https://travis-ci.org/koekeishiya/yabai.svg?branch=master)](https://travis-ci.org/koekeishiya/yabai)\n\n![img](https://user-images.githubusercontent.com/6175959/59977681-9d873500-95d4-11e9-91e7-7be05cb11d06.png)\n\n**yabai** started as a C99 rewrite of [*chunkwm*](https://github.com/koekeishiya/chunkwm), originally supposed to be its first RC version.\n\nHowever due to major architectural changes, supported systems, and changes to functionality, it is being released separately.\nThere are multiple reasons behind these changes, based on the experience I've gained through experimenting with, designing, and using both *kwm*\nand *chunkwm*. Some of these changes are performance related while other changes have been made to keep the user experience simple and more complete,\nattempts to achieve a seamless integration with the operating system (when possible), proper error reporting, and yet still keep the property of being\ncustomizable.\n\n### Requirements\n\n**yabai** is officially supported on **macOS High Sierra 10.13.6** and **macOS Mojave 10.14.4/5**. It uses a *scripting-addition*, which is a bundle of code\nthat we inject into *Dock.app* to elevate our privileges when communicating with the *WindowServer*. The *WindowServer* is a single point of contact for all applications.\nIt is central to the implementation of the GUI frameworks and many other services. Because of this, [*System Integrity Protection*](https://support.apple.com/en-us/HT204899) must be disabled for **yabai** to function properly.\n\n**yabai** must be given permission to utilize the *Accessibility API*, and will request access upon launch. The application must be restarted after access has been granted.\nIf you are building from source or using the *brew --HEAD option*, it is recommended to first [*codesign*](https://github.com/koekeishiya/yabai/blob/master/CODESIGN.md) the binary such that access can persist through builds/updates.\nYou can read more about codesigning [here](https://developer.apple.com/library/archive/documentation/Security/Conceptual/CodeSigningGuide/Procedures/Procedures.html#//apple_ref/doc/uid/TP40005929-CH4-SW2).\n\nThe *Mission Control* setting [*displays have separate spaces*](https://support.apple.com/library/content/dam/edam/applecare/images/en_US/osx/separate_spaces.png) must be enabled.\n\n**yabai** stores a lock file at `/tmp/yabai_$USER.lock` to keep multiple instances from launching by the same user.\n\n**yabai** stores a unix domain socket at `/tmp/yabai_$USER.socket` to listen for messages.\n\n**DISCLAIMER:** Use at your own discretion. I take no responsibility if anything should happen to your machine while trying to install, test or otherwise use this software in any form.\nYou acknowledge that you understand the potential risk that may come from disabling [*System Integrity Protection*](https://support.apple.com/en-us/HT204899) on your system, and I make\nno recommendation as to whether you should or should not disable SIP.\n\n### Install\n\nRequires xcode-10 command-line tools.\n\n**Homebrew**:\n\n```\n# clone tap\nbrew tap koekeishiya/formulae\n\n# install latest stable version\nbrew install yabai\n\n# install from git master branch\nbrew install --HEAD yabai\n```\n\n**Source**:\n\n```\n# clone repo and build binary\ngit clone https://github.com/koekeishiya/yabai\nmake install      # release version\nmake              # debug version\n\n# symlink binary to a location in $PATH\nln -s $PWD/bin/yabai /usr/local/bin/yabai\n\n# symlink manpage\nln -s $PWD/doc/yabai.1 /usr/local/share/man/man1/yabai.1\n```\n\n**Install scripting-addition**:\n\n```\nsudo yabai --install-sa\n```\n\n### Uninstall\n\n**yabai** is a single binary application and is trivial to uninstall.\n\n**Uninstall scripting-addition**:\n\n```\nsudo yabai --uninstall-sa\n```\n\n**Remove config and tmp files**:\n\n```\nrm ~/.yabairc\nrm /tmp/yabai_$USER.lock\nrm /tmp/yabai_$USER.socket\nrm /tmp/yabai-sa_$USER.socket\n```\n\n**Homebrew**:\n\n```\n# if you were using brew services to manage yabai\nbrew services stop yabai\nrm -rf /usr/local/var/log/yabai\n\n# uninstall binary, manpage and plist\nbrew uninstall yabai\n```\n\n**Source**:\n\n```\n# remove binary symlink\nrm /usr/local/bin/yabai\n\n# remove manpage symlink\nrm /usr/local/share/man/man1/yabai.1\n\nremove the cloned git-repository..\n```\n\n### Configuration\n\nThe default configuration file is a shell-script located at one of the following places (in order):\n\n - `$XDG_CONFIG_HOME/yabai/yabairc`\n - `$HOME/.config/yabai/yabairc`\n - `$HOME/.yabairc`\n\nA different location can be specified with the *--config | -c* argument. The configuration file consists of commands that\nsend messages to the running **yabai** instance. To send a message, invoke **yabai** with the *--message | -m* argument.\n\nKeyboard shortcuts can be defined with [*skhd*](https://github.com/koekeishiya/skhd) or any other suitable software you may prefer.\n\nSample configuration files can be found in the [examples](https://github.com/koekeishiya/yabai/tree/master/examples) directory.\n\nRefer to the [*documentation*](https://github.com/koekeishiya/yabai/blob/master/doc/yabai.asciidoc) for further information.\n\n\n\n--- ./CHANGELOG.md ---\n# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThis project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n### Added\n- Commands to toggle mission-control, show-desktop, and application expose [#147](https://github.com/koekeishiya/yabai/issues/147)\n- Command to close windows that provide a close button in its titlebar [#84](https://github.com/koekeishiya/yabai/issues/84)\n- Expose window shadow as a property in window queries and add shadow as an option to *window --toggle* [#171](https://github.com/koekeishiya/yabai/issues/171)\n\n### Changed\n- Automatically restart Dock.app after installing the scripting-addition, and tweak messages shown when a payload gets loaded, is already loaded or does not support the version of macOS it's running on [#135](https://github.com/koekeishiya/yabai/issues/135)\n- Work around macOS craziness so that we can properly tile a window after it leaves native fullscreen mode [#36](https://github.com/koekeishiya/yabai/issues/36)\n- Return an error for queries with invalid, named selectors [#158](https://github.com/koekeishiya/yabai/issues/158)\n- Resolve a potential multi-threaded issue due to \"undefined behaviour\" regarding x86 instruction ordering [#153](https://github.com/koekeishiya/yabai/issues/153)\n- Fix space padding and gap underflow when modified with a relative value [#141](https://github.com/koekeishiya/yabai/issues/141)\n- Window_* signals no longer pass the application pid [#154](https://github.com/koekeishiya/yabai/issues/154)\n- Ignore all windows that report a main role of AXPopover [#162](https://github.com/koekeishiya/yabai/issues/162)\n- Ignore all windows that report a sub role of AXUnknown [#164](https://github.com/koekeishiya/yabai/issues/164)\n- Track when the Dock changes preferences [#147](https://github.com/koekeishiya/yabai/issues/147)\n- Properly detect when mission-control is deactivated [#169](https://github.com/koekeishiya/yabai/issues/169)\n- Pass arguments to signals through environment variables instead [#167](https://github.com/koekeishiya/yabai/issues/167)\n- Revert change that made the status bar draw above other windows because of compatibility with \"windowed fullscreen\" applications [#170](https://github.com/koekeishiya/yabai/issues/170)\n- Warping a window should respect insert direction in scenarios where the default warp is equal to a swap operation [#146](https://github.com/koekeishiya/yabai/issues/146)\n- Exiting mission-control will invalidate the region assigned to Spaces/Views as because a Space may have been dragged to a different monitor [#118](https://github.com/koekeishiya/yabai/issues/118)\n- Application_Launched signal incorrectly fired multiple times due to accessibility retries [#175](https://github.com/koekeishiya/yabai/issues/175)\n- Global space settings should properly apply again [#176](https://github.com/koekeishiya/yabai/issues/176)\n- Fixed an issue that could cause windows to be overlapped when tiled [#183](https://github.com/koekeishiya/yabai/issues/183)\n\n## [1.1.2] - 2019-07-15\n### Changed\n- Float native macOS fullscreen spaces [#130](https://github.com/koekeishiya/yabai/issues/130)\n- Write error messsages returned to the client through *stderr* [#131](https://github.com/koekeishiya/yabai/issues/131)\n- Allow window focus command to work without the existence of a focused window [#133](https://github.com/koekeishiya/yabai/issues/133)\n\n## [1.1.1] - 2019-07-14\n### Changed\n- The status bar should be disabled by default, if setting is missing from the config [#126](https://github.com/koekeishiya/yabai/issues/126)\n\n## [1.1.0] - 2019-07-14\n### Added\n- Make loading scripting-addition more robust - validating version and functionality [#108](https://github.com/koekeishiya/yabai/issues/108)\n- Merge options for query constraints with command selectors to have a unified method for addressing displays, spaces, and windows,\n  as well as allowing commands to specify both a *selected* and a *given entity* of its type [#112](https://github.com/koekeishiya/yabai/issues/112)\n\n### Changed\n- Dragging a tiled window to another display using the mouse will cause the window to be warped to that display upon release [#103](https://github.com/koekeishiya/yabai/issues/103)\n- Escape quotes in window titles returned through query commands [#114](https://github.com/koekeishiya/yabai/issues/114)\n- Extend window, space and display properties exposed through *query* commands [#116](https://github.com/koekeishiya/yabai/issues/116)\n- Native macOS fullscreen spaces can now be addressed using their mission-control index, and can also be moved [#117](https://github.com/koekeishiya/yabai/issues/117)\n- Opacity changes only apply to windows that properly identify as  \"standard\" or \"dialog\" windows [#120](https://github.com/koekeishiya/yabai/issues/120)\n- The status bar should now properly draw above any potential window that overlaps its frame [#124](https://github.com/koekeishiya/yabai/issues/124)\n- Support *XDG_CONFIG_HOME* when locating the config file [#125](https://github.com/koekeishiya/yabai/issues/125)\n- Allow every single config setting to be applied at runtime with immediate effect. Run config asynchronously after initialization [#122](https://github.com/koekeishiya/yabai/issues/122)\n\n## [1.0.6] - 2019-07-09\n### Changed\n- No longer necessary to depend on the scripting-addition to focus a window [#102](https://github.com/koekeishiya/yabai/issues/102)\n- Extend definition of *WINDOW_SEL* to include *smallest* and *largest* [#105](https://github.com/koekeishiya/yabai/issues/105)\n\n## [1.0.5] - 2019-07-07\n### Changed\n- Fix missing quotation of string value outputted through *window query* commands [#90](https://github.com/koekeishiya/yabai/issues/90)\n\n## [1.0.4] - 2019-07-06\n### Changed\n- Fixed an issue that prevented *yabai* from running under multiple users simultaneously [#95](https://github.com/koekeishiya/yabai/issues/95)\n- Extend window properties exposed through *query* commands [#90](https://github.com/koekeishiya/yabai/issues/90)\n- Extend definition of *WINDOW_SEL*, *SPACE_SEL* and *DISPLAY_SEL* to include *first*, *last*, and *recent* [#85](https://github.com/koekeishiya/yabai/issues/85)\n\n## [1.0.3] - 2019-06-30\n### Changed\n- Prevent *status_bar* and *window borders* from displaying in native fullscreen spaces [#71](https://github.com/koekeishiya/yabai/issues/71)\n- Fixed an issue with the *status_bar* where *has_battery* and *charging* would not be default initialized when macOS report that there are zero power sources [#60](https://github.com/koekeishiya/yabai/issues/60)\n- Properly destroy the underlaying *view* when a *space* changes layout [#81](https://github.com/koekeishiya/yabai/issues/81)\n\n## [1.0.2] - 2019-06-25\n### Changed\n- Hide power indicator from the status-bar if a battery could not be found [#60](https://github.com/koekeishiya/yabai/issues/60)\n- Disable focus follows mouse while the *mouse_modifier* key is held down [#62](https://github.com/koekeishiya/yabai/issues/62)\n- Silence meaningless warning reported by the scripting-bridge framework [#55](https://github.com/koekeishiya/yabai/issues/55)\n- Extend definition of *WINDOW_SEL* to include *mouse*, targetting the window below the cursor [#66](https://github.com/koekeishiya/yabai/issues/66)\n- Allow all *config* (except *status_bar*) settings to be edited at runtime [#69](https://github.com/koekeishiya/yabai/issues/69)\n- Window should not be added to the window-tree twice when deminimized on an inactive display [#70](https://github.com/koekeishiya/yabai/issues/70)\n- Expose *window_placement* as a config setting to specify if windows become the first or second child [#65](https://github.com/koekeishiya/yabai/issues/65)\n\n## [1.0.1] - 2019-06-23\n### Added\n- First official release\n\n[Unreleased]: https://github.com/koekeishiya/yabai/compare/v1.1.2...HEAD\n[1.1.2]: https://github.com/koekeishiya/yabai/compare/v1.1.1...v1.1.2\n[1.1.1]: https://github.com/koekeishiya/yabai/compare/v1.1.0...v1.1.1\n[1.1.0]: https://github.com/koekeishiya/yabai/compare/v1.0.6...v1.1.0\n[1.0.6]: https://github.com/koekeishiya/yabai/compare/v1.0.5...v1.0.6\n[1.0.5]: https://github.com/koekeishiya/yabai/compare/v1.0.4...v1.0.5\n[1.0.4]: https://github.com/koekeishiya/yabai/compare/v1.0.3...v1.0.4\n[1.0.3]: https://github.com/koekeishiya/yabai/compare/v1.0.2...v1.0.3\n[1.0.2]: https://github.com/koekeishiya/yabai/compare/v1.0.1...v1.0.2\n[1.0.1]: https://github.com/koekeishiya/yabai/releases/tag/v1.0.1\n\n\n\n--- ./CODESIGN.md ---\nCreate *Code Signing* certificate named \"yabai-cert\" using *Keychain Access.app*:\n\n* Open *Keychain Access.app*\n* From *menu* select *Keychain Access* -> *Certificate Assistant* -> *Create a certificate*\n* Fill the certificate form:\n    * Name: yabai-cert\n    * Identity Type: Self Signed Root\n    * Certificate Type: Code Signing\n\nSign the binary:\n\n```\ncodesign -fs \"yabai-cert\" /path/to/bin/yabai\n```\n\n\n",
    "readme_filenames": [
      "./README.md",
      "./CHANGELOG.md",
      "./CODESIGN.md"
    ]
  },
  "llm_calls_before_build": 0,
  "dockerfile_attempt_1": 1,
  "dockerfile": "FROM ubuntu:latest AS builder\n\nRUN apt-get update && \\\n    apt-get install -y \\\n    git \\\n    make \\\n    clang \\\n    libx11-dev \\\n    libxmu-dev \\\n    libxext-dev \\\n    pkg-config \\\n    && rm -rf /var/lib/apt/lists/*\n\nRUN git clone https://github.com/koekeishiya/yabai /tmp/yabai\nWORKDIR /tmp/yabai\nRUN git checkout e7cda15ff918ccec733c48b750c1da32f57b9c7f\n\n# Install macOS SDK dependencies (not possible in Linux environment)\n# This Dockerfile cannot properly build yabai due to macOS framework dependencies\n# yabai requires macOS and cannot be built in Linux containers\n# Please build natively on macOS using: make install",
  "dockerfile_build_success": true,
  "llm_calls_total": 10
}