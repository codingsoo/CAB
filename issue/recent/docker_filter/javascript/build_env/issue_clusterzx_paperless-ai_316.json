{
  "number": 316,
  "title": "OpenAI API Key is not valid. Please check the key.",
  "created_at": "2025-02-10T20:59:29Z",
  "closed_at": "2025-02-10T22:01:15Z",
  "labels": [],
  "url": "https://github.com/clusterzx/paperless-ai/issues/316",
  "body": "Hey Clusterzx,\n I'm just about to set up paperless-ai, now it only fails because of the OpenAI key \"OpenAI API Key is not valid. Please check the key.\" The key is 100% correct... Do you have any idea what else I'm doing wrong?",
  "comments_url": "https://api.github.com/repos/clusterzx/paperless-ai/issues/316/comments",
  "author": "UncleCCC",
  "comments": [
    {
      "user": "clusterzx",
      "created_at": "2025-02-10T21:08:44Z",
      "body": "Do you have positive balance on this key? Free-Tier does not work."
    },
    {
      "user": "UncleCCC",
      "created_at": "2025-02-10T21:23:15Z",
      "body": "Ohhh sorry... That was the mistake, I have little experience with OpenAI... I have a ChatGPT license, I thought this also applies to OpenAI. Now it works thanks for your quick help"
    }
  ],
  "satisfaction_conditions": [
    "Identifies limitations of OpenAI Free-Tier keys",
    "Explains billing/account requirements for OpenAI API access",
    "Provides validation steps beyond key syntax checking"
  ],
  "_classification": {
    "category": "Can be dockerized without any issue",
    "timestamp": "2025-04-05 01:46:08"
  },
  "git_commit_info": {
    "sha": "964c1bceefaf54502b606944b0dcdf5b4735eb15",
    "date": "2025-02-09T16:05:33Z",
    "message": "Update README.md",
    "author": "Your friendly nerd"
  },
  "repository_info": {
    "structure_summary": ".\n./.git\n./.git/branches\n./.git/description\n./.git/hooks\n./.git/hooks/applypatch-msg.sample\n./.git/hooks/commit-msg.sample\n./.git/hooks/post-update.sample\n./.git/hooks/pre-applypatch.sample\n./.git/hooks/pre-commit.sample\n./.git/hooks/pre-merge-commit.sample\n./.git/hooks/pre-push.sample\n./.git/hooks/pre-receive.sample\n./.git/hooks/push-to-checkout.sample\n./.git/hooks/update.sample\n./.git/hooks/fsmonitor-watchman.sample\n./.git/hooks/pre-rebase.sample\n./.git/hooks/prepare-commit-msg.sample\n./.git/hooks/sendemail-validate.sample\n./.git/info\n./.git/info/exclude\n./.git/config\n./.git/objects\n./.git/objects/pack\n./.git/objects/pack/pack-177533a7d239b30565e3dba862f855a7518c653f.pack\n./.git/objects/pack/pack-177533a7d239b30565e3dba862f855a7518c653f.rev\n./.git/objects/pack/pack-177533a7d239b30565e3dba862f855a7518c653f.idx\n./.git/objects/info\n./.git/HEAD\n./.git/refs\n./.git/refs/heads\n./.git/refs/heads/main\n./.git/refs/tags\n./.git/refs/remotes\n./.git/refs/remotes/origin\n./.git/refs/remotes/origin/HEAD\n./.git/packed-refs\n./.git/logs\n./.git/logs/refs\n./.git/logs/refs/remotes\n./.git/logs/refs/remotes/origin\n./.git/logs/refs/remotes/origin/HEAD\n./.git/logs/refs/heads\n./.git/logs/refs/heads/main\n./.git/logs/HEAD\n./.git/index\n./.dockerignore\n./.env.example\n./.github\n./.github/FUNDING.yml\n./.github/ISSUE_TEMPLATE\n./.github/ISSUE_TEMPLATE/feature_request.md\n./.github/ISSUE_TEMPLATE/bug_report.md\n./.github/workflows\n./.github/workflows/docker-build-push.yml\n./.github/workflows/stale.yml\n./.gitignore\n./CODE_OF_CONDUCT.md\n./CONTRIBUTING.md\n./LICENSE\n./PRIVACY_POLICY.md\n./README.md\n./SECURITY.md\n./config\n./config/config.js\n./dashboard.png\n./docs\n./docs/README.md\n./docs/index.html\n./ecosystem.config.js\n./eslint.config.mjs\n./models\n./models/document.js\n./prettierrc.json\n./preview.png\n./public\n./public/css\n./public/css/settings.css\n./public/css/chat.css\n./public/css/dashboard.css\n./public/css/setup.css\n./public/js\n./public/js/chat.js\n./public/js/history.js\n./public/js/manual.js\n./public/js/playground-analyzer.js\n./public/js/dashboard.js\n./public/js/playground.js\n./public/js/settings.js\n./public/js/setup.js\n./routes\n./routes/auth.js\n./routes/setup.js\n./services\n./services/debugService.js\n./services/documentsService.js\n./services/loggerService.js\n./services/aiServiceFactory.js\n./services/chatService.js\n./services/customService.js\n./services/manualService.js\n./services/ollamaService.js\n./services/openaiService.js\n./services/paperlessService.js\n./services/setupService.js\n./setup.png\n./views\n./views/debug.ejs\n./views/index.ejs\n./views/layout.ejs\n./views/manual.ejs.bak\n./views/template.ejs\n./views/chat.ejs\n./views/dashboard.ejs\n./views/history.ejs\n./views/login.ejs\n./views/manual.ejs\n./views/playground.ejs\n./views/settings.ejs\n./views/setup.ejs\n./Dockerfile\n./docker-compose.yml\n./package-lock.json\n./package.json\n./paperless-ai-chrome-extension.zip\n./server.js\n",
    "readme": "\n--- ./README.md ---\n![GitHub commit activity](https://img.shields.io/github/commit-activity/t/clusterzx/paperless-ai) ![Docker Pulls](https://img.shields.io/docker/pulls/clusterzx/paperless-ai) ![GitHub User's stars](https://img.shields.io/github/stars/clusterzx) ![GitHub License](https://img.shields.io/github/license/clusterzx/paperless-ai?cacheSeconds=1)\n\n# Paperless-AI\n\nAn automated document analyzer for Paperless-ngx using OpenAI API, Ollama and all OpenAI API compatible Services to automatically analyze and tag your documents. \\\nIt features: Automode, Manual Mode, Ollama and OpenAI, a Chat function to query your documents with AI, a modern and intuitive Webinterface. \\\n\\\n**Following Services and OpenAI API compatible services have been successfully tested:**\n- Ollama\n- OpenAI\n- DeepSeek.ai\n- OpenRouter.ai\n- Perplexity.ai\n- Together.ai\n- VLLM\n- LiteLLM\n- Fastchat\n- Gemini (Google)\n- ... and there are possibly many more\n\n![PPAI_SHOWCASE3](https://github.com/user-attachments/assets/1fc9f470-6e45-43e0-a212-b8fa6225e8dd)\n\n\n## Features\n\n### Automated Document Management\n- **Automatic Scanning**: Identifies and processes new documents within Paperless-ngx.\n- **AI-Powered Analysis**: Leverages OpenAI API and Ollama (Mistral, Llama, Phi 3, Gemma 2) for precise document analysis.\n- **Metadata Assignment**: Automatically assigns titles, tags, document_type and correspondent details.\n\n### Advanced Customization Options\n- **Predefined Processing Rules**: Specify which documents to process based on existing tags. *(Optional)* \ud83c\udd95\n- **Selective Tag Assignment**: Use only selected tags for processing. *(Disables the prompt dialog)* \ud83c\udd95\n- **Custom Tagging**: Assign a specific tag (of your choice) to AI-processed documents for easy identification. \ud83c\udd95\n\n### Manual Mode\n- **AI-Assisted Analysis**: Manually analyze documents with AI support in a modern web interface. *(Accessible via the `/manual` endpoint)* \ud83c\udd95\n\n### Interactive Chat Functionality\n- **Document Querying**: Ask questions about your documents and receive accurate, AI-generated answers. \ud83c\udd95\n\n## Installation\n\nVisit the Wiki for installation:\\\n[Click here for Installation](https://github.com/clusterzx/paperless-ai/wiki/2.-Installation)\n-------------------------------------------\n\n\n## Docker Support\n\nThe application comes with full Docker support:\n\n- Automatic container restart on failure\n- Health monitoring\n- Volume persistence for database\n- Resource management\n- Graceful shutdown handling\n\n## Development\n\nTo run the application locally without Docker:\n\n1. Install dependencies:\n```bash\nnpm install\n```\n\n2. Start the development server:\n```bash\nnpm run test\n```\n\n## Contributing\n\n1. Fork the repository\n2. Create your feature branch (`git checkout -b feature/AmazingFeature`)\n3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)\n4. Push to the branch (`git push origin feature/AmazingFeature`)\n5. Open a Pull Request\n\n## License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n## Acknowledgments\n\n- [Paperless-ngx](https://github.com/paperless-ngx/paperless-ngx) for the amazing document management system\n- OpenAI API\n- The Express.js and Node.js communities for their excellent tools\n\n## Support\n\nIf you encounter any issues or have questions:\n\n1. Check the [Issues](https://github.com/clusterzx/paperless-ai/issues) section\n2. Create a new issue if yours isn't already listed\n3. Provide detailed information about your setup and the problem\n\n## Roadmap (DONE)\n\n- [x] Support for custom AI models\n- [x] Support for multiple language analysis\n- [x] Advanced tag matching algorithms\n- [x] Custom rules for document processing\n- [x] Enhanced web interface with statistics\n\n\n\n\n--- ./docs/README.md ---\n \n\n\n",
    "readme_filenames": [
      "./README.md",
      "./docs/README.md",
      "./.github/ISSUE_TEMPLATE/feature_request.md"
    ],
    "dockerfile": "\n--- ./Dockerfile ---\n# Use a slim Node.js (LTS) image as base\nFROM node:22-slim\n\nWORKDIR /app\n\n# Install system dependencies and clean up in single layer\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends \\\n    python3 \\\n    make \\\n    g++ \\\n    curl && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n\n# Install PM2 process manager globally\nRUN npm install pm2 -g\n\n# Copy package files for dependency installation\nCOPY package*.json ./\n\n# Install node dependencies with clean install\nRUN npm ci --only=production && npm cache clean --force\n\n# Copy application source code\nCOPY . .\n\n# Configure persistent data volume\nVOLUME [\"/app/data\"]\n\n# Configure application port\nEXPOSE 3000\n\n# Add health check\nHEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 \\\n    CMD curl -f http://localhost:3000/health || exit 1\n\n# Set production environment\nENV NODE_ENV=production\n\n# Start application with PM2 with user node\nCMD [\"pm2-runtime\", \"ecosystem.config.js\"]\n\n",
    "dockerfile_paths": [
      "./Dockerfile"
    ],
    "github_workflows": {
      ".github/workflows/docker-build-push.yml": "on:\n  release:\n    types: [published]  # Only triggers when a release is published\n  schedule:\n    - cron: \"0 0 * * *\" # Nightly build\njobs:\n  docker:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v3\n        with:\n          fetch-depth: 0\n          \n      - name: Set up QEMU\n        uses: docker/setup-qemu-action@v2\n        \n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v2\n        \n      - name: Log in to Docker Hub\n        uses: docker/login-action@v2\n        with:\n          username: ${{ secrets.DOCKER_USERNAME }}\n          password: ${{ secrets.DOCKER_PASSWORD }}\n          \n      - name: Login to GitHub Container Registry\n        uses: docker/login-action@v2\n        with:\n          registry: ghcr.io\n          username: ${{ github.repository_owner }}\n          password: ${{ secrets.GHCR_PAT }}\n          \n      - name: Extract metadata\n        id: meta\n        uses: docker/metadata-action@v4\n        with:\n          images: |\n            ${{ secrets.DOCKER_USERNAME }}/paperless-ai\n            ghcr.io/${{ github.repository_owner }}/paperless-ai\n          tags: |\n            type=schedule,pattern=nightly\n            type=semver,pattern={{version}},enable=${{ github.event_name == 'release' }}\n            type=raw,value=latest,enable=${{ github.event_name == 'release' }}\n            \n      - name: Build and push\n        uses: docker/build-push-action@v4\n        with:\n          context: .\n          push: true\n          platforms: linux/amd64,linux/arm64\n          tags: ${{ steps.meta.outputs.tags }}\n          labels: ${{ steps.meta.outputs.labels }}\n",
      ".github/workflows/stale.yml": "name: Mark stale issues and pull requests\n\non:\n  schedule:\n    - cron: \"0 0 * * *\" # Runs daily at midnight\n\njobs:\n  stale:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Close stale issues and pull requests\n      uses: actions/stale@v8\n      with:\n        repo-token: ${{ secrets.stale_bot }}\n        stale-issue-message: \"This issue has been marked as stale due to inactivity. Please respond to keep it open.\"\n        stale-pr-message: \"This pull request has been marked as stale due to inactivity. Please update it to keep it open.\"\n        close-issue-message: \"This issue has been closed due to lack of response.\"\n        close-pr-message: \"This pull request has been closed due to lack of response.\"\n        days-before-stale: 7 # Days before an issue or PR is marked as stale\n        days-before-close: 3 # Days before a stale issue or PR is closed\n        stale-issue-label: \"stale\" # Label added to stale issues\n        exempt-issue-labels: \"wontfix,bug\" # Labels that exempt issues from being marked as stale\n        only-issues: true # Only affect issues, not PRs\n"
    }
  },
  "llm_calls_before_build": 0,
  "github_workflows_found": [
    ".github/workflows/docker-build-push.yml",
    ".github/workflows/stale.yml"
  ],
  "dockerfile": "FROM node:22-slim\n\nWORKDIR /app\n\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends \\\n    git \\\n    python3 \\\n    make \\\n    g++ \\\n    curl \\\n    ca-certificates && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN git clone https://github.com/clusterzx/paperless-ai . && \\\n    git checkout 964c1bceefaf54502b606944b0dcdf5b4735eb15\n\nRUN npm install\n\nEXPOSE 3000\n\nCMD [\"tail\", \"-f\", \"/dev/null\"]",
  "dockerfile_source": "Repository at Dockerfile",
  "dockerfile_attempt_1": 1,
  "dockerfile_build_success": true,
  "llm_calls_total": 10
}